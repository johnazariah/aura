# Code Indexing

Aura indexes your codebase to provide intelligent code search, context-aware chat, and accurate workflow generation.

## How Indexing Works

When you index a repository, Aura:

1. **Scans** all source files
2. **Parses** code using language-specific parsers
3. **Extracts** semantic information (functions, classes, types)
4. **Creates embeddings** for semantic search
5. **Builds a code graph** of relationships

## Starting an Index

### From VS Code

1. Open a project folder
2. Click **Aura** in the Activity Bar
3. Find **"Code Graph"** section
4. Click **"Index Repository"**

### What Gets Indexed

| Language | Parser | Features |
|----------|--------|----------|
| **C#** | Roslyn | Full semantic analysis, types, references |
| **TypeScript** | TreeSitter | Functions, classes, types, imports |
| **JavaScript** | TreeSitter | Functions, classes, exports |
| **Python** | TreeSitter | Functions, classes, decorators |
| **Go** | TreeSitter | Functions, types, interfaces |
| **Java** | TreeSitter | Classes, methods, annotations |
| **Rust** | TreeSitter | Functions, structs, traits |

### Files Skipped

Aura automatically skips:
- `node_modules/`, `vendor/`, `.git/`
- Binary files, images, compiled output
- Files matching `.gitignore` patterns
- Very large files (>1MB by default)

## Viewing Index Status

The **Code Graph** section shows:

- **Status**: Idle, Indexing, Ready
- **Files**: Number of indexed files
- **Symbols**: Total extracted symbols
- **Last Updated**: When index was refreshed

## Re-indexing

Aura doesn't automatically re-index. Trigger manually when:

- You've pulled significant changes
- Added new files or directories
- Changed project structure

### Incremental vs Full

Currently, indexing is **full** (scans everything). Incremental indexing is planned for future releases.

## The Code Graph

Beyond text search, Aura builds a **code graph** with:

### Nodes
- Files
- Classes/Structs/Interfaces
- Functions/Methods
- Properties/Fields
- Types

### Relationships (Coming Soon)
- Inheritance
- Dependencies
- Call graphs
- Type references

## Semantic Search

Indexing enables **semantic search** - finding code by meaning, not just keywords:

```
Query: "where are orders processed"
Finds: OrderProcessor.cs, ProcessOrder method, OrderHandler class
       (even if they don't contain the word "processed")
```

This powers:
- Chat context retrieval
- Workflow planning
- Code exploration

## Configuration

### Excluded Paths

In `appsettings.json`:

```json
{
  "Aura": {
    "Indexing": {
      "ExcludedPaths": [
        "**/node_modules/**",
        "**/bin/**",
        "**/obj/**",
        "**/.git/**"
      ]
    }
  }
}
```

### Max File Size

```json
{
  "Aura": {
    "Indexing": {
      "MaxFileSizeKb": 1024
    }
  }
}
```

## Troubleshooting

### Index Taking Too Long

Large repositories may take several minutes. Progress is shown in the status panel.

To speed up:
1. Ensure excluded paths are configured
2. Check for large generated files to exclude
3. Consider indexing specific directories

### Symbols Not Found

If expected code isn't found:

1. Check the file is in a supported language
2. Verify the file isn't excluded
3. Try re-indexing the repository

### Out of Memory

For very large repositories:

1. Index specific directories instead
2. Increase exclusions
3. Consider splitting into multiple repos

## Storage

Index data is stored in:
- **PostgreSQL** - Code graph and metadata
- **pgvector** - Embedding vectors for semantic search

Location: Aura's bundled PostgreSQL in `C:\Program Files\Aura\data\`

## Privacy

All indexing happens **locally**:
- Code never leaves your machine
- Embeddings generated by local Ollama
- Database stored on your disk

If using cloud LLM providers, only search queries are sent (not your full codebase).
