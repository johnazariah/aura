{"version":3,"file":"extension.js","mappings":"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","sources":["webpack://aura/webpack/runtime/create fake namespace object","webpack://aura/./node_modules/asynckit/serialOrdered.js","webpack://aura/./node_modules/call-bind-apply-helpers/functionCall.js","webpack://aura/./src/providers/welcomeViewProvider.ts","webpack://aura/./src/providers/chatWindowProvider.ts","webpack://aura/./node_modules/asynckit/lib/defer.js","webpack://aura/./node_modules/math-intrinsics/round.js","webpack://aura/./node_modules/get-intrinsic/index.js","webpack://aura/./node_modules/es-define-property/index.js","webpack://aura/./node_modules/debug/src/common.js","webpack://aura/./node_modules/form-data/lib/form_data.js","webpack://aura/./node_modules/combined-stream/lib/combined_stream.js","webpack://aura/external node-commonjs \"os\"","webpack://aura/./node_modules/call-bind-apply-helpers/functionApply.js","webpack://aura/./node_modules/get-proto/Object.getPrototypeOf.js","webpack://aura/./src/providers/workflowPanelProvider.ts","webpack://aura/./node_modules/es-errors/eval.js","webpack://aura/./node_modules/has-symbols/shams.js","webpack://aura/./node_modules/form-data/lib/populate.js","webpack://aura/external commonjs \"vscode\"","webpack://aura/./node_modules/math-intrinsics/abs.js","webpack://aura/./node_modules/asynckit/index.js","webpack://aura/external node-commonjs \"tty\"","webpack://aura/./node_modules/asynckit/serial.js","webpack://aura/external node-commonjs \"stream\"","webpack://aura/./src/services/healthCheckService.ts","webpack://aura/./node_modules/asynckit/lib/async.js","webpack://aura/external node-commonjs \"assert\"","webpack://aura/./node_modules/math-intrinsics/sign.js","webpack://aura/external node-commonjs \"zlib\"","webpack://aura/./src/services/logService.ts","webpack://aura/./node_modules/call-bind-apply-helpers/index.js","webpack://aura/./node_modules/call-bind-apply-helpers/actualApply.js","webpack://aura/./node_modules/follow-redirects/index.js","webpack://aura/./node_modules/get-proto/index.js","webpack://aura/./node_modules/has-symbols/index.js","webpack://aura/./src/extension.ts","webpack://aura/external node-commonjs \"events\"","webpack://aura/./node_modules/math-intrinsics/isNaN.js","webpack://aura/./node_modules/asynckit/lib/abort.js","webpack://aura/external node-commonjs \"child_process\"","webpack://aura/./node_modules/es-errors/uri.js","webpack://aura/./src/services/auraApiService.ts","webpack://aura/external node-commonjs \"http2\"","webpack://aura/external node-commonjs \"https\"","webpack://aura/./node_modules/debug/src/index.js","webpack://aura/./node_modules/gopd/index.js","webpack://aura/./node_modules/math-intrinsics/pow.js","webpack://aura/./node_modules/has-flag/index.js","webpack://aura/./node_modules/debug/src/node.js","webpack://aura/./node_modules/mime-types/index.js","webpack://aura/./src/providers/agentTreeProvider.ts","webpack://aura/./node_modules/math-intrinsics/max.js","webpack://aura/./node_modules/asynckit/lib/terminator.js","webpack://aura/./src/services/gitService.ts","webpack://aura/./node_modules/proxy-from-env/index.js","webpack://aura/./node_modules/gopd/gOPD.js","webpack://aura/./node_modules/ms/index.js","webpack://aura/./node_modules/function-bind/index.js","webpack://aura/external node-commonjs \"path\"","webpack://aura/external node-commonjs \"crypto\"","webpack://aura/external node-commonjs \"url\"","webpack://aura/./node_modules/call-bind-apply-helpers/reflectApply.js","webpack://aura/./node_modules/dunder-proto/get.js","webpack://aura/./src/providers/workflowTreeProvider.ts","webpack://aura/./src/providers/statusTreeProvider.ts","webpack://aura/./node_modules/follow-redirects/debug.js","webpack://aura/./node_modules/mime-db/index.js","webpack://aura/./node_modules/supports-color/index.js","webpack://aura/./node_modules/debug/src/browser.js","webpack://aura/./node_modules/math-intrinsics/min.js","webpack://aura/./node_modules/asynckit/lib/iterate.js","webpack://aura/./node_modules/es-errors/syntax.js","webpack://aura/./node_modules/delayed-stream/lib/delayed_stream.js","webpack://aura/external node-commonjs \"http\"","webpack://aura/./node_modules/get-proto/Reflect.getPrototypeOf.js","webpack://aura/./node_modules/asynckit/parallel.js","webpack://aura/./node_modules/math-intrinsics/floor.js","webpack://aura/external node-commonjs \"util\"","webpack://aura/./node_modules/has-tostringtag/shams.js","webpack://aura/./node_modules/es-errors/range.js","webpack://aura/./node_modules/axios/dist/node/axios.cjs","webpack://aura/./node_modules/function-bind/implementation.js","webpack://aura/./node_modules/es-errors/index.js","webpack://aura/./node_modules/asynckit/lib/state.js","webpack://aura/./node_modules/es-errors/ref.js","webpack://aura/./node_modules/es-set-tostringtag/index.js","webpack://aura/./node_modules/es-object-atoms/index.js","webpack://aura/./node_modules/es-errors/type.js","webpack://aura/external node-commonjs \"fs\"","webpack://aura/./node_modules/hasown/index.js","webpack://aura/webpack/bootstrap","webpack://aura/webpack/runtime/define property getters","webpack://aura/webpack/runtime/hasOwnProperty shorthand","webpack://aura/webpack/runtime/make namespace object","webpack://aura/webpack/startup"],"sourcesContent":["var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; (typeof current == 'object' || typeof current == 'function') && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var iterate    = require('./lib/iterate.js')\n  , initState  = require('./lib/state.js')\n  , terminator = require('./lib/terminator.js')\n  ;\n\n// Public API\nmodule.exports = serialOrdered;\n// sorting helpers\nmodule.exports.ascending  = ascending;\nmodule.exports.descending = descending;\n\n/**\n * Runs iterator over provided sorted array elements in series\n *\n * @param   {array|object} list - array or object (named list) to iterate over\n * @param   {function} iterator - iterator to run\n * @param   {function} sortMethod - custom sort function\n * @param   {function} callback - invoked when all elements processed\n * @returns {function} - jobs terminator\n */\nfunction serialOrdered(list, iterator, sortMethod, callback)\n{\n  var state = initState(list, sortMethod);\n\n  iterate(list, iterator, state, function iteratorHandler(error, result)\n  {\n    if (error)\n    {\n      callback(error, result);\n      return;\n    }\n\n    state.index++;\n\n    // are we there yet?\n    if (state.index < (state['keyedList'] || list).length)\n    {\n      iterate(list, iterator, state, iteratorHandler);\n      return;\n    }\n\n    // done here\n    callback(null, state.results);\n  });\n\n  return terminator.bind(state, callback);\n}\n\n/*\n * -- Sort methods\n */\n\n/**\n * sort helper to sort array elements in ascending order\n *\n * @param   {mixed} a - an item to compare\n * @param   {mixed} b - an item to compare\n * @returns {number} - comparison result\n */\nfunction ascending(a, b)\n{\n  return a < b ? -1 : a > b ? 1 : 0;\n}\n\n/**\n * sort helper to sort array elements in descending order\n *\n * @param   {mixed} a - an item to compare\n * @param   {mixed} b - an item to compare\n * @returns {number} - comparison result\n */\nfunction descending(a, b)\n{\n  return -1 * ascending(a, b);\n}\n","'use strict';\n\n/** @type {import('./functionCall')} */\nmodule.exports = Function.prototype.call;\n","import * as vscode from 'vscode';\r\nimport { AuraApiService } from '../services/auraApiService';\r\n\r\nexport class WelcomeViewProvider implements vscode.TreeDataProvider<WelcomeItem> {\r\n    private _onDidChangeTreeData = new vscode.EventEmitter<WelcomeItem | undefined | null | void>();\r\n    readonly onDidChangeTreeData = this._onDidChangeTreeData.event;\r\n\r\n    constructor(private apiService: AuraApiService) {}\r\n\r\n    refresh(): void {\r\n        this._onDidChangeTreeData.fire();\r\n    }\r\n\r\n    getTreeItem(element: WelcomeItem): vscode.TreeItem {\r\n        return element;\r\n    }\r\n\r\n    async getChildren(element?: WelcomeItem): Promise<WelcomeItem[]> {\r\n        if (element) {\r\n            return [];\r\n        }\r\n\r\n        // Root level - show welcome content\r\n        const items: WelcomeItem[] = [];\r\n\r\n        // Welcome header\r\n        const header = new WelcomeItem(\r\n            'Welcome to Aura',\r\n            vscode.TreeItemCollapsibleState.None\r\n        );\r\n        header.iconPath = new vscode.ThemeIcon('sparkle');\r\n        header.description = '';\r\n        items.push(header);\r\n\r\n        // Description\r\n        const desc1 = new WelcomeItem(\r\n            'Aura indexes your code locally for AI-assisted development',\r\n            vscode.TreeItemCollapsibleState.None\r\n        );\r\n        items.push(desc1);\r\n\r\n        // What happens section - features with proper icons\r\n        const features = [\r\n            { icon: 'code', text: 'Code and docs are indexed' },\r\n            { icon: 'database', text: 'Embeddings stored locally' },\r\n            { icon: 'symbol-structure', text: 'Code graph built for navigation' },\r\n            { icon: 'lock', text: 'All data stays on your machine' }\r\n        ];\r\n\r\n        for (const feature of features) {\r\n            const item = new WelcomeItem(\r\n                feature.text,\r\n                vscode.TreeItemCollapsibleState.None\r\n            );\r\n            item.iconPath = new vscode.ThemeIcon(feature.icon);\r\n            items.push(item);\r\n        }\r\n\r\n        // Enable button (as a clickable item)\r\n        const enableItem = new WelcomeItem(\r\n            'Enable Aura for this Workspace',\r\n            vscode.TreeItemCollapsibleState.None\r\n        );\r\n        enableItem.command = {\r\n            command: 'aura.onboardWorkspace',\r\n            title: 'Enable Aura for this Workspace'\r\n        };\r\n        enableItem.contextValue = 'enableButton';\r\n        enableItem.iconPath = new vscode.ThemeIcon('rocket', new vscode.ThemeColor('charts.green'));\r\n        items.push(enableItem);\r\n\r\n        return items;\r\n    }\r\n}\r\n\r\nexport class WelcomeItem extends vscode.TreeItem {\r\n    constructor(\r\n        public readonly label: string,\r\n        public readonly collapsibleState: vscode.TreeItemCollapsibleState\r\n    ) {\r\n        super(label, collapsibleState);\r\n    }\r\n}\r\n","import * as vscode from 'vscode';\r\nimport { AuraApiService, AgentInfo, IndexHealthResponse } from '../services/auraApiService';\r\n\r\n/**\r\n * Normalizes a file path for consistent API calls.\r\n * Matches the C# PathNormalizer: forward slashes, lowercase.\r\n */\r\nfunction normalizePath(path: string): string {\r\n    if (!path) return path;\r\n    return path\r\n        .replace(/\\\\\\\\/g, '/')  // Handle escaped backslashes\r\n        .replace(/\\\\/g, '/')     // Convert backslashes to forward slashes\r\n        .toLowerCase();\r\n}\r\n\r\nexport type ContextMode = 'none' | 'text' | 'graph' | 'full';\r\n\r\ninterface ChatMessage {\r\n    role: 'user' | 'assistant' | 'system';\r\n    content: string;\r\n    timestamp: Date;\r\n    tokensUsed?: number;\r\n    durationMs?: number;\r\n    model?: string;\r\n}\r\n\r\n/**\r\n * Opens a dedicated chat window (WebviewPanel) for a specific agent.\r\n * Unlike the sidebar panel, this creates a full editor-area chat experience.\r\n */\r\nexport class ChatWindowProvider {\r\n    private static _panels: Map<string, vscode.WebviewPanel> = new Map();\r\n\r\n    constructor(\r\n        private readonly _extensionUri: vscode.Uri,\r\n        private readonly _apiService: AuraApiService\r\n    ) {}\r\n\r\n    /**\r\n     * Opens or focuses a chat window for the specified agent.\r\n     */\r\n    public async openChatWindow(agent: AgentInfo): Promise<void> {\r\n        const panelKey = agent.id;\r\n\r\n        // If panel already exists, reveal it\r\n        const existingPanel = ChatWindowProvider._panels.get(panelKey);\r\n        if (existingPanel) {\r\n            existingPanel.reveal(vscode.ViewColumn.One);\r\n            return;\r\n        }\r\n\r\n        // Create new panel\r\n        const panel = vscode.window.createWebviewPanel(\r\n            'auraChat',\r\n            `Chat: ${agent.name}`,\r\n            vscode.ViewColumn.One,\r\n            {\r\n                enableScripts: true,\r\n                retainContextWhenHidden: true,\r\n                localResourceRoots: [this._extensionUri]\r\n            }\r\n        );\r\n\r\n        // Set icon\r\n        panel.iconPath = {\r\n            light: vscode.Uri.joinPath(this._extensionUri, 'resources', 'chat-light.svg'),\r\n            dark: vscode.Uri.joinPath(this._extensionUri, 'resources', 'chat-dark.svg')\r\n        };\r\n\r\n        ChatWindowProvider._panels.set(panelKey, panel);\r\n\r\n        // Clean up when panel is closed\r\n        panel.onDidDispose(() => {\r\n            ChatWindowProvider._panels.delete(panelKey);\r\n        });\r\n\r\n        // Set up the webview content\r\n        panel.webview.html = this._getHtmlForWebview(panel.webview, agent);\r\n\r\n        // Track conversation state\r\n        let messages: ChatMessage[] = [];\r\n        let contextMode: ContextMode = 'full';\r\n        let indexHealth: IndexHealthResponse | undefined;\r\n\r\n        // Refresh index health\r\n        const refreshIndexHealth = async () => {\r\n            const workspacePath = vscode.workspace.workspaceFolders?.[0]?.uri.fsPath;\r\n            if (workspacePath) {\r\n                try {\r\n                    indexHealth = await this._apiService.getIndexHealth(workspacePath);\r\n                    panel.webview.postMessage({ type: 'healthUpdate', health: indexHealth });\r\n                } catch {\r\n                    // Silently fail - health indicator will show unknown\r\n                }\r\n            }\r\n        };\r\n\r\n        // Handle messages from webview\r\n        panel.webview.onDidReceiveMessage(async (data) => {\r\n            switch (data.type) {\r\n                case 'sendMessage':\r\n                    await this._handleMessage(panel, agent, data.message, messages, contextMode);\r\n                    break;\r\n                case 'setContextMode':\r\n                    contextMode = data.mode as ContextMode;\r\n                    break;\r\n                case 'refreshHealth':\r\n                    await refreshIndexHealth();\r\n                    break;\r\n                case 'clearChat':\r\n                    messages = [];\r\n                    panel.webview.postMessage({ type: 'cleared' });\r\n                    break;\r\n                case 'ready':\r\n                    // Send initial state\r\n                    panel.webview.postMessage({\r\n                        type: 'init',\r\n                        agent: { id: agent.id, name: agent.name, model: agent.model },\r\n                        contextMode,\r\n                        indexHealth\r\n                    });\r\n                    // Fetch initial health\r\n                    await refreshIndexHealth();\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n\r\n    private async _handleMessage(\r\n        panel: vscode.WebviewPanel,\r\n        agent: AgentInfo,\r\n        message: string,\r\n        messages: ChatMessage[],\r\n        contextMode: ContextMode\r\n    ): Promise<void> {\r\n        // Add user message\r\n        const userMessage: ChatMessage = {\r\n            role: 'user',\r\n            content: message,\r\n            timestamp: new Date()\r\n        };\r\n        messages.push(userMessage);\r\n\r\n        panel.webview.postMessage({\r\n            type: 'userMessage',\r\n            message: userMessage\r\n        });\r\n\r\n        // Show typing indicator\r\n        panel.webview.postMessage({ type: 'typing', isTyping: true, status: 'Thinking and exploring codebase...' });\r\n\r\n        try {\r\n            const rawPath = vscode.workspace.workspaceFolders?.[0]?.uri.fsPath;\r\n            const workspacePath = rawPath ? normalizePath(rawPath) : undefined;\r\n            let response: { content: string; tokensUsed: number; durationMs?: number };\r\n\r\n            const startTime = Date.now();\r\n            const useRag = contextMode === 'text' || contextMode === 'full';\r\n            const useCodeGraph = contextMode === 'graph' || contextMode === 'full';\r\n\r\n            if (contextMode !== 'none') {\r\n                // Use agentic chat for multi-step exploration\r\n                const agenticResponse = await this._apiService.executeAgentAgentic(\r\n                    agent.id,\r\n                    message,\r\n                    workspacePath,\r\n                    10, // maxSteps\r\n                    useRag,\r\n                    useCodeGraph\r\n                );\r\n                response = {\r\n                    content: agenticResponse.content,\r\n                    tokensUsed: agenticResponse.tokensUsed,\r\n                    durationMs: agenticResponse.durationMs\r\n                };\r\n            } else {\r\n                const content = await this._apiService.executeAgent(\r\n                    agent.id,\r\n                    message,\r\n                    workspacePath\r\n                );\r\n                // For non-RAG, calculate duration client-side\r\n                response = {\r\n                    content,\r\n                    tokensUsed: 0,\r\n                    durationMs: Date.now() - startTime\r\n                };\r\n            }\r\n\r\n            const assistantMessage: ChatMessage = {\r\n                role: 'assistant',\r\n                content: response.content,\r\n                timestamp: new Date(),\r\n                tokensUsed: response.tokensUsed,\r\n                durationMs: response.durationMs,\r\n                model: agent.model\r\n            };\r\n            messages.push(assistantMessage);\r\n\r\n            panel.webview.postMessage({\r\n                type: 'assistantMessage',\r\n                message: assistantMessage\r\n            });\r\n\r\n        } catch (error) {\r\n            const errorMessage = error instanceof Error ? error.message : 'Unknown error';\r\n            panel.webview.postMessage({\r\n                type: 'error',\r\n                message: errorMessage\r\n            });\r\n        }\r\n\r\n        panel.webview.postMessage({ type: 'typing', isTyping: false });\r\n    }\r\n\r\n    private _getHtmlForWebview(webview: vscode.Webview, agent: AgentInfo): string {\r\n        return `<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'none'; style-src ${webview.cspSource} 'unsafe-inline'; script-src ${webview.cspSource} 'unsafe-inline';\">\r\n    <title>Chat: ${agent.name}</title>\r\n    <style>\r\n        :root {\r\n            --container-padding: 20px;\r\n            --message-max-width: 800px;\r\n        }\r\n\r\n        * {\r\n            box-sizing: border-box;\r\n        }\r\n\r\n        body {\r\n            padding: 0;\r\n            margin: 0;\r\n            font-family: var(--vscode-font-family);\r\n            font-size: var(--vscode-font-size);\r\n            color: var(--vscode-foreground);\r\n            background-color: var(--vscode-editor-background);\r\n            height: 100vh;\r\n            display: flex;\r\n            flex-direction: column;\r\n        }\r\n\r\n        /* Header */\r\n        .header {\r\n            padding: 12px var(--container-padding);\r\n            background: var(--vscode-sideBar-background);\r\n            border-bottom: 1px solid var(--vscode-panel-border);\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 16px;\r\n            flex-shrink: 0;\r\n        }\r\n\r\n        .agent-info {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 12px;\r\n            flex: 1;\r\n        }\r\n\r\n        .agent-avatar {\r\n            width: 40px;\r\n            height: 40px;\r\n            border-radius: 50%;\r\n            background: var(--vscode-button-background);\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            font-size: 18px;\r\n        }\r\n\r\n        .agent-details h2 {\r\n            margin: 0;\r\n            font-size: 16px;\r\n            font-weight: 600;\r\n        }\r\n\r\n        .agent-details .model {\r\n            font-size: 12px;\r\n            opacity: 0.7;\r\n            margin-top: 2px;\r\n        }\r\n\r\n        .header-controls {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 16px;\r\n        }\r\n\r\n        .context-mode-container {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 8px;\r\n            font-size: 13px;\r\n        }\r\n\r\n        .context-select {\r\n            background: var(--vscode-dropdown-background);\r\n            color: var(--vscode-dropdown-foreground);\r\n            border: 1px solid var(--vscode-dropdown-border);\r\n            border-radius: 4px;\r\n            padding: 4px 8px;\r\n            font-size: 12px;\r\n            cursor: pointer;\r\n        }\r\n\r\n        .context-select:focus {\r\n            outline: 1px solid var(--vscode-focusBorder);\r\n        }\r\n\r\n        .health-indicator {\r\n            font-size: 12px;\r\n            cursor: help;\r\n        }\r\n\r\n        .health-indicator.fresh { color: #4caf50; }\r\n        .health-indicator.stale { color: #ff9800; }\r\n        .health-indicator.outdated { color: #f44336; }\r\n        .health-indicator.unknown { color: #9e9e9e; }\r\n\r\n        .toggle-container {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 8px;\r\n            font-size: 13px;\r\n        }\r\n\r\n        .toggle {\r\n            width: 40px;\r\n            height: 20px;\r\n            background: var(--vscode-input-background);\r\n            border-radius: 10px;\r\n            position: relative;\r\n            cursor: pointer;\r\n            border: 1px solid var(--vscode-input-border);\r\n            transition: background 0.2s;\r\n        }\r\n\r\n        .toggle.active {\r\n            background: var(--vscode-button-background);\r\n        }\r\n\r\n        .toggle::after {\r\n            content: '';\r\n            position: absolute;\r\n            width: 16px;\r\n            height: 16px;\r\n            background: var(--vscode-button-foreground);\r\n            border-radius: 50%;\r\n            top: 1px;\r\n            left: 1px;\r\n            transition: transform 0.2s;\r\n        }\r\n\r\n        .toggle.active::after {\r\n            transform: translateX(20px);\r\n        }\r\n\r\n        .header-button {\r\n            background: var(--vscode-button-secondaryBackground);\r\n            color: var(--vscode-button-secondaryForeground);\r\n            border: none;\r\n            padding: 6px 12px;\r\n            border-radius: 4px;\r\n            cursor: pointer;\r\n            font-size: 12px;\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 6px;\r\n        }\r\n\r\n        .header-button:hover {\r\n            background: var(--vscode-button-secondaryHoverBackground);\r\n        }\r\n\r\n        /* Messages Area */\r\n        .messages-container {\r\n            flex: 1;\r\n            overflow-y: auto;\r\n            padding: var(--container-padding);\r\n        }\r\n\r\n        .messages {\r\n            max-width: var(--message-max-width);\r\n            margin: 0 auto;\r\n            display: flex;\r\n            flex-direction: column;\r\n            gap: 16px;\r\n        }\r\n\r\n        .message {\r\n            display: flex;\r\n            gap: 12px;\r\n            animation: fadeIn 0.2s ease-out;\r\n        }\r\n\r\n        @keyframes fadeIn {\r\n            from { opacity: 0; transform: translateY(8px); }\r\n            to { opacity: 1; transform: translateY(0); }\r\n        }\r\n\r\n        .message.user {\r\n            flex-direction: row-reverse;\r\n        }\r\n\r\n        .message-avatar {\r\n            width: 32px;\r\n            height: 32px;\r\n            border-radius: 50%;\r\n            background: var(--vscode-input-background);\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            flex-shrink: 0;\r\n            font-size: 14px;\r\n        }\r\n\r\n        .message.user .message-avatar {\r\n            background: var(--vscode-button-background);\r\n        }\r\n\r\n        .message-bubble {\r\n            max-width: 80%;\r\n            padding: 12px 16px;\r\n            border-radius: 12px;\r\n            line-height: 1.5;\r\n        }\r\n\r\n        .message.user .message-bubble {\r\n            background: var(--vscode-button-background);\r\n            color: var(--vscode-button-foreground);\r\n            border-bottom-right-radius: 4px;\r\n        }\r\n\r\n        .message.assistant .message-bubble {\r\n            background: var(--vscode-input-background);\r\n            border: 1px solid var(--vscode-input-border);\r\n            border-bottom-left-radius: 4px;\r\n        }\r\n\r\n        .message-content {\r\n            white-space: pre-wrap;\r\n            word-wrap: break-word;\r\n        }\r\n\r\n        .message-content code {\r\n            background: var(--vscode-textCodeBlock-background);\r\n            padding: 2px 6px;\r\n            border-radius: 4px;\r\n            font-family: var(--vscode-editor-font-family);\r\n            font-size: 0.9em;\r\n        }\r\n\r\n        .message-content pre {\r\n            background: var(--vscode-textCodeBlock-background);\r\n            padding: 12px;\r\n            border-radius: 6px;\r\n            overflow-x: auto;\r\n            margin: 8px 0;\r\n        }\r\n\r\n        .message-content pre code {\r\n            padding: 0;\r\n            background: none;\r\n        }\r\n\r\n        .message-meta {\r\n            font-size: 11px;\r\n            opacity: 0.6;\r\n            margin-top: 8px;\r\n            display: flex;\r\n            gap: 12px;\r\n        }\r\n\r\n        /* Typing Indicator */\r\n        .typing-indicator {\r\n            display: none;\r\n            gap: 12px;\r\n            padding: 0 var(--container-padding);\r\n            max-width: var(--message-max-width);\r\n            margin: 0 auto 16px;\r\n        }\r\n\r\n        .typing-indicator.visible {\r\n            display: flex;\r\n        }\r\n\r\n        .typing-bubble {\r\n            background: var(--vscode-input-background);\r\n            border: 1px solid var(--vscode-input-border);\r\n            padding: 12px 16px;\r\n            border-radius: 12px;\r\n            border-bottom-left-radius: 4px;\r\n        }\r\n\r\n        .typing-status {\r\n            font-size: 12px;\r\n            color: var(--vscode-descriptionForeground);\r\n            margin-bottom: 8px;\r\n        }\r\n\r\n        .typing-dots {\r\n            display: flex;\r\n            gap: 4px;\r\n        }\r\n\r\n        .typing-dots span {\r\n            width: 8px;\r\n            height: 8px;\r\n            background: var(--vscode-foreground);\r\n            border-radius: 50%;\r\n            animation: bounce 1.4s infinite ease-in-out;\r\n            opacity: 0.6;\r\n        }\r\n\r\n        .typing-dots span:nth-child(1) { animation-delay: -0.32s; }\r\n        .typing-dots span:nth-child(2) { animation-delay: -0.16s; }\r\n\r\n        @keyframes bounce {\r\n            0%, 80%, 100% { transform: scale(0); }\r\n            40% { transform: scale(1); }\r\n        }\r\n\r\n        /* Empty State */\r\n        .empty-state {\r\n            flex: 1;\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: center;\r\n            justify-content: center;\r\n            text-align: center;\r\n            padding: 40px;\r\n            opacity: 0.8;\r\n        }\r\n\r\n        .empty-state h2 {\r\n            margin: 0 0 8px;\r\n            font-size: 20px;\r\n        }\r\n\r\n        .empty-state p {\r\n            margin: 0 0 24px;\r\n            font-size: 14px;\r\n            max-width: 400px;\r\n            line-height: 1.5;\r\n        }\r\n\r\n        .suggestions {\r\n            display: flex;\r\n            flex-wrap: wrap;\r\n            gap: 8px;\r\n            justify-content: center;\r\n        }\r\n\r\n        .suggestion {\r\n            background: var(--vscode-input-background);\r\n            border: 1px solid var(--vscode-input-border);\r\n            padding: 8px 16px;\r\n            border-radius: 20px;\r\n            cursor: pointer;\r\n            font-size: 13px;\r\n            transition: all 0.2s;\r\n        }\r\n\r\n        .suggestion:hover {\r\n            background: var(--vscode-button-background);\r\n            color: var(--vscode-button-foreground);\r\n            border-color: var(--vscode-button-background);\r\n        }\r\n\r\n        /* Input Area */\r\n        .input-area {\r\n            padding: var(--container-padding);\r\n            background: var(--vscode-sideBar-background);\r\n            border-top: 1px solid var(--vscode-panel-border);\r\n            flex-shrink: 0;\r\n        }\r\n\r\n        .input-wrapper {\r\n            max-width: var(--message-max-width);\r\n            margin: 0 auto;\r\n            display: flex;\r\n            gap: 12px;\r\n            align-items: flex-end;\r\n        }\r\n\r\n        .input-box {\r\n            flex: 1;\r\n            background: var(--vscode-input-background);\r\n            border: 1px solid var(--vscode-input-border);\r\n            border-radius: 12px;\r\n            padding: 12px 16px;\r\n            display: flex;\r\n            align-items: flex-end;\r\n            gap: 12px;\r\n        }\r\n\r\n        .input-box:focus-within {\r\n            border-color: var(--vscode-focusBorder);\r\n        }\r\n\r\n        #messageInput {\r\n            flex: 1;\r\n            background: transparent;\r\n            border: none;\r\n            color: var(--vscode-input-foreground);\r\n            font-family: inherit;\r\n            font-size: 14px;\r\n            line-height: 1.5;\r\n            resize: none;\r\n            min-height: 24px;\r\n            max-height: 200px;\r\n            outline: none;\r\n        }\r\n\r\n        #messageInput::placeholder {\r\n            color: var(--vscode-input-placeholderForeground);\r\n        }\r\n\r\n        #sendButton {\r\n            width: 36px;\r\n            height: 36px;\r\n            background: var(--vscode-button-background);\r\n            color: var(--vscode-button-foreground);\r\n            border: none;\r\n            border-radius: 50%;\r\n            cursor: pointer;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            flex-shrink: 0;\r\n            transition: all 0.2s;\r\n        }\r\n\r\n        #sendButton:hover {\r\n            background: var(--vscode-button-hoverBackground);\r\n            transform: scale(1.05);\r\n        }\r\n\r\n        #sendButton:disabled {\r\n            opacity: 0.5;\r\n            cursor: not-allowed;\r\n            transform: none;\r\n        }\r\n\r\n        /* Error Banner */\r\n        .error-banner {\r\n            background: var(--vscode-inputValidation-errorBackground);\r\n            border: 1px solid var(--vscode-inputValidation-errorBorder);\r\n            color: var(--vscode-inputValidation-errorForeground);\r\n            padding: 12px 20px;\r\n            margin: 0 var(--container-padding);\r\n            border-radius: 8px;\r\n            font-size: 13px;\r\n            display: none;\r\n            max-width: var(--message-max-width);\r\n            margin-left: auto;\r\n            margin-right: auto;\r\n        }\r\n\r\n        .error-banner.visible {\r\n            display: block;\r\n            margin-bottom: 16px;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"header\">\r\n        <div class=\"agent-info\">\r\n            <div class=\"agent-avatar\"></div>\r\n            <div class=\"agent-details\">\r\n                <h2 id=\"agentName\">${agent.name}</h2>\r\n                <div class=\"model\" id=\"agentModel\">${agent.model || 'Loading...'}</div>\r\n            </div>\r\n        </div>\r\n        <div class=\"header-controls\">\r\n            <div class=\"context-mode-container\">\r\n                <label for=\"contextMode\">Context:</label>\r\n                <select id=\"contextMode\" class=\"context-select\">\r\n                    <option value=\"full\">Full (Text + Graph)</option>\r\n                    <option value=\"text\">Text RAG Only</option>\r\n                    <option value=\"graph\">Graph RAG Only</option>\r\n                    <option value=\"none\">No Context</option>\r\n                </select>\r\n                <span id=\"healthIndicator\" class=\"health-indicator\" title=\"Index health unknown\"></span>\r\n            </div>\r\n            <button class=\"header-button\" id=\"clearBtn\">\r\n                <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\r\n                    <path d=\"M10 3h3v1h-1v9l-1 1H4l-1-1V4H2V3h3V2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v1zM9 2H6v1h3V2zM4 13h7V4H4v9zm2-8H5v7h1V5zm1 0h1v7H7V5zm2 0h1v7H9V5z\"/>\r\n                </svg>\r\n                Clear\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"error-banner\" id=\"errorBanner\"></div>\r\n\r\n    <div class=\"messages-container\" id=\"messagesContainer\">\r\n        <div class=\"empty-state\" id=\"emptyState\">\r\n            <h2>Chat with ${agent.name}</h2>\r\n            <p>Ask questions about your code, get help with tasks, or just have a conversation. RAG is enabled by default for context-aware responses.</p>\r\n            <div class=\"suggestions\">\r\n                <div class=\"suggestion\" data-prompt=\"What does this codebase do?\">What does this codebase do?</div>\r\n                <div class=\"suggestion\" data-prompt=\"Explain the architecture\">Explain the architecture</div>\r\n                <div class=\"suggestion\" data-prompt=\"Find potential bugs\">Find potential bugs</div>\r\n            </div>\r\n        </div>\r\n        <div class=\"messages\" id=\"messages\"></div>\r\n    </div>\r\n\r\n    <div class=\"typing-indicator\" id=\"typingIndicator\">\r\n        <div class=\"message-avatar\"></div>\r\n        <div class=\"typing-bubble\">\r\n            <div class=\"typing-status\" id=\"typingStatus\">Exploring codebase...</div>\r\n            <div class=\"typing-dots\">\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"input-area\">\r\n        <div class=\"input-wrapper\">\r\n            <div class=\"input-box\">\r\n                <textarea \r\n                    id=\"messageInput\" \r\n                    placeholder=\"Type your message...\"\r\n                    rows=\"1\"\r\n                ></textarea>\r\n            </div>\r\n            <button id=\"sendButton\" title=\"Send message (Enter)\">\r\n                <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                    <path d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"/>\r\n                </svg>\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        const vscode = acquireVsCodeApi();\r\n\r\n        const messagesContainer = document.getElementById('messagesContainer');\r\n        const messagesEl = document.getElementById('messages');\r\n        const emptyState = document.getElementById('emptyState');\r\n        const typingIndicator = document.getElementById('typingIndicator');\r\n        const messageInput = document.getElementById('messageInput');\r\n        const sendButton = document.getElementById('sendButton');\r\n        const ragToggle = document.getElementById('contextMode');\r\n        const healthIndicator = document.getElementById('healthIndicator');\r\n        const clearBtn = document.getElementById('clearBtn');\r\n        const errorBanner = document.getElementById('errorBanner');\r\n        const suggestions = document.querySelectorAll('.suggestion');\r\n\r\n        let contextMode = 'full';\r\n        let hasMessages = false;\r\n\r\n        function updateHealthIndicator(health) {\r\n            if (!health) {\r\n                healthIndicator.className = 'health-indicator unknown';\r\n                healthIndicator.title = 'Index health unknown';\r\n                return;\r\n            }\r\n            const status = health.overallStatus || 'unknown';\r\n            healthIndicator.className = 'health-indicator ' + status;\r\n            let title = 'Index status: ' + status;\r\n            if (health.commitsBehind > 0) {\r\n                title += ' (' + health.commitsBehind + ' commits behind)';\r\n            }\r\n            healthIndicator.title = title;\r\n        }\r\n\r\n        // Handle messages from extension\r\n        window.addEventListener('message', event => {\r\n            const message = event.data;\r\n\r\n            switch (message.type) {\r\n                case 'init':\r\n                    contextMode = message.contextMode || 'full';\r\n                    ragToggle.value = contextMode;\r\n                    updateHealthIndicator(message.indexHealth);\r\n                    break;\r\n\r\n                case 'healthUpdate':\r\n                    updateHealthIndicator(message.health);\r\n                    break;\r\n\r\n                case 'userMessage':\r\n                    addMessage(message.message, 'user');\r\n                    break;\r\n\r\n                case 'assistantMessage':\r\n                    addMessage(message.message, 'assistant');\r\n                    break;\r\n\r\n                case 'typing':\r\n                    typingIndicator.classList.toggle('visible', message.isTyping);\r\n                    sendButton.disabled = message.isTyping;\r\n                    if (message.isTyping) {\r\n                        document.getElementById('typingStatus').textContent = message.status || 'Exploring codebase...';\r\n                        scrollToBottom();\r\n                    }\r\n                    break;\r\n\r\n                case 'error':\r\n                    showError(message.message);\r\n                    break;\r\n\r\n                case 'cleared':\r\n                    messagesEl.innerHTML = '';\r\n                    hasMessages = false;\r\n                    emptyState.style.display = 'flex';\r\n                    break;\r\n            }\r\n        });\r\n\r\n        function addMessage(msg, role) {\r\n            if (!hasMessages) {\r\n                hasMessages = true;\r\n                emptyState.style.display = 'none';\r\n            }\r\n\r\n            const div = document.createElement('div');\r\n            div.className = 'message ' + role;\r\n\r\n            const avatar = document.createElement('div');\r\n            avatar.className = 'message-avatar';\r\n            avatar.textContent = role === 'user' ? '' : '';\r\n            div.appendChild(avatar);\r\n\r\n            const bubble = document.createElement('div');\r\n            bubble.className = 'message-bubble';\r\n\r\n            const content = document.createElement('div');\r\n            content.className = 'message-content';\r\n            content.innerHTML = formatContent(msg.content);\r\n            bubble.appendChild(content);\r\n\r\n            if (role === 'assistant' && (msg.tokensUsed || msg.model || msg.durationMs)) {\r\n                const meta = document.createElement('div');\r\n                meta.className = 'message-meta';\r\n                if (msg.model) {\r\n                    const modelSpan = document.createElement('span');\r\n                    modelSpan.textContent = msg.model;\r\n                    meta.appendChild(modelSpan);\r\n                }\r\n                if (msg.tokensUsed && msg.durationMs) {\r\n                    const tokensPerSec = (msg.tokensUsed / (msg.durationMs / 1000)).toFixed(1);\r\n                    const throughputSpan = document.createElement('span');\r\n                    throughputSpan.textContent = tokensPerSec + ' tok/s';\r\n                    throughputSpan.title = msg.tokensUsed + ' tokens in ' + (msg.durationMs / 1000).toFixed(1) + 's';\r\n                    meta.appendChild(throughputSpan);\r\n                } else if (msg.tokensUsed) {\r\n                    const tokensSpan = document.createElement('span');\r\n                    tokensSpan.textContent = msg.tokensUsed + ' tokens';\r\n                    meta.appendChild(tokensSpan);\r\n                }\r\n                if (msg.durationMs) {\r\n                    const timeSpan = document.createElement('span');\r\n                    const seconds = (msg.durationMs / 1000).toFixed(1);\r\n                    timeSpan.textContent = seconds + 's';\r\n                    meta.appendChild(timeSpan);\r\n                }\r\n                bubble.appendChild(meta);\r\n            }\r\n\r\n            div.appendChild(bubble);\r\n            messagesEl.appendChild(div);\r\n            scrollToBottom();\r\n        }\r\n\r\n        function formatContent(content) {\r\n            // Code blocks with syntax highlighting hint\r\n            content = content.replace(/\\`\\`\\`(\\\\w*)\\\\n([\\\\s\\\\S]*?)\\`\\`\\`/g, '<pre><code class=\"language-$1\">$2</code></pre>');\r\n            // Inline code\r\n            content = content.replace(/\\`([^\\`]+)\\`/g, '<code>$1</code>');\r\n            // Bold\r\n            content = content.replace(/\\\\*\\\\*([^*]+)\\\\*\\\\*/g, '<strong>$1</strong>');\r\n            // Italic\r\n            content = content.replace(/\\\\*([^*]+)\\\\*/g, '<em>$1</em>');\r\n            // Line breaks\r\n            content = content.replace(/\\\\n/g, '<br>');\r\n            return content;\r\n        }\r\n\r\n        function scrollToBottom() {\r\n            messagesContainer.scrollTop = messagesContainer.scrollHeight;\r\n        }\r\n\r\n        function showError(message) {\r\n            errorBanner.textContent = ' ' + message;\r\n            errorBanner.classList.add('visible');\r\n            setTimeout(() => {\r\n                errorBanner.classList.remove('visible');\r\n            }, 5000);\r\n        }\r\n\r\n        function sendMessage(text) {\r\n            const message = text || messageInput.value.trim();\r\n            if (!message) return;\r\n\r\n            vscode.postMessage({ type: 'sendMessage', message });\r\n            messageInput.value = '';\r\n            messageInput.style.height = 'auto';\r\n        }\r\n\r\n        // Event listeners\r\n        sendButton.addEventListener('click', () => sendMessage());\r\n\r\n        messageInput.addEventListener('keydown', (e) => {\r\n            if (e.key === 'Enter' && !e.shiftKey) {\r\n                e.preventDefault();\r\n                sendMessage();\r\n            }\r\n        });\r\n\r\n        // Auto-resize textarea\r\n        messageInput.addEventListener('input', () => {\r\n            messageInput.style.height = 'auto';\r\n            messageInput.style.height = Math.min(messageInput.scrollHeight, 200) + 'px';\r\n        });\r\n\r\n        ragToggle.addEventListener('change', () => {\r\n            contextMode = ragToggle.value;\r\n            vscode.postMessage({ type: 'setContextMode', mode: contextMode });\r\n        });\r\n\r\n        clearBtn.addEventListener('click', () => {\r\n            vscode.postMessage({ type: 'clearChat' });\r\n        });\r\n\r\n        // Suggestion clicks\r\n        suggestions.forEach(s => {\r\n            s.addEventListener('click', () => {\r\n                const prompt = s.getAttribute('data-prompt');\r\n                if (prompt) {\r\n                    sendMessage(prompt);\r\n                }\r\n            });\r\n        });\r\n\r\n        // Focus input on load\r\n        messageInput.focus();\r\n\r\n        // Initialize\r\n        vscode.postMessage({ type: 'ready' });\r\n    </script>\r\n</body>\r\n</html>`;\r\n    }\r\n}\r\n","module.exports = defer;\n\n/**\n * Runs provided function on next iteration of the event loop\n *\n * @param {function} fn - function to run\n */\nfunction defer(fn)\n{\n  var nextTick = typeof setImmediate == 'function'\n    ? setImmediate\n    : (\n      typeof process == 'object' && typeof process.nextTick == 'function'\n      ? process.nextTick\n      : null\n    );\n\n  if (nextTick)\n  {\n    nextTick(fn);\n  }\n  else\n  {\n    setTimeout(fn, 0);\n  }\n}\n","'use strict';\n\n/** @type {import('./round')} */\nmodule.exports = Math.round;\n","'use strict';\n\nvar undefined;\n\nvar $Object = require('es-object-atoms');\n\nvar $Error = require('es-errors');\nvar $EvalError = require('es-errors/eval');\nvar $RangeError = require('es-errors/range');\nvar $ReferenceError = require('es-errors/ref');\nvar $SyntaxError = require('es-errors/syntax');\nvar $TypeError = require('es-errors/type');\nvar $URIError = require('es-errors/uri');\n\nvar abs = require('math-intrinsics/abs');\nvar floor = require('math-intrinsics/floor');\nvar max = require('math-intrinsics/max');\nvar min = require('math-intrinsics/min');\nvar pow = require('math-intrinsics/pow');\nvar round = require('math-intrinsics/round');\nvar sign = require('math-intrinsics/sign');\n\nvar $Function = Function;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD = require('gopd');\nvar $defineProperty = require('es-define-property');\n\nvar throwTypeError = function () {\n\tthrow new $TypeError();\n};\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\n\nvar getProto = require('get-proto');\nvar $ObjectGPO = require('get-proto/Object.getPrototypeOf');\nvar $ReflectGPO = require('get-proto/Reflect.getPrototypeOf');\n\nvar $apply = require('call-bind-apply-helpers/functionApply');\nvar $call = require('call-bind-apply-helpers/functionCall');\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' || !getProto ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t__proto__: null,\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols && getProto ? getProto([][Symbol.iterator]()) : undefined,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,\n\t'%BigInt64Array%': typeof BigInt64Array === 'undefined' ? undefined : BigInt64Array,\n\t'%BigUint64Array%': typeof BigUint64Array === 'undefined' ? undefined : BigUint64Array,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': $Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': $EvalError,\n\t'%Float16Array%': typeof Float16Array === 'undefined' ? undefined : Float16Array,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols && getProto ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': $Object,\n\t'%Object.getOwnPropertyDescriptor%': $gOPD,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': $RangeError,\n\t'%ReferenceError%': $ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols && getProto ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SyntaxError%': $SyntaxError,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%URIError%': $URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet,\n\n\t'%Function.prototype.call%': $call,\n\t'%Function.prototype.apply%': $apply,\n\t'%Object.defineProperty%': $defineProperty,\n\t'%Object.getPrototypeOf%': $ObjectGPO,\n\t'%Math.abs%': abs,\n\t'%Math.floor%': floor,\n\t'%Math.max%': max,\n\t'%Math.min%': min,\n\t'%Math.pow%': pow,\n\t'%Math.round%': round,\n\t'%Math.sign%': sign,\n\t'%Reflect.getPrototypeOf%': $ReflectGPO\n};\n\nif (getProto) {\n\ttry {\n\t\tnull.error; // eslint-disable-line no-unused-expressions\n\t} catch (e) {\n\t\t// https://github.com/tc39/proposal-shadowrealm/pull/384#issuecomment-1364264229\n\t\tvar errorProto = getProto(getProto(e));\n\t\tINTRINSICS['%Error.prototype%'] = errorProto;\n\t}\n}\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen && getProto) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t__proto__: null,\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = require('function-bind');\nvar hasOwn = require('hasown');\nvar $concat = bind.call($call, Array.prototype.concat);\nvar $spliceApply = bind.call($apply, Array.prototype.splice);\nvar $replace = bind.call($call, String.prototype.replace);\nvar $strSlice = bind.call($call, String.prototype.slice);\nvar $exec = bind.call($call, RegExp.prototype.exec);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError('intrinsic ' + name + ' does not exist!');\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tif ($exec(/^%?[^%]*%?$/, name) === null) {\n\t\tthrow new $SyntaxError('`%` may not be present anywhere but at the beginning and end of the intrinsic name');\n\t}\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined;\n\t\t\t}\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","'use strict';\n\n/** @type {import('.')} */\nvar $defineProperty = Object.defineProperty || false;\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = false;\n\t}\n}\n\nmodule.exports = $defineProperty;\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '')\n\t\t\t.trim()\n\t\t\t.replace(/\\s+/g, ',')\n\t\t\t.split(',')\n\t\t\t.filter(Boolean);\n\n\t\tfor (const ns of split) {\n\t\t\tif (ns[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(ns.slice(1));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(ns);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks if the given string matches a namespace template, honoring\n\t * asterisks as wildcards.\n\t *\n\t * @param {String} search\n\t * @param {String} template\n\t * @return {Boolean}\n\t */\n\tfunction matchesTemplate(search, template) {\n\t\tlet searchIndex = 0;\n\t\tlet templateIndex = 0;\n\t\tlet starIndex = -1;\n\t\tlet matchIndex = 0;\n\n\t\twhile (searchIndex < search.length) {\n\t\t\tif (templateIndex < template.length && (template[templateIndex] === search[searchIndex] || template[templateIndex] === '*')) {\n\t\t\t\t// Match character or proceed with wildcard\n\t\t\t\tif (template[templateIndex] === '*') {\n\t\t\t\t\tstarIndex = templateIndex;\n\t\t\t\t\tmatchIndex = searchIndex;\n\t\t\t\t\ttemplateIndex++; // Skip the '*'\n\t\t\t\t} else {\n\t\t\t\t\tsearchIndex++;\n\t\t\t\t\ttemplateIndex++;\n\t\t\t\t}\n\t\t\t} else if (starIndex !== -1) { // eslint-disable-line no-negated-condition\n\t\t\t\t// Backtrack to the last '*' and try to match more characters\n\t\t\t\ttemplateIndex = starIndex + 1;\n\t\t\t\tmatchIndex++;\n\t\t\t\tsearchIndex = matchIndex;\n\t\t\t} else {\n\t\t\t\treturn false; // No match\n\t\t\t}\n\t\t}\n\n\t\t// Handle trailing '*' in template\n\t\twhile (templateIndex < template.length && template[templateIndex] === '*') {\n\t\t\ttemplateIndex++;\n\t\t}\n\n\t\treturn templateIndex === template.length;\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names,\n\t\t\t...createDebug.skips.map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tfor (const skip of createDebug.skips) {\n\t\t\tif (matchesTemplate(name, skip)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (const ns of createDebug.names) {\n\t\t\tif (matchesTemplate(name, ns)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","'use strict';\n\nvar CombinedStream = require('combined-stream');\nvar util = require('util');\nvar path = require('path');\nvar http = require('http');\nvar https = require('https');\nvar parseUrl = require('url').parse;\nvar fs = require('fs');\nvar Stream = require('stream').Stream;\nvar crypto = require('crypto');\nvar mime = require('mime-types');\nvar asynckit = require('asynckit');\nvar setToStringTag = require('es-set-tostringtag');\nvar hasOwn = require('hasown');\nvar populate = require('./populate.js');\n\n/**\n * Create readable \"multipart/form-data\" streams.\n * Can be used to submit forms\n * and file uploads to other web applications.\n *\n * @constructor\n * @param {object} options - Properties to be added/overriden for FormData and CombinedStream\n */\nfunction FormData(options) {\n  if (!(this instanceof FormData)) {\n    return new FormData(options);\n  }\n\n  this._overheadLength = 0;\n  this._valueLength = 0;\n  this._valuesToMeasure = [];\n\n  CombinedStream.call(this);\n\n  options = options || {}; // eslint-disable-line no-param-reassign\n  for (var option in options) { // eslint-disable-line no-restricted-syntax\n    this[option] = options[option];\n  }\n}\n\n// make it a Stream\nutil.inherits(FormData, CombinedStream);\n\nFormData.LINE_BREAK = '\\r\\n';\nFormData.DEFAULT_CONTENT_TYPE = 'application/octet-stream';\n\nFormData.prototype.append = function (field, value, options) {\n  options = options || {}; // eslint-disable-line no-param-reassign\n\n  // allow filename as single option\n  if (typeof options === 'string') {\n    options = { filename: options }; // eslint-disable-line no-param-reassign\n  }\n\n  var append = CombinedStream.prototype.append.bind(this);\n\n  // all that streamy business can't handle numbers\n  if (typeof value === 'number' || value == null) {\n    value = String(value); // eslint-disable-line no-param-reassign\n  }\n\n  // https://github.com/felixge/node-form-data/issues/38\n  if (Array.isArray(value)) {\n    /*\n     * Please convert your array into string\n     * the way web server expects it\n     */\n    this._error(new Error('Arrays are not supported.'));\n    return;\n  }\n\n  var header = this._multiPartHeader(field, value, options);\n  var footer = this._multiPartFooter();\n\n  append(header);\n  append(value);\n  append(footer);\n\n  // pass along options.knownLength\n  this._trackLength(header, value, options);\n};\n\nFormData.prototype._trackLength = function (header, value, options) {\n  var valueLength = 0;\n\n  /*\n   * used w/ getLengthSync(), when length is known.\n   * e.g. for streaming directly from a remote server,\n   * w/ a known file a size, and not wanting to wait for\n   * incoming file to finish to get its size.\n   */\n  if (options.knownLength != null) {\n    valueLength += Number(options.knownLength);\n  } else if (Buffer.isBuffer(value)) {\n    valueLength = value.length;\n  } else if (typeof value === 'string') {\n    valueLength = Buffer.byteLength(value);\n  }\n\n  this._valueLength += valueLength;\n\n  // @check why add CRLF? does this account for custom/multiple CRLFs?\n  this._overheadLength += Buffer.byteLength(header) + FormData.LINE_BREAK.length;\n\n  // empty or either doesn't have path or not an http response or not a stream\n  if (!value || (!value.path && !(value.readable && hasOwn(value, 'httpVersion')) && !(value instanceof Stream))) {\n    return;\n  }\n\n  // no need to bother with the length\n  if (!options.knownLength) {\n    this._valuesToMeasure.push(value);\n  }\n};\n\nFormData.prototype._lengthRetriever = function (value, callback) {\n  if (hasOwn(value, 'fd')) {\n    // take read range into a account\n    // `end` = Infinity > read file till the end\n    //\n    // TODO: Looks like there is bug in Node fs.createReadStream\n    // it doesn't respect `end` options without `start` options\n    // Fix it when node fixes it.\n    // https://github.com/joyent/node/issues/7819\n    if (value.end != undefined && value.end != Infinity && value.start != undefined) {\n      // when end specified\n      // no need to calculate range\n      // inclusive, starts with 0\n      callback(null, value.end + 1 - (value.start ? value.start : 0)); // eslint-disable-line callback-return\n\n      // not that fast snoopy\n    } else {\n      // still need to fetch file size from fs\n      fs.stat(value.path, function (err, stat) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        // update final size based on the range options\n        var fileSize = stat.size - (value.start ? value.start : 0);\n        callback(null, fileSize);\n      });\n    }\n\n    // or http response\n  } else if (hasOwn(value, 'httpVersion')) {\n    callback(null, Number(value.headers['content-length'])); // eslint-disable-line callback-return\n\n    // or request stream http://github.com/mikeal/request\n  } else if (hasOwn(value, 'httpModule')) {\n    // wait till response come back\n    value.on('response', function (response) {\n      value.pause();\n      callback(null, Number(response.headers['content-length']));\n    });\n    value.resume();\n\n    // something else\n  } else {\n    callback('Unknown stream'); // eslint-disable-line callback-return\n  }\n};\n\nFormData.prototype._multiPartHeader = function (field, value, options) {\n  /*\n   * custom header specified (as string)?\n   * it becomes responsible for boundary\n   * (e.g. to handle extra CRLFs on .NET servers)\n   */\n  if (typeof options.header === 'string') {\n    return options.header;\n  }\n\n  var contentDisposition = this._getContentDisposition(value, options);\n  var contentType = this._getContentType(value, options);\n\n  var contents = '';\n  var headers = {\n    // add custom disposition as third element or keep it two elements if not\n    'Content-Disposition': ['form-data', 'name=\"' + field + '\"'].concat(contentDisposition || []),\n    // if no content type. allow it to be empty array\n    'Content-Type': [].concat(contentType || [])\n  };\n\n  // allow custom headers.\n  if (typeof options.header === 'object') {\n    populate(headers, options.header);\n  }\n\n  var header;\n  for (var prop in headers) { // eslint-disable-line no-restricted-syntax\n    if (hasOwn(headers, prop)) {\n      header = headers[prop];\n\n      // skip nullish headers.\n      if (header == null) {\n        continue; // eslint-disable-line no-restricted-syntax, no-continue\n      }\n\n      // convert all headers to arrays.\n      if (!Array.isArray(header)) {\n        header = [header];\n      }\n\n      // add non-empty headers.\n      if (header.length) {\n        contents += prop + ': ' + header.join('; ') + FormData.LINE_BREAK;\n      }\n    }\n  }\n\n  return '--' + this.getBoundary() + FormData.LINE_BREAK + contents + FormData.LINE_BREAK;\n};\n\nFormData.prototype._getContentDisposition = function (value, options) { // eslint-disable-line consistent-return\n  var filename;\n\n  if (typeof options.filepath === 'string') {\n    // custom filepath for relative paths\n    filename = path.normalize(options.filepath).replace(/\\\\/g, '/');\n  } else if (options.filename || (value && (value.name || value.path))) {\n    /*\n     * custom filename take precedence\n     * formidable and the browser add a name property\n     * fs- and request- streams have path property\n     */\n    filename = path.basename(options.filename || (value && (value.name || value.path)));\n  } else if (value && value.readable && hasOwn(value, 'httpVersion')) {\n    // or try http response\n    filename = path.basename(value.client._httpMessage.path || '');\n  }\n\n  if (filename) {\n    return 'filename=\"' + filename + '\"';\n  }\n};\n\nFormData.prototype._getContentType = function (value, options) {\n  // use custom content-type above all\n  var contentType = options.contentType;\n\n  // or try `name` from formidable, browser\n  if (!contentType && value && value.name) {\n    contentType = mime.lookup(value.name);\n  }\n\n  // or try `path` from fs-, request- streams\n  if (!contentType && value && value.path) {\n    contentType = mime.lookup(value.path);\n  }\n\n  // or if it's http-reponse\n  if (!contentType && value && value.readable && hasOwn(value, 'httpVersion')) {\n    contentType = value.headers['content-type'];\n  }\n\n  // or guess it from the filepath or filename\n  if (!contentType && (options.filepath || options.filename)) {\n    contentType = mime.lookup(options.filepath || options.filename);\n  }\n\n  // fallback to the default content type if `value` is not simple value\n  if (!contentType && value && typeof value === 'object') {\n    contentType = FormData.DEFAULT_CONTENT_TYPE;\n  }\n\n  return contentType;\n};\n\nFormData.prototype._multiPartFooter = function () {\n  return function (next) {\n    var footer = FormData.LINE_BREAK;\n\n    var lastPart = this._streams.length === 0;\n    if (lastPart) {\n      footer += this._lastBoundary();\n    }\n\n    next(footer);\n  }.bind(this);\n};\n\nFormData.prototype._lastBoundary = function () {\n  return '--' + this.getBoundary() + '--' + FormData.LINE_BREAK;\n};\n\nFormData.prototype.getHeaders = function (userHeaders) {\n  var header;\n  var formHeaders = {\n    'content-type': 'multipart/form-data; boundary=' + this.getBoundary()\n  };\n\n  for (header in userHeaders) { // eslint-disable-line no-restricted-syntax\n    if (hasOwn(userHeaders, header)) {\n      formHeaders[header.toLowerCase()] = userHeaders[header];\n    }\n  }\n\n  return formHeaders;\n};\n\nFormData.prototype.setBoundary = function (boundary) {\n  if (typeof boundary !== 'string') {\n    throw new TypeError('FormData boundary must be a string');\n  }\n  this._boundary = boundary;\n};\n\nFormData.prototype.getBoundary = function () {\n  if (!this._boundary) {\n    this._generateBoundary();\n  }\n\n  return this._boundary;\n};\n\nFormData.prototype.getBuffer = function () {\n  var dataBuffer = new Buffer.alloc(0); // eslint-disable-line new-cap\n  var boundary = this.getBoundary();\n\n  // Create the form content. Add Line breaks to the end of data.\n  for (var i = 0, len = this._streams.length; i < len; i++) {\n    if (typeof this._streams[i] !== 'function') {\n      // Add content to the buffer.\n      if (Buffer.isBuffer(this._streams[i])) {\n        dataBuffer = Buffer.concat([dataBuffer, this._streams[i]]);\n      } else {\n        dataBuffer = Buffer.concat([dataBuffer, Buffer.from(this._streams[i])]);\n      }\n\n      // Add break after content.\n      if (typeof this._streams[i] !== 'string' || this._streams[i].substring(2, boundary.length + 2) !== boundary) {\n        dataBuffer = Buffer.concat([dataBuffer, Buffer.from(FormData.LINE_BREAK)]);\n      }\n    }\n  }\n\n  // Add the footer and return the Buffer object.\n  return Buffer.concat([dataBuffer, Buffer.from(this._lastBoundary())]);\n};\n\nFormData.prototype._generateBoundary = function () {\n  // This generates a 50 character boundary similar to those used by Firefox.\n\n  // They are optimized for boyer-moore parsing.\n  this._boundary = '--------------------------' + crypto.randomBytes(12).toString('hex');\n};\n\n// Note: getLengthSync DOESN'T calculate streams length\n// As workaround one can calculate file size manually and add it as knownLength option\nFormData.prototype.getLengthSync = function () {\n  var knownLength = this._overheadLength + this._valueLength;\n\n  // Don't get confused, there are 3 \"internal\" streams for each keyval pair so it basically checks if there is any value added to the form\n  if (this._streams.length) {\n    knownLength += this._lastBoundary().length;\n  }\n\n  // https://github.com/form-data/form-data/issues/40\n  if (!this.hasKnownLength()) {\n    /*\n     * Some async length retrievers are present\n     * therefore synchronous length calculation is false.\n     * Please use getLength(callback) to get proper length\n     */\n    this._error(new Error('Cannot calculate proper length in synchronous way.'));\n  }\n\n  return knownLength;\n};\n\n// Public API to check if length of added values is known\n// https://github.com/form-data/form-data/issues/196\n// https://github.com/form-data/form-data/issues/262\nFormData.prototype.hasKnownLength = function () {\n  var hasKnownLength = true;\n\n  if (this._valuesToMeasure.length) {\n    hasKnownLength = false;\n  }\n\n  return hasKnownLength;\n};\n\nFormData.prototype.getLength = function (cb) {\n  var knownLength = this._overheadLength + this._valueLength;\n\n  if (this._streams.length) {\n    knownLength += this._lastBoundary().length;\n  }\n\n  if (!this._valuesToMeasure.length) {\n    process.nextTick(cb.bind(this, null, knownLength));\n    return;\n  }\n\n  asynckit.parallel(this._valuesToMeasure, this._lengthRetriever, function (err, values) {\n    if (err) {\n      cb(err);\n      return;\n    }\n\n    values.forEach(function (length) {\n      knownLength += length;\n    });\n\n    cb(null, knownLength);\n  });\n};\n\nFormData.prototype.submit = function (params, cb) {\n  var request;\n  var options;\n  var defaults = { method: 'post' };\n\n  // parse provided url if it's string or treat it as options object\n  if (typeof params === 'string') {\n    params = parseUrl(params); // eslint-disable-line no-param-reassign\n    /* eslint sort-keys: 0 */\n    options = populate({\n      port: params.port,\n      path: params.pathname,\n      host: params.hostname,\n      protocol: params.protocol\n    }, defaults);\n  } else { // use custom params\n    options = populate(params, defaults);\n    // if no port provided use default one\n    if (!options.port) {\n      options.port = options.protocol === 'https:' ? 443 : 80;\n    }\n  }\n\n  // put that good code in getHeaders to some use\n  options.headers = this.getHeaders(params.headers);\n\n  // https if specified, fallback to http in any other case\n  if (options.protocol === 'https:') {\n    request = https.request(options);\n  } else {\n    request = http.request(options);\n  }\n\n  // get content length and fire away\n  this.getLength(function (err, length) {\n    if (err && err !== 'Unknown stream') {\n      this._error(err);\n      return;\n    }\n\n    // add content length\n    if (length) {\n      request.setHeader('Content-Length', length);\n    }\n\n    this.pipe(request);\n    if (cb) {\n      var onResponse;\n\n      var callback = function (error, responce) {\n        request.removeListener('error', callback);\n        request.removeListener('response', onResponse);\n\n        return cb.call(this, error, responce);\n      };\n\n      onResponse = callback.bind(this, null);\n\n      request.on('error', callback);\n      request.on('response', onResponse);\n    }\n  }.bind(this));\n\n  return request;\n};\n\nFormData.prototype._error = function (err) {\n  if (!this.error) {\n    this.error = err;\n    this.pause();\n    this.emit('error', err);\n  }\n};\n\nFormData.prototype.toString = function () {\n  return '[object FormData]';\n};\nsetToStringTag(FormData.prototype, 'FormData');\n\n// Public API\nmodule.exports = FormData;\n","var util = require('util');\nvar Stream = require('stream').Stream;\nvar DelayedStream = require('delayed-stream');\n\nmodule.exports = CombinedStream;\nfunction CombinedStream() {\n  this.writable = false;\n  this.readable = true;\n  this.dataSize = 0;\n  this.maxDataSize = 2 * 1024 * 1024;\n  this.pauseStreams = true;\n\n  this._released = false;\n  this._streams = [];\n  this._currentStream = null;\n  this._insideLoop = false;\n  this._pendingNext = false;\n}\nutil.inherits(CombinedStream, Stream);\n\nCombinedStream.create = function(options) {\n  var combinedStream = new this();\n\n  options = options || {};\n  for (var option in options) {\n    combinedStream[option] = options[option];\n  }\n\n  return combinedStream;\n};\n\nCombinedStream.isStreamLike = function(stream) {\n  return (typeof stream !== 'function')\n    && (typeof stream !== 'string')\n    && (typeof stream !== 'boolean')\n    && (typeof stream !== 'number')\n    && (!Buffer.isBuffer(stream));\n};\n\nCombinedStream.prototype.append = function(stream) {\n  var isStreamLike = CombinedStream.isStreamLike(stream);\n\n  if (isStreamLike) {\n    if (!(stream instanceof DelayedStream)) {\n      var newStream = DelayedStream.create(stream, {\n        maxDataSize: Infinity,\n        pauseStream: this.pauseStreams,\n      });\n      stream.on('data', this._checkDataSize.bind(this));\n      stream = newStream;\n    }\n\n    this._handleErrors(stream);\n\n    if (this.pauseStreams) {\n      stream.pause();\n    }\n  }\n\n  this._streams.push(stream);\n  return this;\n};\n\nCombinedStream.prototype.pipe = function(dest, options) {\n  Stream.prototype.pipe.call(this, dest, options);\n  this.resume();\n  return dest;\n};\n\nCombinedStream.prototype._getNext = function() {\n  this._currentStream = null;\n\n  if (this._insideLoop) {\n    this._pendingNext = true;\n    return; // defer call\n  }\n\n  this._insideLoop = true;\n  try {\n    do {\n      this._pendingNext = false;\n      this._realGetNext();\n    } while (this._pendingNext);\n  } finally {\n    this._insideLoop = false;\n  }\n};\n\nCombinedStream.prototype._realGetNext = function() {\n  var stream = this._streams.shift();\n\n\n  if (typeof stream == 'undefined') {\n    this.end();\n    return;\n  }\n\n  if (typeof stream !== 'function') {\n    this._pipeNext(stream);\n    return;\n  }\n\n  var getStream = stream;\n  getStream(function(stream) {\n    var isStreamLike = CombinedStream.isStreamLike(stream);\n    if (isStreamLike) {\n      stream.on('data', this._checkDataSize.bind(this));\n      this._handleErrors(stream);\n    }\n\n    this._pipeNext(stream);\n  }.bind(this));\n};\n\nCombinedStream.prototype._pipeNext = function(stream) {\n  this._currentStream = stream;\n\n  var isStreamLike = CombinedStream.isStreamLike(stream);\n  if (isStreamLike) {\n    stream.on('end', this._getNext.bind(this));\n    stream.pipe(this, {end: false});\n    return;\n  }\n\n  var value = stream;\n  this.write(value);\n  this._getNext();\n};\n\nCombinedStream.prototype._handleErrors = function(stream) {\n  var self = this;\n  stream.on('error', function(err) {\n    self._emitError(err);\n  });\n};\n\nCombinedStream.prototype.write = function(data) {\n  this.emit('data', data);\n};\n\nCombinedStream.prototype.pause = function() {\n  if (!this.pauseStreams) {\n    return;\n  }\n\n  if(this.pauseStreams && this._currentStream && typeof(this._currentStream.pause) == 'function') this._currentStream.pause();\n  this.emit('pause');\n};\n\nCombinedStream.prototype.resume = function() {\n  if (!this._released) {\n    this._released = true;\n    this.writable = true;\n    this._getNext();\n  }\n\n  if(this.pauseStreams && this._currentStream && typeof(this._currentStream.resume) == 'function') this._currentStream.resume();\n  this.emit('resume');\n};\n\nCombinedStream.prototype.end = function() {\n  this._reset();\n  this.emit('end');\n};\n\nCombinedStream.prototype.destroy = function() {\n  this._reset();\n  this.emit('close');\n};\n\nCombinedStream.prototype._reset = function() {\n  this.writable = false;\n  this._streams = [];\n  this._currentStream = null;\n};\n\nCombinedStream.prototype._checkDataSize = function() {\n  this._updateDataSize();\n  if (this.dataSize <= this.maxDataSize) {\n    return;\n  }\n\n  var message =\n    'DelayedStream#maxDataSize of ' + this.maxDataSize + ' bytes exceeded.';\n  this._emitError(new Error(message));\n};\n\nCombinedStream.prototype._updateDataSize = function() {\n  this.dataSize = 0;\n\n  var self = this;\n  this._streams.forEach(function(stream) {\n    if (!stream.dataSize) {\n      return;\n    }\n\n    self.dataSize += stream.dataSize;\n  });\n\n  if (this._currentStream && this._currentStream.dataSize) {\n    this.dataSize += this._currentStream.dataSize;\n  }\n};\n\nCombinedStream.prototype._emitError = function(err) {\n  this._reset();\n  this.emit('error', err);\n};\n","module.exports = require(\"os\");","'use strict';\n\n/** @type {import('./functionApply')} */\nmodule.exports = Function.prototype.apply;\n","'use strict';\n\nvar $Object = require('es-object-atoms');\n\n/** @type {import('./Object.getPrototypeOf')} */\nmodule.exports = $Object.getPrototypeOf || null;\n","import * as vscode from 'vscode';\r\nimport { AuraApiService, Workflow, WorkflowStep } from '../services/auraApiService';\r\n\r\nexport class WorkflowPanelProvider {\r\n    private panels: Map<string, vscode.WebviewPanel> = new Map();\r\n    private newWorkflowPanel: vscode.WebviewPanel | undefined;\r\n\r\n    constructor(\r\n        private extensionUri: vscode.Uri,\r\n        private apiService: AuraApiService\r\n    ) {}\r\n\r\n    /**\r\n     * Opens a panel to create a new workflow with a form UI\r\n     */\r\n    async openNewWorkflowPanel(onCreated: (workflowId: string) => void): Promise<void> {\r\n        // Reuse existing panel if open\r\n        if (this.newWorkflowPanel) {\r\n            this.newWorkflowPanel.reveal();\r\n            return;\r\n        }\r\n\r\n        const workspacePath = vscode.workspace.workspaceFolders?.[0]?.uri.fsPath;\r\n\r\n        // Create new panel\r\n        const panel = vscode.window.createWebviewPanel(\r\n            'auraNewWorkflow',\r\n            ' New Workflow',\r\n            vscode.ViewColumn.One,\r\n            {\r\n                enableScripts: true,\r\n                retainContextWhenHidden: false,\r\n                localResourceRoots: [this.extensionUri]\r\n            }\r\n        );\r\n\r\n        this.newWorkflowPanel = panel;\r\n\r\n        // Handle panel disposal\r\n        panel.onDidDispose(() => {\r\n            this.newWorkflowPanel = undefined;\r\n        });\r\n\r\n        // Handle messages from webview\r\n        panel.webview.onDidReceiveMessage(async (message) => {\r\n            switch (message.type) {\r\n                case 'create':\r\n                    await this.handleCreateWorkflow(message.title, message.description, workspacePath, panel, onCreated);\r\n                    break;\r\n                case 'cancel':\r\n                    panel.dispose();\r\n                    break;\r\n            }\r\n        });\r\n\r\n        // Set initial content\r\n        panel.webview.html = this.getNewWorkflowHtml(workspacePath);\r\n    }\r\n\r\n    private async handleCreateWorkflow(\r\n        title: string,\r\n        description: string | undefined,\r\n        workspacePath: string | undefined,\r\n        panel: vscode.WebviewPanel,\r\n        onCreated: (workflowId: string) => void\r\n    ): Promise<void> {\r\n        panel.webview.postMessage({ type: 'loading', message: 'Creating workflow...' });\r\n\r\n        try {\r\n            const workflow = await this.apiService.createWorkflow(title, description, workspacePath);\r\n\r\n            // Close the creation panel\r\n            panel.dispose();\r\n\r\n            // Notify caller\r\n            onCreated(workflow.id);\r\n\r\n            // Auto-open worktree in new VS Code window if available\r\n            if (workflow.worktreePath) {\r\n                const openNow = await vscode.window.showInformationMessage(\r\n                    `Story created! Branch: ${workflow.gitBranch || 'N/A'}`,\r\n                    'Open in New Window',\r\n                    'Stay Here'\r\n                );\r\n                if (openNow === 'Open in New Window') {\r\n                    await vscode.commands.executeCommand(\r\n                        'vscode.openFolder',\r\n                        vscode.Uri.file(workflow.worktreePath),\r\n                        { forceNewWindow: true }\r\n                    );\r\n                }\r\n            } else {\r\n                vscode.window.showInformationMessage(\r\n                    `Workflow created! Branch: ${workflow.gitBranch || 'N/A'}`\r\n                );\r\n            }\r\n        } catch (error) {\r\n            const message = error instanceof Error ? error.message : 'Unknown error';\r\n            panel.webview.postMessage({ type: 'error', message: `Failed to create workflow: ${message}` });\r\n        }\r\n    }\r\n\r\n    private getNewWorkflowHtml(workspacePath: string | undefined): string {\r\n        const repoName = workspacePath ? workspacePath.split(/[/\\\\]/).pop() || 'repo' : 'repo';\r\n\r\n        return `<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>New Workflow</title>\r\n    <style>\r\n        :root {\r\n            --vscode-font-family: var(--vscode-editor-font-family, 'Segoe UI', sans-serif);\r\n        }\r\n        body {\r\n            font-family: var(--vscode-font-family);\r\n            padding: 24px;\r\n            color: var(--vscode-foreground);\r\n            background: var(--vscode-editor-background);\r\n            line-height: 1.5;\r\n            max-width: 600px;\r\n            margin: 0 auto;\r\n        }\r\n        .header {\r\n            margin-bottom: 24px;\r\n            text-align: center;\r\n        }\r\n        .header h1 {\r\n            font-size: 1.5em;\r\n            margin: 0 0 8px 0;\r\n        }\r\n        .header p {\r\n            color: var(--vscode-descriptionForeground);\r\n            margin: 0;\r\n        }\r\n        .form-group {\r\n            margin-bottom: 20px;\r\n        }\r\n        .form-group label {\r\n            display: block;\r\n            margin-bottom: 6px;\r\n            font-weight: 500;\r\n        }\r\n        .form-group .hint {\r\n            font-size: 0.85em;\r\n            color: var(--vscode-descriptionForeground);\r\n            margin-top: 4px;\r\n        }\r\n        input, textarea {\r\n            width: 100%;\r\n            padding: 10px 12px;\r\n            border: 1px solid var(--vscode-input-border);\r\n            border-radius: 4px;\r\n            background: var(--vscode-input-background);\r\n            color: var(--vscode-input-foreground);\r\n            font-size: 14px;\r\n            font-family: inherit;\r\n            box-sizing: border-box;\r\n        }\r\n        input:focus, textarea:focus {\r\n            outline: 1px solid var(--vscode-focusBorder);\r\n        }\r\n        textarea {\r\n            min-height: 100px;\r\n            resize: vertical;\r\n        }\r\n        .preview-box {\r\n            background: var(--vscode-textBlockQuote-background);\r\n            border-left: 3px solid var(--vscode-textBlockQuote-border);\r\n            padding: 12px 16px;\r\n            border-radius: 4px;\r\n            margin-bottom: 24px;\r\n        }\r\n        .preview-box h4 {\r\n            margin: 0 0 8px 0;\r\n            font-size: 0.9em;\r\n            color: var(--vscode-descriptionForeground);\r\n        }\r\n        .preview-item {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 8px;\r\n            margin: 4px 0;\r\n            font-size: 0.95em;\r\n        }\r\n        .preview-item .icon {\r\n            opacity: 0.8;\r\n        }\r\n        .preview-item .label {\r\n            color: var(--vscode-descriptionForeground);\r\n            min-width: 80px;\r\n        }\r\n        .preview-item .value {\r\n            font-family: var(--vscode-editor-font-family);\r\n            color: var(--vscode-foreground);\r\n        }\r\n        .button-row {\r\n            display: flex;\r\n            gap: 12px;\r\n            justify-content: flex-end;\r\n            margin-top: 24px;\r\n        }\r\n        .btn {\r\n            padding: 10px 20px;\r\n            border: none;\r\n            border-radius: 4px;\r\n            cursor: pointer;\r\n            font-size: 14px;\r\n            font-weight: 500;\r\n            display: inline-flex;\r\n            align-items: center;\r\n            gap: 8px;\r\n        }\r\n        .btn:disabled {\r\n            opacity: 0.5;\r\n            cursor: not-allowed;\r\n        }\r\n        .btn-primary {\r\n            background: var(--vscode-button-background);\r\n            color: var(--vscode-button-foreground);\r\n        }\r\n        .btn-primary:hover:not(:disabled) {\r\n            background: var(--vscode-button-hoverBackground);\r\n        }\r\n        .btn-secondary {\r\n            background: var(--vscode-button-secondaryBackground);\r\n            color: var(--vscode-button-secondaryForeground);\r\n        }\r\n        .btn-info {\r\n            background: #0e639c;\r\n            color: white;\r\n            border: 1px solid #1177bb;\r\n        }\r\n        .btn-info:hover {\r\n            background: #1177bb;\r\n        }\r\n        .loading {\r\n            display: none;\r\n            align-items: center;\r\n            justify-content: center;\r\n            gap: 12px;\r\n            padding: 20px;\r\n            color: var(--vscode-foreground);\r\n        }\r\n        .loading.active {\r\n            display: flex;\r\n        }\r\n        .spinner {\r\n            width: 20px;\r\n            height: 20px;\r\n            border: 2px solid var(--vscode-badge-background);\r\n            border-top-color: transparent;\r\n            border-radius: 50%;\r\n            animation: spin 1s linear infinite;\r\n        }\r\n        @keyframes spin {\r\n            to { transform: rotate(360deg); }\r\n        }\r\n        .error-message {\r\n            display: none;\r\n            background: var(--vscode-inputValidation-errorBackground);\r\n            border: 1px solid var(--vscode-inputValidation-errorBorder);\r\n            color: var(--vscode-inputValidation-errorForeground);\r\n            padding: 12px 16px;\r\n            border-radius: 4px;\r\n            margin-top: 16px;\r\n        }\r\n        .error-message.active {\r\n            display: block;\r\n        }\r\n        .form-content.hidden {\r\n            display: none;\r\n        }\r\n        .workspace-info {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 8px;\r\n            padding: 8px 12px;\r\n            background: var(--vscode-editor-inactiveSelectionBackground);\r\n            border-radius: 4px;\r\n            margin-bottom: 20px;\r\n            font-size: 0.9em;\r\n        }\r\n        .workspace-info .icon {\r\n            opacity: 0.8;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"header\">\r\n        <h1> Create New Workflow</h1>\r\n        <p>Describe what you want to build or fix</p>\r\n    </div>\r\n\r\n    <div id=\"formContent\" class=\"form-content\">\r\n        ${workspacePath ? `\r\n        <div class=\"workspace-info\">\r\n            <span class=\"icon\"></span>\r\n            <span>Repository: <strong>${this.escapeHtml(repoName)}</strong></span>\r\n        </div>\r\n        ` : `\r\n        <div class=\"workspace-info\" style=\"border-left: 3px solid var(--vscode-editorWarning-foreground);\">\r\n            <span class=\"icon\"></span>\r\n            <span>No workspace folder open. Open a repository folder first.</span>\r\n        </div>\r\n        `}\r\n\r\n        <div class=\"form-group\">\r\n            <label for=\"title\">What do you want to build?</label>\r\n            <input type=\"text\" id=\"title\" placeholder=\"e.g., Add user authentication\" autofocus>\r\n            <div class=\"hint\">A short, descriptive title for this workflow</div>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label for=\"description\">Describe the requirements (optional)</label>\r\n            <textarea id=\"description\" placeholder=\"Add more details about the feature, bug, or task...\"></textarea>\r\n            <div class=\"hint\">The more context you provide, the better the AI can help</div>\r\n        </div>\r\n\r\n        <div class=\"preview-box\">\r\n            <h4>Preview</h4>\r\n            <div class=\"preview-item\">\r\n                <span class=\"icon\"></span>\r\n                <span class=\"label\">Branch:</span>\r\n                <span class=\"value\" id=\"branchPreview\">aura/workflow-...</span>\r\n            </div>\r\n            <div class=\"preview-item\">\r\n                <span class=\"icon\"></span>\r\n                <span class=\"label\">Worktree:</span>\r\n                <span class=\"value\" id=\"worktreePreview\">Auto-generated in .worktrees/</span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"button-row\">\r\n            <button class=\"btn btn-secondary\" onclick=\"cancel()\">Cancel</button>\r\n            <button class=\"btn btn-primary\" id=\"createBtn\" onclick=\"create()\" ${workspacePath ? '' : 'disabled'}>\r\n                 Create Workflow\r\n            </button>\r\n        </div>\r\n\r\n        <div id=\"errorMessage\" class=\"error-message\"></div>\r\n    </div>\r\n\r\n    <div id=\"loadingState\" class=\"loading\">\r\n        <div class=\"spinner\"></div>\r\n        <span id=\"loadingText\">Creating workflow...</span>\r\n    </div>\r\n\r\n    <script>\r\n        const vscode = acquireVsCodeApi();\r\n\r\n        // Update branch preview as user types\r\n        const titleInput = document.getElementById('title');\r\n        const branchPreview = document.getElementById('branchPreview');\r\n\r\n        titleInput.addEventListener('input', () => {\r\n            const title = titleInput.value.trim();\r\n            if (title) {\r\n                const slug = title\r\n                    .toLowerCase()\r\n                    .replace(/[^a-z0-9]+/g, '-')\r\n                    .replace(/^-+|-+$/g, '')\r\n                    .substring(0, 30);\r\n                branchPreview.textContent = slug + '-...';\r\n            } else {\r\n                branchPreview.textContent = '<prefix>/<title>-<id>';\r\n            }\r\n        });\r\n\r\n        // Enter key submits\r\n        titleInput.addEventListener('keypress', (e) => {\r\n            if (e.key === 'Enter' && titleInput.value.trim()) {\r\n                create();\r\n            }\r\n        });\r\n\r\n        function create() {\r\n            const title = document.getElementById('title').value.trim();\r\n            const description = document.getElementById('description').value.trim();\r\n\r\n            if (!title) {\r\n                showError('Please enter a title');\r\n                return;\r\n            }\r\n\r\n            vscode.postMessage({\r\n                type: 'create',\r\n                title: title,\r\n                description: description || undefined\r\n            });\r\n        }\r\n\r\n        function cancel() {\r\n            vscode.postMessage({ type: 'cancel' });\r\n        }\r\n\r\n        function showError(message) {\r\n            const errorEl = document.getElementById('errorMessage');\r\n            errorEl.textContent = message;\r\n            errorEl.classList.add('active');\r\n        }\r\n\r\n        window.addEventListener('message', (event) => {\r\n            const message = event.data;\r\n\r\n            switch (message.type) {\r\n                case 'loading':\r\n                    document.getElementById('formContent').classList.add('hidden');\r\n                    document.getElementById('loadingState').classList.add('active');\r\n                    document.getElementById('loadingText').textContent = message.message || 'Creating workflow...';\r\n                    break;\r\n                case 'error':\r\n                    document.getElementById('formContent').classList.remove('hidden');\r\n                    document.getElementById('loadingState').classList.remove('active');\r\n                    showError(message.message);\r\n                    break;\r\n            }\r\n        });\r\n    </script>\r\n</body>\r\n</html>`;\r\n    }\r\n\r\n    async openWorkflowPanel(workflowId: string): Promise<void> {\r\n        const startTime = Date.now();\r\n        console.log(`[WorkflowPanel] Opening panel for ${workflowId}`);\r\n        \r\n        // Check if panel already exists\r\n        const existingPanel = this.panels.get(workflowId);\r\n        if (existingPanel) {\r\n            console.log(`[WorkflowPanel] Revealing existing panel (+${Date.now() - startTime}ms)`);\r\n            existingPanel.reveal();\r\n            await this.refreshPanel(workflowId);\r\n            return;\r\n        }\r\n\r\n        // Fetch workflow data\r\n        let workflow: Workflow;\r\n        try {\r\n            console.log(`[WorkflowPanel] Fetching workflow data... (+${Date.now() - startTime}ms)`);\r\n            workflow = await this.apiService.getWorkflow(workflowId);\r\n            console.log(`[WorkflowPanel] Got workflow data (+${Date.now() - startTime}ms)`);\r\n        } catch (error) {\r\n            vscode.window.showErrorMessage('Failed to load workflow');\r\n            return;\r\n        }\r\n\r\n        // Create new panel\r\n        console.log(`[WorkflowPanel] Creating webview panel... (+${Date.now() - startTime}ms)`);\r\n        const panel = vscode.window.createWebviewPanel(\r\n            'auraWorkflow',\r\n            ` ${workflow.title}`,\r\n            vscode.ViewColumn.One,\r\n            {\r\n                enableScripts: true,\r\n                retainContextWhenHidden: true,\r\n                localResourceRoots: [this.extensionUri]\r\n            }\r\n        );\r\n        console.log(`[WorkflowPanel] Webview panel created (+${Date.now() - startTime}ms)`);\r\n\r\n        this.panels.set(workflowId, panel);\r\n\r\n        // Handle panel disposal\r\n        panel.onDidDispose(() => {\r\n            this.panels.delete(workflowId);\r\n        });\r\n\r\n        // Handle messages from webview\r\n        panel.webview.onDidReceiveMessage(async (message) => {\r\n            await this.handleMessage(workflowId, message, panel);\r\n        });\r\n\r\n        // Set initial content\r\n        console.log(`[WorkflowPanel] Generating HTML... (+${Date.now() - startTime}ms)`);\r\n        const html = this.getHtml(workflow, panel.webview);\r\n        console.log(`[WorkflowPanel] Setting HTML (${html.length} chars)... (+${Date.now() - startTime}ms)`);\r\n        panel.webview.html = html;\r\n        console.log(`[WorkflowPanel] Panel ready (+${Date.now() - startTime}ms)`);\r\n    }\r\n\r\n    private async refreshPanel(workflowId: string): Promise<void> {\r\n        const panel = this.panels.get(workflowId);\r\n        if (!panel) return;\r\n\r\n        try {\r\n            const workflow = await this.apiService.getWorkflow(workflowId);\r\n            // Re-render the entire HTML to update the panel\r\n            panel.webview.html = this.getHtml(workflow, panel.webview);\r\n        } catch (error) {\r\n            console.error('Failed to refresh workflow panel:', error);\r\n        }\r\n    }\r\n\r\n    private async handleMessage(workflowId: string, message: any, panel: vscode.WebviewPanel): Promise<void> {\r\n        switch (message.type) {\r\n            case 'analyze':\r\n            case 'enrich':\r\n                await this.handleEnrich(workflowId, panel);\r\n                break;\r\n            case 'indexCodebase':\r\n                await this.handleIndexCodebase(workflowId, panel);\r\n                break;\r\n            case 'indexAndEnrich':\r\n                await this.handleIndexAndEnrich(workflowId, panel);\r\n                break;\r\n            case 'plan':\r\n                await this.handlePlan(workflowId, panel);\r\n                break;\r\n            case 'executeStep':\r\n                await this.handleExecuteStep(workflowId, message.stepId, panel);\r\n                break;\r\n            case 'executeAllPending':\r\n                await this.handleExecuteAllPending(workflowId, panel);\r\n                break;\r\n            case 'chat':\r\n                await this.handleChat(workflowId, message.text, panel);\r\n                break;\r\n            case 'complete':\r\n                await this.handleComplete(workflowId, panel);\r\n                break;\r\n            case 'cancel':\r\n                await this.handleCancel(workflowId, panel);\r\n                break;\r\n            case 'finalize':\r\n                await this.handleFinalize(workflowId, message, panel);\r\n                break;\r\n            case 'openUrl':\r\n                if (message.url) {\r\n                    vscode.env.openExternal(vscode.Uri.parse(message.url));\r\n                }\r\n                break;\r\n            case 'refresh':\r\n                await this.refreshPanel(workflowId);\r\n                break;\r\n            case 'openWorkspace':\r\n                await this.handleOpenWorkspace(message.worktreePath, message.gitBranch);\r\n                break;\r\n            case 'skipStep':\r\n                await this.handleSkipStep(workflowId, message.stepId, panel);\r\n                break;\r\n            case 'resetStep':\r\n                await this.handleResetStep(workflowId, message.stepId, panel);\r\n                break;\r\n            case 'stepChat':\r\n                await this.handleStepChat(workflowId, message.stepId, message.message, panel);\r\n                break;\r\n            case 'approveStepOutput':\r\n                await this.handleApproveStepOutput(workflowId, message.stepId, panel);\r\n                break;\r\n            case 'rejectStepOutput':\r\n                await this.handleRejectStepOutput(workflowId, message.stepId, message.reason, panel);\r\n                break;\r\n            case 'viewStepContext':\r\n                await this.handleViewStepContext(workflowId, message.stepId, panel);\r\n                break;\r\n            case 'reassignStep':\r\n                await this.handleReassignStep(workflowId, message.stepId, message.agentId, panel);\r\n                break;\r\n            case 'updateStepDescription':\r\n                await this.handleUpdateStepDescription(workflowId, message.stepId, message.description, panel);\r\n                break;\r\n            case 'openFile':\r\n                await this.handleOpenFile(message.filePath, message.worktreePath);\r\n                break;\r\n            case 'openDiff':\r\n                await this.handleOpenDiff(message.filePath, message.worktreePath);\r\n                break;\r\n            case 'getWorktreeChanges':\r\n                await this.handleGetWorktreeChanges(message.worktreePath, panel);\r\n                break;\r\n            case 'openWorktreeInExplorer':\r\n                await this.handleOpenWorktreeInExplorer(message.worktreePath);\r\n                break;\r\n        }\r\n    }\r\n\r\n    private async handleOpenFile(filePath: string, worktreePath?: string): Promise<void> {\r\n        try {\r\n            // Resolve path - if relative, use worktree path\r\n            let fullPath = filePath;\r\n            if (!filePath.match(/^[a-zA-Z]:/) && !filePath.startsWith('/') && worktreePath) {\r\n                fullPath = `${worktreePath}/${filePath}`.replace(/\\\\/g, '/');\r\n            }\r\n            const uri = vscode.Uri.file(fullPath);\r\n            await vscode.window.showTextDocument(uri);\r\n        } catch (error) {\r\n            vscode.window.showErrorMessage(`Failed to open file: ${filePath}`);\r\n        }\r\n    }\r\n\r\n    private async handleOpenDiff(filePath: string, worktreePath?: string): Promise<void> {\r\n        try {\r\n            // Open git diff for the file\r\n            let fullPath = filePath;\r\n            if (!filePath.match(/^[a-zA-Z]:/) && !filePath.startsWith('/') && worktreePath) {\r\n                fullPath = `${worktreePath}/${filePath}`.replace(/\\\\/g, '/');\r\n            }\r\n            const uri = vscode.Uri.file(fullPath);\r\n            await vscode.commands.executeCommand('git.openChange', uri);\r\n        } catch (error) {\r\n            // Fallback to just opening the file\r\n            await this.handleOpenFile(filePath, worktreePath);\r\n        }\r\n    }\r\n\r\n    private async handleGetWorktreeChanges(worktreePath: string, panel: vscode.WebviewPanel): Promise<void> {\r\n        try {\r\n            const status = await this.apiService.getGitStatus(worktreePath);\r\n            panel.webview.postMessage({\r\n                type: 'worktreeChanges',\r\n                status: status\r\n            });\r\n        } catch (error) {\r\n            panel.webview.postMessage({\r\n                type: 'worktreeChanges',\r\n                status: { success: false, error: 'Failed to get git status' }\r\n            });\r\n        }\r\n    }\r\n\r\n    private async handleOpenWorktreeInExplorer(worktreePath: string): Promise<void> {\r\n        try {\r\n            const uri = vscode.Uri.file(worktreePath);\r\n            await vscode.commands.executeCommand('revealFileInOS', uri);\r\n        } catch (error) {\r\n            vscode.window.showErrorMessage(`Failed to open worktree: ${worktreePath}`);\r\n        }\r\n    }\r\n\r\n    private async handleEnrich(workflowId: string, panel: vscode.WebviewPanel): Promise<void> {\r\n        console.log(`[Enrich] Starting enrichment for workflow ${workflowId}`);\r\n        try {\r\n            // Get workflow to check repository path\r\n            const workflow = await this.apiService.getWorkflow(workflowId);\r\n            const repoPath = workflow.repositoryPath || workflow.worktreePath;\r\n            console.log(`[Enrich] Repository path: ${repoPath}`);\r\n\r\n            if (!repoPath) {\r\n                console.log('[Enrich] No repository path - showing error');\r\n                panel.webview.postMessage({ type: 'error', message: 'No repository path associated with this workflow' });\r\n                return;\r\n            }\r\n\r\n            // Check if codebase is indexed using workspace status\r\n            console.log(`[Enrich] Checking index status for ${repoPath}`);\r\n            const workspaceStatus = await this.apiService.getWorkspaceStatus(repoPath);\r\n            console.log(`[Enrich] Workspace status: isOnboarded=${workspaceStatus.isOnboarded}`);\r\n\r\n            if (!workspaceStatus.isOnboarded) {\r\n                // Send message to show confirmation dialog\r\n                console.log('[Enrich] Codebase not indexed - sending confirmIndexAndEnrich message');\r\n                panel.webview.postMessage({\r\n                    type: 'confirmIndexAndEnrich',\r\n                    message: 'Codebase not indexed. Index now and enrich?'\r\n                });\r\n                return;\r\n            }\r\n\r\n            // Check if Code Graph is indexed (RAG is indexed but graph might not be)\r\n            try {\r\n                const graphStats = await this.apiService.getCodeGraphStats(repoPath);\r\n                console.log(`[Enrich] Code Graph stats: ${graphStats.totalNodes} nodes, ${graphStats.totalEdges} edges`);\r\n                \r\n                if (graphStats.totalNodes === 0) {\r\n                    // RAG is indexed but Code Graph is not - prompt user\r\n                    const choice = await vscode.window.showInformationMessage(\r\n                        'Code Graph not indexed. Index for better structural queries?',\r\n                        'Yes', 'Skip'\r\n                    );\r\n                    \r\n                    if (choice === 'Yes') {\r\n                        // Trigger re-indexing which will rebuild the graph\r\n                        panel.webview.postMessage({ type: 'loading', action: 'index' });\r\n                        const result = await this.apiService.reindexWorkspace(repoPath);\r\n                        \r\n                        await vscode.window.withProgress(\r\n                            {\r\n                                location: vscode.ProgressLocation.Notification,\r\n                                title: 'Indexing Code Graph',\r\n                                cancellable: false\r\n                            },\r\n                            async (progress) => {\r\n                                let status = await this.apiService.getBackgroundJobStatus(result.jobId);\r\n                                while (status.state === 'Queued' || status.state === 'Processing') {\r\n                                    await new Promise(resolve => setTimeout(resolve, 1000));\r\n                                    status = await this.apiService.getBackgroundJobStatus(result.jobId);\r\n                                    progress.report({\r\n                                        message: `Processing ${status.processedItems}/${status.totalItems}...`,\r\n                                        increment: status.progressPercent > 0 ? 1 : 0\r\n                                    });\r\n                                }\r\n                                if (status.state === 'Failed') {\r\n                                    throw new Error(status.error || 'Indexing failed');\r\n                                }\r\n                            }\r\n                        );\r\n                    }\r\n                    // Continue with enrichment whether they chose Yes or Skip\r\n                }\r\n            } catch (graphError) {\r\n                // Code Graph check is optional - log and continue\r\n                console.log('[Enrich] Could not check Code Graph status:', graphError);\r\n            }\r\n\r\n            // Codebase is indexed, proceed with enrichment\r\n            console.log('[Enrich] Codebase is indexed - proceeding with enrichment');\r\n            panel.webview.postMessage({ type: 'loading', action: 'enrich' });\r\n            await this.apiService.analyzeWorkflow(workflowId);\r\n            await this.refreshPanel(workflowId);\r\n            panel.webview.postMessage({ type: 'success', message: 'Workflow enriched successfully' });\r\n        } catch (error) {\r\n            console.error('[Enrich] Error:', error);\r\n            const message = error instanceof Error ? error.message : 'Failed to enrich workflow';\r\n            panel.webview.postMessage({ type: 'error', message });\r\n        }\r\n    }\r\n\r\n    private async handleIndexCodebase(workflowId: string, panel: vscode.WebviewPanel): Promise<void> {\r\n        try {\r\n            const workflow = await this.apiService.getWorkflow(workflowId);\r\n            const repoPath = workflow.repositoryPath || workflow.worktreePath;\r\n\r\n            if (!repoPath) {\r\n                panel.webview.postMessage({ type: 'error', message: 'No repository path associated with this workflow' });\r\n                return;\r\n            }\r\n\r\n            panel.webview.postMessage({ type: 'loading', action: 'index' });\r\n\r\n            // Check if workspace exists, onboard if not, reindex if it does\r\n            const workspaceStatus = await this.apiService.getWorkspaceStatus(repoPath);\r\n            let jobId: string;\r\n\r\n            if (!workspaceStatus.isOnboarded) {\r\n                // Onboard new workspace (creates record + starts indexing)\r\n                const result = await this.apiService.onboardWorkspace(repoPath);\r\n                if (!result.jobId) {\r\n                    throw new Error('Failed to start indexing');\r\n                }\r\n                jobId = result.jobId;\r\n            } else {\r\n                // Reindex existing workspace\r\n                const result = await this.apiService.reindexWorkspace(repoPath);\r\n                jobId = result.jobId;\r\n            }\r\n\r\n            await vscode.window.withProgress(\r\n                {\r\n                    location: vscode.ProgressLocation.Notification,\r\n                    title: 'Indexing codebase',\r\n                    cancellable: false\r\n                },\r\n                async (progress) => {\r\n                    progress.report({ message: `Starting: ${repoPath}` });\r\n\r\n                    // Poll for completion\r\n                    let status = await this.apiService.getBackgroundJobStatus(jobId);\r\n                    while (status.state === 'Queued' || status.state === 'Processing') {\r\n                        await new Promise(resolve => setTimeout(resolve, 1000)); // Poll every second\r\n                        status = await this.apiService.getBackgroundJobStatus(jobId);\r\n                        \r\n                        progress.report({\r\n                            message: `Processing file ${status.processedItems}/${status.totalItems}...`,\r\n                            increment: status.progressPercent > 0 ? 1 : 0\r\n                        });\r\n                    }\r\n\r\n                    if (status.state === 'Failed') {\r\n                        throw new Error(status.error || 'Indexing failed');\r\n                    }\r\n                }\r\n            );\r\n\r\n            await this.refreshPanel(workflowId);\r\n            panel.webview.postMessage({ type: 'success', message: 'Codebase indexed successfully' });\r\n        } catch (error) {\r\n            const message = error instanceof Error ? error.message : 'Failed to index codebase';\r\n            panel.webview.postMessage({ type: 'error', message });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Find a .sln or .csproj file in the repository path, searching recursively up to depth 3.\r\n     * Prefers the shallowest .sln file found; falls back to .csproj if no .sln exists.\r\n     */\r\n    private async findSolutionPath(repoPath: string): Promise<string | null> {\r\n        const fs = await import('fs');\r\n        const path = await import('path');\r\n        \r\n        const ignoreDirs = new Set(['node_modules', 'bin', 'obj', '.git', 'dist', 'build', 'out', 'packages']);\r\n        \r\n        // Recursively collect files up to maxDepth\r\n        const collectFiles = (dir: string, extension: string, depth: number, maxDepth: number): string[] => {\r\n            if (depth > maxDepth) return [];\r\n            \r\n            const results: string[] = [];\r\n            try {\r\n                const entries = fs.readdirSync(dir, { withFileTypes: true });\r\n                for (const entry of entries) {\r\n                    if (entry.isDirectory()) {\r\n                        if (!ignoreDirs.has(entry.name)) {\r\n                            results.push(...collectFiles(path.join(dir, entry.name), extension, depth + 1, maxDepth));\r\n                        }\r\n                    } else if (entry.isFile() && entry.name.endsWith(extension)) {\r\n                        results.push(path.join(dir, entry.name));\r\n                    }\r\n                }\r\n            } catch {\r\n                // Ignore permission errors or inaccessible directories\r\n            }\r\n            return results;\r\n        };\r\n        \r\n        // Look for .sln files first (up to depth 3)\r\n        const slnFiles = collectFiles(repoPath, '.sln', 0, 3);\r\n        if (slnFiles.length > 0) {\r\n            // Prefer shallowest path (fewest path separators)\r\n            slnFiles.sort((a, b) => a.split(path.sep).length - b.split(path.sep).length);\r\n            return slnFiles[0];\r\n        }\r\n        \r\n        // Fall back to .csproj files\r\n        const csprojFiles = collectFiles(repoPath, '.csproj', 0, 3);\r\n        if (csprojFiles.length > 0) {\r\n            csprojFiles.sort((a, b) => a.split(path.sep).length - b.split(path.sep).length);\r\n            return csprojFiles[0];\r\n        }\r\n        \r\n        return null;\r\n    }\r\n\r\n    private async handleIndexAndEnrich(workflowId: string, panel: vscode.WebviewPanel): Promise<void> {\r\n        try {\r\n            const workflow = await this.apiService.getWorkflow(workflowId);\r\n            const repoPath = workflow.repositoryPath || workflow.worktreePath;\r\n\r\n            if (!repoPath) {\r\n                panel.webview.postMessage({ type: 'error', message: 'No repository path associated with this workflow' });\r\n                return;\r\n            }\r\n\r\n            // Index using workspace API\r\n            panel.webview.postMessage({ type: 'loading', action: 'index' });\r\n            \r\n            const workspaceStatus = await this.apiService.getWorkspaceStatus(repoPath);\r\n            let jobId: string;\r\n\r\n            if (!workspaceStatus.isOnboarded) {\r\n                const result = await this.apiService.onboardWorkspace(repoPath);\r\n                if (!result.jobId) {\r\n                    throw new Error('Failed to start indexing');\r\n                }\r\n                jobId = result.jobId;\r\n            } else {\r\n                const result = await this.apiService.reindexWorkspace(repoPath);\r\n                jobId = result.jobId;\r\n            }\r\n\r\n            await vscode.window.withProgress(\r\n                {\r\n                    location: vscode.ProgressLocation.Notification,\r\n                    title: 'Indexing codebase',\r\n                    cancellable: false\r\n                },\r\n                async (progress) => {\r\n                    progress.report({ message: `Starting: ${repoPath}` });\r\n\r\n                    let status = await this.apiService.getBackgroundJobStatus(jobId);\r\n                    while (status.state === 'Queued' || status.state === 'Processing') {\r\n                        await new Promise(resolve => setTimeout(resolve, 1000));\r\n                        status = await this.apiService.getBackgroundJobStatus(jobId);\r\n                        progress.report({\r\n                            message: `Processing file ${status.processedItems}/${status.totalItems}...`,\r\n                            increment: status.progressPercent > 0 ? 1 : 0\r\n                        });\r\n                    }\r\n\r\n                    if (status.state === 'Failed') {\r\n                        throw new Error(status.error || 'Indexing failed');\r\n                    }\r\n                }\r\n            );\r\n\r\n            // Then enrich\r\n            panel.webview.postMessage({ type: 'loading', action: 'enrich' });\r\n            await this.apiService.analyzeWorkflow(workflowId);\r\n            await this.refreshPanel(workflowId);\r\n            panel.webview.postMessage({ type: 'success', message: 'Codebase indexed and workflow enriched successfully' });\r\n        } catch (error) {\r\n            const message = error instanceof Error ? error.message : 'Failed to index and enrich';\r\n            panel.webview.postMessage({ type: 'error', message });\r\n        }\r\n    }\r\n\r\n    private async handlePlan(workflowId: string, panel: vscode.WebviewPanel): Promise<void> {\r\n        panel.webview.postMessage({ type: 'loading', action: 'plan' });\r\n        try {\r\n            await this.apiService.planWorkflow(workflowId);\r\n            await this.refreshPanel(workflowId);\r\n            panel.webview.postMessage({ type: 'success', message: 'Plan created successfully' });\r\n        } catch (error) {\r\n            panel.webview.postMessage({ type: 'error', message: 'Failed to create plan' });\r\n        }\r\n    }\r\n\r\n    private async handleExecuteStep(workflowId: string, stepId: string, panel: vscode.WebviewPanel): Promise<void> {\r\n        panel.webview.postMessage({ type: 'loading', action: 'execute', stepId });\r\n        try {\r\n            await this.apiService.executeWorkflowStep(workflowId, stepId);\r\n            await this.refreshPanel(workflowId);\r\n            panel.webview.postMessage({ type: 'success', message: 'Step executed successfully' });\r\n        } catch (error) {\r\n            panel.webview.postMessage({ type: 'error', message: 'Step execution failed' });\r\n            await this.refreshPanel(workflowId);\r\n        }\r\n    }\r\n\r\n    private async handleExecuteAllPending(workflowId: string, panel: vscode.WebviewPanel): Promise<void> {\r\n        try {\r\n            // Get fresh workflow to find pending steps\r\n            const workflow = await this.apiService.getWorkflow(workflowId);\r\n            const pendingSteps = (workflow.steps || []).filter(s => s.status === 'Pending').sort((a, b) => a.order - b.order);\r\n\r\n            if (pendingSteps.length === 0) {\r\n                panel.webview.postMessage({ type: 'error', message: 'No pending steps to execute' });\r\n                return;\r\n            }\r\n\r\n            // Execute each step sequentially\r\n            for (let i = 0; i < pendingSteps.length; i++) {\r\n                const step = pendingSteps[i];\r\n                panel.webview.postMessage({\r\n                    type: 'loading',\r\n                    action: 'execute',\r\n                    stepId: step.id,\r\n                    message: `Executing step ${i + 1}/${pendingSteps.length}: ${step.name}`\r\n                });\r\n\r\n                try {\r\n                    await this.apiService.executeWorkflowStep(workflowId, step.id);\r\n                    await this.refreshPanel(workflowId);\r\n                } catch (stepError) {\r\n                    // Stop on first failure\r\n                    panel.webview.postMessage({\r\n                        type: 'error',\r\n                        message: `Step \"${step.name}\" failed. Stopping execution.`\r\n                    });\r\n                    await this.refreshPanel(workflowId);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            panel.webview.postMessage({ type: 'success', message: `All ${pendingSteps.length} steps completed!` });\r\n            vscode.window.showInformationMessage(`All ${pendingSteps.length} workflow steps completed!`);\r\n        } catch (error) {\r\n            panel.webview.postMessage({ type: 'error', message: 'Failed to execute steps' });\r\n        }\r\n    }\r\n\r\n    private async handleChat(workflowId: string, text: string, panel: vscode.WebviewPanel): Promise<void> {\r\n        panel.webview.postMessage({ type: 'chatLoading' });\r\n        try {\r\n            const response = await this.apiService.sendWorkflowChat(workflowId, text);\r\n            panel.webview.postMessage({\r\n                type: 'chatResponse',\r\n                response: response.response,\r\n                planModified: response.planModified,\r\n                analysisUpdated: response.analysisUpdated\r\n            });\r\n            if (response.planModified || response.analysisUpdated) {\r\n                await this.refreshPanel(workflowId);\r\n            }\r\n        } catch (error) {\r\n            panel.webview.postMessage({ type: 'chatError', message: 'Failed to send message' });\r\n        }\r\n    }\r\n\r\n    private async handleComplete(workflowId: string, panel: vscode.WebviewPanel): Promise<void> {\r\n        try {\r\n            await this.apiService.completeWorkflow(workflowId);\r\n            await this.refreshPanel(workflowId);\r\n            vscode.window.showInformationMessage('Workflow completed!');\r\n        } catch (error) {\r\n            vscode.window.showErrorMessage('Failed to complete workflow');\r\n        }\r\n    }\r\n\r\n    private async handleCancel(workflowId: string, panel: vscode.WebviewPanel): Promise<void> {\r\n        const confirm = await vscode.window.showWarningMessage(\r\n            'Cancel this workflow?',\r\n            { modal: true },\r\n            'Cancel Workflow'\r\n        );\r\n        if (confirm) {\r\n            try {\r\n                await this.apiService.cancelWorkflow(workflowId);\r\n                await this.refreshPanel(workflowId);\r\n            } catch (error) {\r\n                vscode.window.showErrorMessage('Failed to cancel workflow');\r\n            }\r\n        }\r\n    }\r\n\r\n    private async handleFinalize(workflowId: string, message: any, panel: vscode.WebviewPanel): Promise<void> {\r\n        try {\r\n            panel.webview.postMessage({ type: 'loading', action: 'finalize' });\r\n            \r\n            const result = await this.apiService.finalizeWorkflow(workflowId, {\r\n                commitMessage: message.commitMessage,\r\n                createPullRequest: message.createPullRequest ?? true,\r\n                prTitle: message.prTitle,\r\n                draft: message.draft ?? true\r\n            });\r\n            \r\n            panel.webview.postMessage({ type: 'loadingDone' });\r\n            \r\n            if (result.prUrl) {\r\n                const openPr = await vscode.window.showInformationMessage(\r\n                    ` ${result.message}`,\r\n                    'Open PR in Browser'\r\n                );\r\n                if (openPr) {\r\n                    vscode.env.openExternal(vscode.Uri.parse(result.prUrl));\r\n                }\r\n            } else {\r\n                vscode.window.showInformationMessage(` ${result.message}`);\r\n            }\r\n            \r\n            await this.refreshPanel(workflowId);\r\n        } catch (error) {\r\n            panel.webview.postMessage({ type: 'loadingDone' });\r\n            const msg = error instanceof Error ? error.message : 'Failed to finalize workflow';\r\n            vscode.window.showErrorMessage(`Finalize failed: ${msg}`);\r\n        }\r\n    }\r\n\r\n    private async handleOpenWorkspace(workspacePath: string, gitBranch: string): Promise<void> {\r\n        if (!workspacePath) {\r\n            vscode.window.showErrorMessage('No workspace path available for this workflow');\r\n            return;\r\n        }\r\n\r\n        const uri = vscode.Uri.file(workspacePath);\r\n        \r\n        // Check if the folder exists\r\n        try {\r\n            await vscode.workspace.fs.stat(uri);\r\n        } catch {\r\n            vscode.window.showErrorMessage(`Workspace folder not found: ${workspacePath}`);\r\n            return;\r\n        }\r\n\r\n        // Open the folder - this adds it to the workspace\r\n        const choice = await vscode.window.showInformationMessage(\r\n            `Open workspace for branch \"${gitBranch}\"?`,\r\n            { modal: false },\r\n            'Add to Workspace',\r\n            'Open in New Window'\r\n        );\r\n\r\n        if (choice === 'Add to Workspace') {\r\n            // Add folder to current workspace\r\n            vscode.workspace.updateWorkspaceFolders(\r\n                vscode.workspace.workspaceFolders?.length || 0,\r\n                0,\r\n                { uri, name: ` ${gitBranch}` }\r\n            );\r\n            vscode.window.showInformationMessage(`Added ${gitBranch} to workspace`);\r\n        } else if (choice === 'Open in New Window') {\r\n            // Open in a new VS Code window\r\n            await vscode.commands.executeCommand('vscode.openFolder', uri, true);\r\n        }\r\n    }\r\n\r\n    private async handleSkipStep(workflowId: string, stepId: string, panel: vscode.WebviewPanel): Promise<void> {\r\n        try {\r\n            panel.webview.postMessage({ type: 'loading', action: 'skip', stepId });\r\n            await this.apiService.skipStep(workflowId, stepId);\r\n            vscode.window.showInformationMessage('Step skipped ');\r\n            panel.webview.postMessage({ type: 'loadingDone' });\r\n            await this.refreshPanel(workflowId);\r\n        } catch (error) {\r\n            const message = error instanceof Error ? error.message : 'Failed to skip step';\r\n            panel.webview.postMessage({ type: 'error', message });\r\n        }\r\n    }\r\n\r\n    private async handleResetStep(workflowId: string, stepId: string, panel: vscode.WebviewPanel): Promise<void> {\r\n        try {\r\n            panel.webview.postMessage({ type: 'loading', action: 'reset', stepId });\r\n            await this.apiService.resetStep(workflowId, stepId);\r\n            vscode.window.showInformationMessage('Step reset to pending ');\r\n            panel.webview.postMessage({ type: 'loadingDone' });\r\n            await this.refreshPanel(workflowId);\r\n        } catch (error) {\r\n            const message = error instanceof Error ? error.message : 'Failed to reset step';\r\n            panel.webview.postMessage({ type: 'error', message });\r\n        }\r\n    }\r\n\r\n    private async handleStepChat(workflowId: string, stepId: string, message: string, panel: vscode.WebviewPanel): Promise<void> {\r\n        try {\r\n            const response = await this.apiService.chatWithStep(workflowId, stepId, message);\r\n            panel.webview.postMessage({\r\n                type: 'stepChatResponse',\r\n                stepId,\r\n                response: response.response,\r\n                updatedDescription: response.updatedDescription\r\n            });\r\n        } catch (error) {\r\n            const errMessage = error instanceof Error ? error.message : 'Failed to send message';\r\n            panel.webview.postMessage({ type: 'error', message: errMessage });\r\n        }\r\n    }\r\n\r\n    private async handleApproveStepOutput(workflowId: string, stepId: string, panel: vscode.WebviewPanel): Promise<void> {\r\n        try {\r\n            panel.webview.postMessage({ type: 'loading', action: 'approve', stepId });\r\n            await this.apiService.approveStepOutput(workflowId, stepId);\r\n            vscode.window.showInformationMessage('Output approved ');\r\n            panel.webview.postMessage({ type: 'loadingDone' });\r\n            await this.refreshPanel(workflowId);\r\n        } catch (error) {\r\n            const message = error instanceof Error ? error.message : 'Failed to approve output';\r\n            panel.webview.postMessage({ type: 'error', message });\r\n        }\r\n    }\r\n\r\n    private async handleRejectStepOutput(workflowId: string, stepId: string, reason: string, panel: vscode.WebviewPanel): Promise<void> {\r\n        try {\r\n            panel.webview.postMessage({ type: 'loading', action: 'reject', stepId });\r\n            await this.apiService.rejectStepOutput(workflowId, stepId, reason);\r\n            vscode.window.showInformationMessage(`Output rejected - step reset to pending for re-execution`);\r\n            panel.webview.postMessage({ type: 'loadingDone' });\r\n            await this.refreshPanel(workflowId);\r\n        } catch (error) {\r\n            const message = error instanceof Error ? error.message : 'Failed to reject output';\r\n            panel.webview.postMessage({ type: 'error', message });\r\n        }\r\n    }\r\n\r\n    private async handleViewStepContext(workflowId: string, stepId: string, panel: vscode.WebviewPanel): Promise<void> {\r\n        try {\r\n            // Get step details and show in a new panel or message\r\n            const workflow = await this.apiService.getWorkflow(workflowId);\r\n            const step = (workflow.steps || []).find(s => s.id === stepId);\r\n            if (step) {\r\n                // Show step context in a quick pick or information message\r\n                vscode.window.showInformationMessage(`Step Context: ${step.name}\\n\\nCapability: ${step.capability}\\nAgent: ${step.assignedAgentId || 'Not assigned'}\\nStatus: ${step.status}`);\r\n            }\r\n        } catch (error) {\r\n            const message = error instanceof Error ? error.message : 'Failed to view step context';\r\n            panel.webview.postMessage({ type: 'error', message });\r\n        }\r\n    }\r\n\r\n    private async handleReassignStep(workflowId: string, stepId: string, agentId: string, panel: vscode.WebviewPanel): Promise<void> {\r\n        try {\r\n            panel.webview.postMessage({ type: 'loading', action: 'reassign', stepId });\r\n            await this.apiService.reassignStep(workflowId, stepId, agentId);\r\n            // Refresh the workflow to show updated step\r\n            const updatedWorkflow = await this.apiService.getWorkflow(workflowId);\r\n            panel.webview.postMessage({ type: 'refresh', workflow: updatedWorkflow });\r\n            panel.webview.postMessage({ type: 'loadingDone' });\r\n            vscode.window.showInformationMessage(`Step reassigned to ${agentId}`);\r\n        } catch (error) {\r\n            const message = error instanceof Error ? error.message : 'Failed to reassign step';\r\n            panel.webview.postMessage({ type: 'error', message });\r\n        }\r\n    }\r\n\r\n    private async handleUpdateStepDescription(workflowId: string, stepId: string, description: string, panel: vscode.WebviewPanel): Promise<void> {\r\n        try {\r\n            panel.webview.postMessage({ type: 'loading', action: 'updateDescription', stepId });\r\n            await this.apiService.updateStepDescription(workflowId, stepId, description);\r\n            // Refresh the workflow to show updated step\r\n            const updatedWorkflow = await this.apiService.getWorkflow(workflowId);\r\n            panel.webview.postMessage({ type: 'refresh', workflow: updatedWorkflow });\r\n            panel.webview.postMessage({ type: 'loadingDone' });\r\n        } catch (error) {\r\n            const message = error instanceof Error ? error.message : 'Failed to update description';\r\n            panel.webview.postMessage({ type: 'error', message });\r\n        }\r\n    }\r\n\r\n    private getHtml(workflow: Workflow, webview: vscode.Webview): string {\r\n        const stepsHtml = this.getStepsHtml(workflow.steps || []);\r\n        const statusClass = workflow.status.toLowerCase();\r\n\r\n        return `<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>${workflow.title}</title>\r\n    <style>\r\n        :root {\r\n            --vscode-font-family: var(--vscode-editor-font-family, 'Segoe UI', sans-serif);\r\n        }\r\n        body {\r\n            font-family: var(--vscode-font-family);\r\n            padding: 16px;\r\n            color: var(--vscode-foreground);\r\n            background: var(--vscode-editor-background);\r\n            line-height: 1.5;\r\n        }\r\n        .header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            margin-bottom: 16px;\r\n            padding-bottom: 12px;\r\n            border-bottom: 1px solid var(--vscode-panel-border);\r\n        }\r\n        .title {\r\n            font-size: 1.4em;\r\n            font-weight: 600;\r\n            margin: 0;\r\n        }\r\n        .status {\r\n            padding: 4px 12px;\r\n            border-radius: 12px;\r\n            font-size: 0.85em;\r\n            font-weight: 500;\r\n        }\r\n        .status.created, .status.open { background: var(--vscode-badge-background); color: var(--vscode-badge-foreground); }\r\n        .status.analyzing, .status.planning, .status.executing { background: #0078d4; color: white; }\r\n        .status.analyzed, .status.planned { background: #107c10; color: white; }\r\n        .status.completed { background: #107c10; color: white; }\r\n        .status.failed { background: #d13438; color: white; }\r\n        .status.cancelled { background: #666; color: white; }\r\n\r\n        .meta {\r\n            display: flex;\r\n            gap: 16px;\r\n            margin-bottom: 16px;\r\n            font-size: 0.9em;\r\n            color: var(--vscode-descriptionForeground);\r\n        }\r\n        .meta-item { display: flex; align-items: center; gap: 4px; }\r\n\r\n        .chat-section {\r\n            background: var(--vscode-input-background);\r\n            border: 1px solid var(--vscode-input-border);\r\n            border-radius: 6px;\r\n            padding: 12px;\r\n            margin-bottom: 20px;\r\n        }\r\n        .chat-input-container {\r\n            display: flex;\r\n            gap: 8px;\r\n        }\r\n        .chat-input {\r\n            flex: 1;\r\n            padding: 8px 12px;\r\n            border: 1px solid var(--vscode-input-border);\r\n            border-radius: 4px;\r\n            background: var(--vscode-input-background);\r\n            color: var(--vscode-input-foreground);\r\n            font-size: 14px;\r\n        }\r\n        .chat-input:focus {\r\n            outline: 1px solid var(--vscode-focusBorder);\r\n        }\r\n        .chat-response {\r\n            margin-top: 12px;\r\n            padding: 12px;\r\n            background: var(--vscode-textBlockQuote-background);\r\n            border-radius: 4px;\r\n            max-height: 300px;\r\n            overflow-y: auto;\r\n        }\r\n        .chat-user-message {\r\n            margin-bottom: 8px;\r\n            padding: 8px;\r\n            background: var(--vscode-input-background);\r\n            border-radius: 4px;\r\n        }\r\n        .chat-assistant-message {\r\n            margin-bottom: 8px;\r\n            padding: 8px;\r\n            background: var(--vscode-editor-background);\r\n            border-radius: 4px;\r\n            white-space: pre-wrap;\r\n        }\r\n        .chat-status {\r\n            margin-top: 8px;\r\n            color: var(--vscode-descriptionForeground);\r\n        }\r\n        .chat-error {\r\n            margin-bottom: 8px;\r\n            padding: 8px;\r\n            background: var(--vscode-inputValidation-errorBackground);\r\n            border: 1px solid var(--vscode-inputValidation-errorBorder);\r\n            border-radius: 4px;\r\n        }\r\n\r\n        .timeline {\r\n            position: relative;\r\n        }\r\n        .timeline::before {\r\n            content: '';\r\n            position: absolute;\r\n            left: 12px;\r\n            top: 0;\r\n            bottom: 0;\r\n            width: 2px;\r\n            background: var(--vscode-panel-border);\r\n        }\r\n\r\n        .timeline-item {\r\n            position: relative;\r\n            margin-left: 32px;\r\n            margin-bottom: 16px;\r\n            padding: 12px 16px;\r\n            background: var(--vscode-editor-inactiveSelectionBackground);\r\n            border-radius: 6px;\r\n            border: 1px solid var(--vscode-panel-border);\r\n        }\r\n        .timeline-item::before {\r\n            content: '';\r\n            position: absolute;\r\n            left: -24px;\r\n            top: 16px;\r\n            width: 12px;\r\n            height: 12px;\r\n            border-radius: 50%;\r\n            background: var(--vscode-badge-background);\r\n            border: 2px solid var(--vscode-editor-background);\r\n        }\r\n        .timeline-item.completed::before { background: #107c10; }\r\n        .timeline-item.running::before { background: #0078d4; animation: pulse 1s infinite; }\r\n        .timeline-item.failed::before { background: #d13438; }\r\n        .timeline-item.pending::before { background: var(--vscode-badge-background); }\r\n\r\n        @keyframes pulse {\r\n            0%, 100% { opacity: 1; }\r\n            50% { opacity: 0.5; }\r\n        }\r\n\r\n        .step-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n        }\r\n        .step-name {\r\n            font-weight: 600;\r\n            font-size: 1em;\r\n        }\r\n        .step-capability {\r\n            font-size: 0.85em;\r\n            color: var(--vscode-descriptionForeground);\r\n            background: var(--vscode-badge-background);\r\n            padding: 2px 8px;\r\n            border-radius: 10px;\r\n        }\r\n        .step-description {\r\n            margin-top: 8px;\r\n            font-size: 0.9em;\r\n            color: var(--vscode-descriptionForeground);\r\n        }\r\n        .step-actions {\r\n            margin-top: 12px;\r\n            display: flex;\r\n            gap: 8px;\r\n        }\r\n\r\n        /* Step card compact design */\r\n        .step-compact {\r\n            padding: 10px 14px;\r\n        }\r\n        .step-status-icon {\r\n            font-size: 0.9em;\r\n            margin-right: 6px;\r\n        }\r\n        .step-status-icon.completed { color: #107c10; }\r\n        .step-status-icon.running { color: #0078d4; }\r\n        .step-status-icon.pending { color: var(--vscode-descriptionForeground); }\r\n        .step-status-icon.failed { color: #d13438; }\r\n\r\n        /* Collapsible step sections */\r\n        .step-section {\r\n            margin-top: 10px;\r\n            border: 1px solid var(--vscode-panel-border);\r\n            border-radius: 4px;\r\n            overflow: hidden;\r\n        }\r\n        .step-section.collapsed .section-content {\r\n            display: none;\r\n        }\r\n        .section-header {\r\n            padding: 8px 12px;\r\n            background: var(--vscode-editor-inactiveSelectionBackground);\r\n            cursor: pointer;\r\n            font-size: 0.85em;\r\n            color: var(--vscode-descriptionForeground);\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            user-select: none;\r\n        }\r\n        .section-header:hover {\r\n            background: var(--vscode-list-hoverBackground);\r\n        }\r\n        .section-toggle {\r\n            font-size: 0.75em;\r\n            opacity: 0.7;\r\n        }\r\n        .section-content {\r\n            padding: 12px;\r\n            background: var(--vscode-textCodeBlock-background);\r\n            max-height: 400px;\r\n            overflow-y: auto;\r\n        }\r\n\r\n        /* Step toolbar */\r\n        .step-toolbar {\r\n            margin-top: 10px;\r\n            display: flex;\r\n            gap: 6px;\r\n            flex-wrap: wrap;\r\n        }\r\n        .toolbar-btn {\r\n            padding: 4px 10px;\r\n            border: 1px solid var(--vscode-button-secondaryBackground);\r\n            border-radius: 3px;\r\n            background: transparent;\r\n            color: var(--vscode-foreground);\r\n            font-size: 12px;\r\n            cursor: pointer;\r\n            display: inline-flex;\r\n            align-items: center;\r\n            gap: 4px;\r\n        }\r\n        .toolbar-btn:hover:not(:disabled) {\r\n            background: var(--vscode-button-secondaryBackground);\r\n        }\r\n        .toolbar-btn:disabled {\r\n            opacity: 0.4;\r\n            cursor: not-allowed;\r\n        }\r\n        .toolbar-btn.primary {\r\n            background: var(--vscode-button-background);\r\n            color: var(--vscode-button-foreground);\r\n            border-color: var(--vscode-button-background);\r\n        }\r\n        .toolbar-btn.primary:hover:not(:disabled) {\r\n            background: var(--vscode-button-hoverBackground);\r\n        }\r\n\r\n        /* Step chat section */\r\n        .step-chat {\r\n            margin-top: 10px;\r\n            border: 1px solid var(--vscode-panel-border);\r\n            border-radius: 4px;\r\n            padding: 12px;\r\n            background: var(--vscode-editor-inactiveSelectionBackground);\r\n        }\r\n        .step-chat.hidden {\r\n            display: none;\r\n        }\r\n        .chat-messages {\r\n            max-height: 200px;\r\n            overflow-y: auto;\r\n            margin-bottom: 10px;\r\n        }\r\n        .chat-message {\r\n            margin-bottom: 8px;\r\n            padding: 8px 10px;\r\n            border-radius: 4px;\r\n            font-size: 0.9em;\r\n        }\r\n        .chat-message.user {\r\n            background: var(--vscode-button-secondaryBackground);\r\n            margin-left: 20%;\r\n        }\r\n        .chat-message.assistant {\r\n            background: var(--vscode-textCodeBlock-background);\r\n            margin-right: 20%;\r\n        }\r\n        .chat-input-row {\r\n            display: flex;\r\n            gap: 8px;\r\n        }\r\n        .chat-input-row input {\r\n            flex: 1;\r\n            padding: 6px 10px;\r\n            border: 1px solid var(--vscode-input-border);\r\n            border-radius: 3px;\r\n            background: var(--vscode-input-background);\r\n            color: var(--vscode-input-foreground);\r\n            font-size: 13px;\r\n        }\r\n        .chat-input-row input:focus {\r\n            outline: 1px solid var(--vscode-focusBorder);\r\n        }\r\n\r\n        /* Approve/reject buttons */\r\n        .output-actions {\r\n            display: flex;\r\n            gap: 8px;\r\n            margin-top: 10px;\r\n            padding-top: 10px;\r\n            border-top: 1px solid var(--vscode-panel-border);\r\n        }\r\n        .btn-approve {\r\n            background: #107c10;\r\n            color: white;\r\n            border: none;\r\n        }\r\n        .btn-approve:hover {\r\n            background: #0e6b0e;\r\n        }\r\n        .btn-reject {\r\n            background: transparent;\r\n            color: #d13438;\r\n            border: 1px solid #d13438;\r\n        }\r\n        .btn-reject:hover {\r\n            background: rgba(209, 52, 56, 0.1);\r\n        }\r\n\r\n        /* Step card layout */\r\n        .step-card {\r\n            margin-bottom: 12px;\r\n            padding: 12px 16px;\r\n            background: var(--vscode-editor-inactiveSelectionBackground);\r\n            border-radius: 6px;\r\n            border: 1px solid var(--vscode-panel-border);\r\n            transition: border-color 0.2s;\r\n        }\r\n        .step-card:hover {\r\n            border-color: var(--vscode-focusBorder);\r\n        }\r\n        .step-card.completed {\r\n            border-left: 3px solid #107c10;\r\n        }\r\n        .step-card.running {\r\n            border-left: 3px solid #0078d4;\r\n            animation: running-pulse 1.5s ease-in-out infinite;\r\n        }\r\n        .step-card.failed {\r\n            border-left: 3px solid #d13438;\r\n        }\r\n        .step-card.pending {\r\n            border-left: 3px solid var(--vscode-descriptionForeground);\r\n        }\r\n        .step-card.blocked {\r\n            opacity: 0.6;\r\n        }\r\n        .step-card.needs-rework {\r\n            border-left: 3px solid #f0ad4e;\r\n            background: rgba(240, 173, 78, 0.05);\r\n        }\r\n        .step-card.approved {\r\n            border-left: 3px solid #107c10;\r\n        }\r\n        .rework-badge {\r\n            font-size: 0.7em;\r\n            background: #f0ad4e;\r\n            color: #000;\r\n            padding: 2px 6px;\r\n            border-radius: 8px;\r\n            margin-left: 8px;\r\n        }\r\n\r\n        @keyframes running-pulse {\r\n            0%, 100% { background: var(--vscode-editor-inactiveSelectionBackground); }\r\n            50% { background: rgba(0, 120, 212, 0.1); }\r\n        }\r\n\r\n        .step-header {\r\n            display: flex;\r\n            align-items: flex-start;\r\n            gap: 10px;\r\n        }\r\n        .step-status {\r\n            font-size: 1.1em;\r\n            flex-shrink: 0;\r\n            width: 20px;\r\n            text-align: center;\r\n        }\r\n        .step-card.completed .step-status { color: #107c10; }\r\n        .step-card.running .step-status { color: #0078d4; }\r\n        .step-card.failed .step-status { color: #d13438; }\r\n        .step-card.pending .step-status { color: var(--vscode-descriptionForeground); }\r\n\r\n        .step-info {\r\n            flex: 1;\r\n            min-width: 0;\r\n        }\r\n        .step-title {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 10px;\r\n            flex-wrap: wrap;\r\n        }\r\n        .step-name {\r\n            font-weight: 600;\r\n            font-size: 0.95em;\r\n        }\r\n        .step-agent {\r\n            font-size: 0.8em;\r\n            color: var(--vscode-descriptionForeground);\r\n            background: var(--vscode-badge-background);\r\n            padding: 2px 8px;\r\n            border-radius: 10px;\r\n        }\r\n        .step-description {\r\n            margin-top: 4px;\r\n            font-size: 0.85em;\r\n            color: var(--vscode-descriptionForeground);\r\n            line-height: 1.4;\r\n        }\r\n\r\n        .step-actions {\r\n            display: flex;\r\n            gap: 4px;\r\n            flex-shrink: 0;\r\n            position: relative;\r\n        }\r\n        .btn-icon {\r\n            width: 28px;\r\n            height: 28px;\r\n            border: none;\r\n            border-radius: 4px;\r\n            background: transparent;\r\n            color: var(--vscode-foreground);\r\n            cursor: pointer;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            font-size: 14px;\r\n        }\r\n        .btn-icon:hover {\r\n            background: var(--vscode-button-secondaryBackground);\r\n        }\r\n        .btn-icon.primary {\r\n            background: var(--vscode-button-background);\r\n            color: var(--vscode-button-foreground);\r\n        }\r\n        .btn-icon.primary:hover {\r\n            background: var(--vscode-button-hoverBackground);\r\n        }\r\n\r\n        .step-menu {\r\n            position: absolute;\r\n            top: 100%;\r\n            right: 0;\r\n            background: var(--vscode-menu-background);\r\n            border: 1px solid var(--vscode-menu-border);\r\n            border-radius: 4px;\r\n            box-shadow: 0 2px 8px rgba(0,0,0,0.3);\r\n            z-index: 100;\r\n            min-width: 150px;\r\n        }\r\n        .step-menu button {\r\n            display: block;\r\n            width: 100%;\r\n            padding: 8px 12px;\r\n            border: none;\r\n            background: transparent;\r\n            color: var(--vscode-menu-foreground);\r\n            text-align: left;\r\n            cursor: pointer;\r\n            font-size: 13px;\r\n        }\r\n        .step-menu button:hover {\r\n            background: var(--vscode-menu-selectionBackground);\r\n        }\r\n\r\n        .step-progress {\r\n            margin-top: 10px;\r\n            height: 3px;\r\n            background: var(--vscode-progressBar-background);\r\n            border-radius: 2px;\r\n            overflow: hidden;\r\n        }\r\n        .progress-bar {\r\n            height: 100%;\r\n            width: 30%;\r\n            background: #0078d4;\r\n            animation: progress-move 1.5s ease-in-out infinite;\r\n        }\r\n        @keyframes progress-move {\r\n            0% { transform: translateX(-100%); }\r\n            100% { transform: translateX(400%); }\r\n        }\r\n\r\n        .step-error {\r\n            margin-top: 8px;\r\n            padding: 8px 12px;\r\n            background: rgba(209, 52, 56, 0.1);\r\n            border: 1px solid #d13438;\r\n            border-radius: 4px;\r\n            color: #d13438;\r\n            font-size: 0.85em;\r\n        }\r\n        .step-error-details {\r\n            margin-top: 8px;\r\n            font-size: 0.8em;\r\n            opacity: 0.9;\r\n        }\r\n        .step-error-actions {\r\n            margin-top: 8px;\r\n            display: flex;\r\n            gap: 8px;\r\n        }\r\n        .step-error-actions button {\r\n            padding: 4px 12px;\r\n            border: 1px solid #d13438;\r\n            background: transparent;\r\n            color: #d13438;\r\n            border-radius: 4px;\r\n            cursor: pointer;\r\n            font-size: 0.85em;\r\n        }\r\n        .step-error-actions button:hover {\r\n            background: rgba(209, 52, 56, 0.2);\r\n        }\r\n        .step-error-actions button.primary {\r\n            background: #d13438;\r\n            color: white;\r\n        }\r\n        .step-error-actions button.primary:hover {\r\n            background: #c02020;\r\n        }\r\n\r\n        .step-meta {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 8px;\r\n            margin-top: 4px;\r\n            font-size: 0.75em;\r\n            color: var(--vscode-descriptionForeground);\r\n            flex-wrap: wrap;\r\n        }\r\n        .step-meta-badge {\r\n            background: var(--vscode-badge-background);\r\n            color: var(--vscode-badge-foreground);\r\n            padding: 2px 6px;\r\n            border-radius: 8px;\r\n        }\r\n        .step-meta-badge.attempts {\r\n            background: rgba(240, 173, 78, 0.2);\r\n            color: #f0ad4e;\r\n        }\r\n        .step-meta-badge.failed {\r\n            background: rgba(209, 52, 56, 0.2);\r\n            color: #d13438;\r\n        }\r\n        .step-meta-timestamp {\r\n            font-family: var(--vscode-editor-font-family);\r\n            font-size: 0.9em;\r\n        }\r\n        .step-meta-sep {\r\n            color: var(--vscode-descriptionForeground);\r\n            opacity: 0.5;\r\n        }\r\n\r\n        .copy-btn {\r\n            background: transparent;\r\n            border: 1px solid var(--vscode-button-secondaryBackground);\r\n            color: var(--vscode-foreground);\r\n            padding: 2px 8px;\r\n            border-radius: 3px;\r\n            font-size: 0.8em;\r\n            cursor: pointer;\r\n            opacity: 0.7;\r\n        }\r\n        .copy-btn:hover {\r\n            opacity: 1;\r\n            background: var(--vscode-button-secondaryBackground);\r\n        }\r\n        .copy-btn.copied {\r\n            color: #107c10;\r\n            border-color: #107c10;\r\n        }\r\n\r\n        .previous-output-toggle {\r\n            font-size: 0.8em;\r\n            color: var(--vscode-textLink-foreground);\r\n            cursor: pointer;\r\n            margin-top: 8px;\r\n        }\r\n        .previous-output-toggle:hover {\r\n            text-decoration: underline;\r\n        }\r\n        .previous-output {\r\n            margin-top: 8px;\r\n            padding: 8px;\r\n            background: var(--vscode-editor-inactiveSelectionBackground);\r\n            border-radius: 4px;\r\n            border-left: 2px solid var(--vscode-descriptionForeground);\r\n        }\r\n        .previous-output-header {\r\n            font-size: 0.75em;\r\n            color: var(--vscode-descriptionForeground);\r\n            margin-bottom: 4px;\r\n        }\r\n\r\n        .step-section {\r\n            margin-top: 10px;\r\n            border: 1px solid var(--vscode-panel-border);\r\n            border-radius: 4px;\r\n            overflow: hidden;\r\n        }\r\n        .section-header {\r\n            padding: 8px 12px;\r\n            background: var(--vscode-editor-inactiveSelectionBackground);\r\n            font-size: 0.85em;\r\n            color: var(--vscode-descriptionForeground);\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n        }\r\n        .section-content {\r\n            padding: 12px;\r\n            background: var(--vscode-textCodeBlock-background);\r\n            max-height: 300px;\r\n            overflow-y: auto;\r\n        }\r\n        .section-content pre {\r\n            margin: 0;\r\n            white-space: pre-wrap;\r\n            word-break: break-word;\r\n            font-family: var(--vscode-editor-font-family);\r\n            font-size: 12px;\r\n            line-height: 1.4;\r\n        }\r\n        .section-content.tool-steps {\r\n            max-height: 400px;\r\n        }\r\n\r\n        /* Tool steps trace (ReAct visualization) */\r\n        .tool-step {\r\n            margin-bottom: 12px;\r\n            padding: 10px;\r\n            background: var(--vscode-editor-inactiveSelectionBackground);\r\n            border-radius: 4px;\r\n            border-left: 3px solid var(--vscode-textLink-foreground);\r\n        }\r\n        .tool-step.failed {\r\n            border-left-color: #d13438;\r\n        }\r\n        .tool-step-header {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 8px;\r\n            margin-bottom: 6px;\r\n        }\r\n        .tool-step-number {\r\n            font-size: 0.75em;\r\n            background: var(--vscode-badge-background);\r\n            color: var(--vscode-badge-foreground);\r\n            padding: 2px 6px;\r\n            border-radius: 8px;\r\n            min-width: 20px;\r\n            text-align: center;\r\n        }\r\n        .tool-step-action {\r\n            font-weight: 600;\r\n            font-size: 0.9em;\r\n            color: var(--vscode-textLink-foreground);\r\n        }\r\n        .tool-step-thought {\r\n            font-size: 0.85em;\r\n            color: var(--vscode-descriptionForeground);\r\n            font-style: italic;\r\n            margin-bottom: 6px;\r\n            line-height: 1.4;\r\n        }\r\n        .tool-step-details {\r\n            font-size: 0.8em;\r\n        }\r\n        .tool-step-label {\r\n            color: var(--vscode-descriptionForeground);\r\n            margin-top: 4px;\r\n            margin-bottom: 2px;\r\n        }\r\n        .tool-step-code {\r\n            background: var(--vscode-textCodeBlock-background);\r\n            padding: 6px 8px;\r\n            border-radius: 3px;\r\n            font-family: var(--vscode-editor-font-family);\r\n            font-size: 11px;\r\n            overflow-x: auto;\r\n            max-height: 100px;\r\n            overflow-y: auto;\r\n        }\r\n        .tool-step-observation {\r\n            border-left: 2px solid var(--vscode-textPreformat-foreground);\r\n            padding-left: 8px;\r\n            margin-top: 4px;\r\n        }\r\n        .tool-step-observation.truncated::after {\r\n            content: '...';\r\n            color: var(--vscode-descriptionForeground);\r\n        }\r\n        .tool-step-expand {\r\n            font-size: 0.75em;\r\n            color: var(--vscode-textLink-foreground);\r\n            cursor: pointer;\r\n            margin-top: 4px;\r\n        }\r\n        .tool-step-expand:hover {\r\n            text-decoration: underline;\r\n        }\r\n\r\n        /* Artifacts section */\r\n        .artifacts-section {\r\n            margin-top: 10px;\r\n            border: 1px solid var(--vscode-panel-border);\r\n            border-radius: 4px;\r\n            overflow: hidden;\r\n        }\r\n        .artifacts-header {\r\n            padding: 8px 12px;\r\n            background: var(--vscode-editor-inactiveSelectionBackground);\r\n            font-size: 0.85em;\r\n            color: var(--vscode-descriptionForeground);\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n        }\r\n        .artifacts-files {\r\n            padding: 8px 12px;\r\n            background: var(--vscode-textCodeBlock-background);\r\n        }\r\n        .artifact-file {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: space-between;\r\n            padding: 6px 8px;\r\n            border-radius: 4px;\r\n            margin-bottom: 4px;\r\n        }\r\n        .artifact-file:hover {\r\n            background: var(--vscode-list-hoverBackground);\r\n        }\r\n        .artifact-file:last-child {\r\n            margin-bottom: 0;\r\n        }\r\n        .artifact-file-path {\r\n            font-family: var(--vscode-editor-font-family);\r\n            font-size: 12px;\r\n            color: var(--vscode-foreground);\r\n            flex: 1;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            white-space: nowrap;\r\n        }\r\n        .artifact-file-actions {\r\n            display: flex;\r\n            gap: 4px;\r\n            flex-shrink: 0;\r\n        }\r\n        .artifact-btn {\r\n            padding: 3px 8px;\r\n            border: 1px solid var(--vscode-button-secondaryBackground);\r\n            background: transparent;\r\n            color: var(--vscode-foreground);\r\n            border-radius: 3px;\r\n            font-size: 11px;\r\n            cursor: pointer;\r\n            opacity: 0.8;\r\n        }\r\n        .artifact-btn:hover {\r\n            opacity: 1;\r\n            background: var(--vscode-button-secondaryBackground);\r\n        }\r\n        .artifact-btn.diff {\r\n            color: var(--vscode-gitDecoration-modifiedResourceForeground);\r\n            border-color: var(--vscode-gitDecoration-modifiedResourceForeground);\r\n        }\r\n\r\n        /* Worktree changes section */\r\n        .changes-section {\r\n            margin: 16px 0;\r\n            border: 1px solid var(--vscode-panel-border);\r\n            border-radius: 6px;\r\n            overflow: hidden;\r\n        }\r\n        .changes-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            padding: 10px 14px;\r\n            background: var(--vscode-editor-inactiveSelectionBackground);\r\n            cursor: pointer;\r\n        }\r\n        .changes-header:hover {\r\n            background: var(--vscode-list-hoverBackground);\r\n        }\r\n        .changes-title {\r\n            font-weight: 600;\r\n            font-size: 0.9em;\r\n        }\r\n        .changes-count {\r\n            font-size: 0.8em;\r\n            background: var(--vscode-badge-background);\r\n            color: var(--vscode-badge-foreground);\r\n            padding: 2px 8px;\r\n            border-radius: 10px;\r\n        }\r\n        .changes-content {\r\n            padding: 12px;\r\n            display: none;\r\n        }\r\n        .changes-content.expanded {\r\n            display: block;\r\n        }\r\n        .changes-group {\r\n            margin-bottom: 12px;\r\n        }\r\n        .changes-group:last-child {\r\n            margin-bottom: 0;\r\n        }\r\n        .changes-group-title {\r\n            font-size: 0.8em;\r\n            color: var(--vscode-descriptionForeground);\r\n            margin-bottom: 6px;\r\n            text-transform: uppercase;\r\n            letter-spacing: 0.5px;\r\n        }\r\n        .change-file {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: space-between;\r\n            padding: 4px 8px;\r\n            border-radius: 3px;\r\n            font-size: 12px;\r\n            font-family: var(--vscode-editor-font-family);\r\n        }\r\n        .change-file:hover {\r\n            background: var(--vscode-list-hoverBackground);\r\n        }\r\n        .change-file-path {\r\n            flex: 1;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            white-space: nowrap;\r\n        }\r\n        .change-file.modified .change-file-path {\r\n            color: var(--vscode-gitDecoration-modifiedResourceForeground);\r\n        }\r\n        .change-file.added .change-file-path {\r\n            color: var(--vscode-gitDecoration-addedResourceForeground);\r\n        }\r\n        .change-file.deleted .change-file-path {\r\n            color: var(--vscode-gitDecoration-deletedResourceForeground);\r\n        }\r\n        .change-file.staged .change-file-path::after {\r\n            content: ' (staged)';\r\n            font-size: 0.85em;\r\n            color: var(--vscode-descriptionForeground);\r\n        }\r\n        .changes-actions {\r\n            display: flex;\r\n            gap: 8px;\r\n            margin-top: 12px;\r\n            padding-top: 12px;\r\n            border-top: 1px solid var(--vscode-panel-border);\r\n        }\r\n\r\n        .approval-buttons {\r\n            display: flex;\r\n            gap: 4px;\r\n        }\r\n        .approval-buttons .btn-icon {\r\n            width: 24px;\r\n            height: 24px;\r\n            font-size: 12px;\r\n        }\r\n        .approval-buttons .approve { color: #107c10; }\r\n        .approval-buttons .reject { color: #d13438; }\r\n\r\n        .chat-messages {\r\n            max-height: 150px;\r\n            overflow-y: auto;\r\n            margin-bottom: 10px;\r\n        }\r\n        .chat-message {\r\n            margin-bottom: 8px;\r\n            padding: 8px 10px;\r\n            border-radius: 4px;\r\n            font-size: 0.85em;\r\n            line-height: 1.4;\r\n        }\r\n        .chat-message.user {\r\n            background: var(--vscode-button-secondaryBackground);\r\n            margin-left: 20%;\r\n        }\r\n        .chat-message.assistant {\r\n            background: var(--vscode-editor-inactiveSelectionBackground);\r\n            margin-right: 20%;\r\n        }\r\n        .chat-input-row {\r\n            display: flex;\r\n            gap: 8px;\r\n        }\r\n        .chat-input {\r\n            flex: 1;\r\n            padding: 6px 10px;\r\n            border: 1px solid var(--vscode-input-border);\r\n            border-radius: 3px;\r\n            background: var(--vscode-input-background);\r\n            color: var(--vscode-input-foreground);\r\n            font-size: 12px;\r\n        }\r\n        .chat-input:focus {\r\n            outline: 1px solid var(--vscode-focusBorder);\r\n        }\r\n        .btn.btn-small {\r\n            padding: 4px 10px;\r\n            font-size: 12px;\r\n        }\r\n\r\n        .step-output {\r\n            margin-top: 12px;\r\n            border: 1px solid var(--vscode-panel-border);\r\n            border-radius: 4px;\r\n            overflow: hidden;\r\n        }\r\n        .output-header {\r\n            padding: 8px 12px;\r\n            background: var(--vscode-editor-inactiveSelectionBackground);\r\n            cursor: pointer;\r\n            font-size: 0.85em;\r\n            color: var(--vscode-descriptionForeground);\r\n        }\r\n        .output-header:hover {\r\n            background: var(--vscode-list-hoverBackground);\r\n        }\r\n        .output-content {\r\n            padding: 12px;\r\n            background: var(--vscode-textCodeBlock-background);\r\n            max-height: 400px;\r\n            overflow-y: auto;\r\n        }\r\n        .output-content pre {\r\n            margin: 0;\r\n            white-space: pre-wrap;\r\n            word-break: break-word;\r\n            font-family: var(--vscode-editor-font-family);\r\n            font-size: 12px;\r\n            line-height: 1.4;\r\n        }\r\n\r\n        .btn {\r\n            padding: 6px 14px;\r\n            border: none;\r\n            border-radius: 4px;\r\n            cursor: pointer;\r\n            font-size: 13px;\r\n            font-weight: 500;\r\n            display: inline-flex;\r\n            align-items: center;\r\n            gap: 6px;\r\n        }\r\n        .btn:disabled {\r\n            opacity: 0.5;\r\n            cursor: not-allowed;\r\n        }\r\n        .btn-primary {\r\n            background: var(--vscode-button-background);\r\n            color: var(--vscode-button-foreground);\r\n        }\r\n        .btn-primary:hover:not(:disabled) {\r\n            background: var(--vscode-button-hoverBackground);\r\n        }\r\n        .btn-secondary {\r\n            background: var(--vscode-button-secondaryBackground);\r\n            color: var(--vscode-button-secondaryForeground);\r\n        }\r\n        .btn-info {\r\n            background: #0e639c;\r\n            color: white;\r\n            border: 1px solid #1177bb;\r\n        }\r\n        .btn-info:hover {\r\n            background: #1177bb;\r\n        }\r\n        .btn-danger {\r\n            background: #d13438;\r\n            color: white;\r\n        }\r\n        .btn-success {\r\n            background: #107c10;\r\n            color: white;\r\n        }\r\n        .btn-success:hover {\r\n            background: #0e6b0e;\r\n        }\r\n\r\n        .phase-section {\r\n            margin-bottom: 16px;\r\n            padding: 12px 16px;\r\n            background: var(--vscode-editor-inactiveSelectionBackground);\r\n            border-radius: 6px;\r\n            border-left: 3px solid var(--vscode-badge-background);\r\n        }\r\n        .phase-section.completed {\r\n            border-left-color: #107c10;\r\n        }\r\n        .phase-title {\r\n            font-weight: 600;\r\n            margin-bottom: 8px;\r\n        }\r\n        .analysis-content {\r\n            font-size: 0.9em;\r\n            max-height: 400px;\r\n            overflow-y: auto;\r\n        }\r\n        .analysis-text {\r\n            color: var(--vscode-foreground);\r\n            line-height: 1.6;\r\n        }\r\n        .analysis-text h4 {\r\n            margin: 16px 0 8px 0;\r\n            color: var(--vscode-foreground);\r\n            font-size: 1em;\r\n            border-bottom: 1px solid var(--vscode-panel-border);\r\n            padding-bottom: 4px;\r\n        }\r\n        .analysis-text ul {\r\n            margin: 8px 0;\r\n            padding-left: 20px;\r\n        }\r\n        .analysis-text li {\r\n            margin: 4px 0;\r\n        }\r\n        .analysis-text p {\r\n            margin: 8px 0;\r\n        }\r\n\r\n        .original-request {\r\n            margin-top: 24px;\r\n            padding: 16px;\r\n            background: var(--vscode-textBlockQuote-background);\r\n            border-left: 3px solid var(--vscode-textBlockQuote-border);\r\n            border-radius: 4px;\r\n        }\r\n        .original-request h4 {\r\n            margin: 0 0 8px 0;\r\n            font-size: 0.9em;\r\n            color: var(--vscode-descriptionForeground);\r\n        }\r\n\r\n        .loading {\r\n            display: none;\r\n            align-items: center;\r\n            gap: 8px;\r\n            color: var(--vscode-descriptionForeground);\r\n        }\r\n        .loading.active { display: flex; }\r\n        .spinner {\r\n            width: 16px;\r\n            height: 16px;\r\n            border: 2px solid var(--vscode-badge-background);\r\n            border-top-color: transparent;\r\n            border-radius: 50%;\r\n            animation: spin 1s linear infinite;\r\n        }\r\n        @keyframes spin {\r\n            to { transform: rotate(360deg); }\r\n        }\r\n        .loading-overlay {\r\n            display: none;\r\n            padding: 16px;\r\n            background: var(--vscode-editor-background);\r\n            border: 1px solid var(--vscode-badge-background);\r\n            border-radius: 4px;\r\n            margin-top: 8px;\r\n        }\r\n        .loading-overlay.active {\r\n            display: block;\r\n        }\r\n        .loading-content {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 12px;\r\n            color: var(--vscode-foreground);\r\n        }\r\n        .loading-content .spinner {\r\n            width: 20px;\r\n            height: 20px;\r\n        }\r\n        button:disabled {\r\n            opacity: 0.5;\r\n            cursor: not-allowed;\r\n        }\r\n\r\n        /* Modal Dialog Styles */\r\n        .modal-overlay {\r\n            position: fixed;\r\n            top: 0;\r\n            left: 0;\r\n            right: 0;\r\n            bottom: 0;\r\n            background: rgba(0, 0, 0, 0.6);\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            z-index: 1000;\r\n        }\r\n        .modal-dialog {\r\n            background: var(--vscode-editor-background);\r\n            border: 1px solid var(--vscode-panel-border);\r\n            border-radius: 8px;\r\n            padding: 24px;\r\n            max-width: 400px;\r\n            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\r\n        }\r\n        .modal-content {\r\n            text-align: center;\r\n        }\r\n        .modal-icon {\r\n            font-size: 2.5em;\r\n            margin-bottom: 16px;\r\n        }\r\n        .modal-message {\r\n            margin-bottom: 20px;\r\n            color: var(--vscode-foreground);\r\n            line-height: 1.5;\r\n        }\r\n        .modal-buttons {\r\n            display: flex;\r\n            gap: 12px;\r\n            justify-content: center;\r\n        }\r\n        .modal-buttons .btn {\r\n            min-width: 100px;\r\n        }\r\n\r\n        .action-bar {\r\n            display: flex;\r\n            gap: 8px;\r\n            margin-bottom: 20px;\r\n            padding: 12px;\r\n            background: var(--vscode-toolbar-hoverBackground);\r\n            border-radius: 6px;\r\n            align-items: center;\r\n        }\r\n        .action-group {\r\n            display: flex;\r\n            gap: 8px;\r\n            align-items: center;\r\n        }\r\n        .action-spacer {\r\n            flex: 1;\r\n        }\r\n        .status-text {\r\n            font-weight: 500;\r\n            padding: 6px 12px;\r\n        }\r\n        .status-text.success {\r\n            color: #107c10;\r\n        }\r\n        .status-text.error {\r\n            color: #d13438;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"header\">\r\n        <h1 class=\"title\"> ${this.escapeHtml(workflow.title)}</h1>\r\n        <span class=\"status ${statusClass}\" id=\"status\">${workflow.status}</span>\r\n    </div>\r\n\r\n    <div class=\"meta\">\r\n        ${workflow.patternName ? `<div class=\"meta-item\"> Pattern: <strong>${workflow.patternName}</strong></div>` : ''}\r\n        ${workflow.gitBranch ? `<div class=\"meta-item\"> ${workflow.gitBranch}</div>` : ''}\r\n        ${workflow.worktreePath ? `<div class=\"meta-item\"> ${workflow.worktreePath}</div>` : ''}\r\n    </div>\r\n\r\n    ${workflow.worktreePath ? `\r\n    <div class=\"changes-section\" id=\"changesSection\">\r\n        <div class=\"changes-header\" onclick=\"toggleChanges()\">\r\n            <span class=\"changes-title\"> Worktree Changes</span>\r\n            <span class=\"changes-count\" id=\"changesCount\">loading...</span>\r\n        </div>\r\n        <div class=\"changes-content\" id=\"changesContent\">\r\n            <div id=\"changesLoading\" style=\"text-align: center; padding: 20px; color: var(--vscode-descriptionForeground);\">\r\n                Loading changes...\r\n            </div>\r\n        </div>\r\n    </div>\r\n    ` : ''}\r\n\r\n    <div class=\"action-bar\" id=\"actionBar\">\r\n        ${this.getActionButtons(workflow)}\r\n    </div>\r\n    <div id=\"loadingOverlay\" class=\"loading-overlay\">\r\n        <div class=\"loading-content\">\r\n            <div class=\"spinner\"></div>\r\n            <span id=\"loadingText\">Processing...</span>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Custom Modal Dialog (replaces confirm/alert which are blocked in sandboxed webviews) -->\r\n    <div id=\"modalOverlay\" class=\"modal-overlay\" style=\"display: none;\">\r\n        <div class=\"modal-dialog\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-icon\" id=\"modalIcon\"></div>\r\n                <div class=\"modal-message\" id=\"modalMessage\"></div>\r\n                <div class=\"modal-buttons\" id=\"modalButtons\"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"chat-section\">\r\n        <div class=\"chat-input-container\">\r\n            <input type=\"text\" class=\"chat-input\" id=\"chatInput\"\r\n                   placeholder=\"${this.getChatPlaceholder(workflow)}\"\r\n                   ${workflow.status === 'Completed' || workflow.status === 'Cancelled' ? 'disabled' : ''}>\r\n            <button class=\"btn btn-primary\" id=\"chatSend\" onclick=\"sendChat()\"\r\n                    ${workflow.status === 'Completed' || workflow.status === 'Cancelled' ? 'disabled' : ''}>\r\n                Send\r\n            </button>\r\n        </div>\r\n        <div id=\"chatLoading\" class=\"loading\">\r\n            <div class=\"spinner\"></div>\r\n            <span>Thinking...</span>\r\n        </div>\r\n        <div id=\"chatResponse\" class=\"chat-response\" ${workflow.chatHistory ? '' : 'style=\"display: none;\"'}>${this.renderWorkflowChatHistory(workflow)}</div>\r\n    </div>\r\n\r\n    <h3>Timeline</h3>\r\n    <div class=\"timeline\" id=\"timeline\">\r\n        ${stepsHtml}\r\n    </div>\r\n\r\n    ${workflow.analyzedContext ? `\r\n    <div class=\"phase-section completed\">\r\n        <div class=\"phase-title\"> Analyzed</div>\r\n        <div class=\"analysis-content\">\r\n            ${this.formatAnalyzedContext(workflow.analyzedContext)}\r\n        </div>\r\n    </div>\r\n    ` : ''}\r\n\r\n    <div class=\"original-request\">\r\n        <h4>Original Request</h4>\r\n        <div>${this.escapeHtml(workflow.description || 'No description provided')}</div>\r\n    </div>\r\n\r\n    <script>\r\n        const vscode = acquireVsCodeApi();\r\n        const workflowId = '${workflow.id}';\r\n        let workflow = ${JSON.stringify(workflow)};\r\n\r\n        function sendChat() {\r\n            const input = document.getElementById('chatInput');\r\n            const text = input.value.trim();\r\n            if (!text) return;\r\n            \r\n            // Show the user's message in the chat area\r\n            const responseDiv = document.getElementById('chatResponse');\r\n            responseDiv.innerHTML = '<div class=\"chat-user-message\"><strong>You:</strong> ' + escapeHtml(text) + '</div>';\r\n            responseDiv.style.display = 'block';\r\n            \r\n            // Show loading indicator\r\n            document.getElementById('chatLoading').classList.add('active');\r\n            \r\n            // Disable input while processing\r\n            input.disabled = true;\r\n            document.getElementById('chatSend').disabled = true;\r\n            \r\n            vscode.postMessage({ type: 'chat', text });\r\n            input.value = '';\r\n        }\r\n        \r\n        function escapeHtml(text) {\r\n            const div = document.createElement('div');\r\n            div.textContent = text;\r\n            return div.innerHTML;\r\n        }\r\n\r\n        document.getElementById('chatInput').addEventListener('keypress', (e) => {\r\n            if (e.key === 'Enter') sendChat();\r\n        });\r\n\r\n        function setLoading(action, isLoading, stepId = null) {\r\n            const actionBar = document.getElementById('actionBar');\r\n            const loadingOverlay = document.getElementById('loadingOverlay');\r\n            const loadingText = document.getElementById('loadingText');\r\n            \r\n            if (isLoading) {\r\n                // Disable all buttons\r\n                actionBar.querySelectorAll('button').forEach(btn => btn.disabled = true);\r\n                // Show loading overlay with appropriate message\r\n                const messages = {\r\n                    'enrich': ' Enriching workflow with codebase context...',\r\n                    'index': ' Indexing codebase for RAG...',\r\n                    'plan': ' Creating execution plan...',\r\n                    'execute': ' Executing step...',\r\n                    'executeAll': ' Executing all pending steps...',\r\n                    'complete': ' Completing workflow...',\r\n                    'cancel': ' Cancelling...',\r\n                    'skip': ' Skipping step...',\r\n                    'reset': ' Resetting step...',\r\n                    'reassign': ' Reassigning step...',\r\n                    'finalize': ' Finalizing workflow (commit, push, PR)...'\r\n                };\r\n                loadingText.textContent = messages[action] || 'Processing...';\r\n                loadingOverlay.classList.add('active');\r\n            } else {\r\n                loadingOverlay.classList.remove('active');\r\n                // Re-enable buttons (they'll be refreshed anyway)\r\n                actionBar.querySelectorAll('button').forEach(btn => btn.disabled = false);\r\n            }\r\n        }\r\n\r\n        function executeStep(stepId) {\r\n            setLoading('execute', true, stepId);\r\n            vscode.postMessage({ type: 'executeStep', stepId });\r\n        }\r\n\r\n        // Toggle collapsible sections (Output/Chat)\r\n        function toggleStepSection(stepId, section) {\r\n            const sectionEl = document.getElementById('step-' + section + '-' + stepId);\r\n            if (sectionEl) {\r\n                sectionEl.classList.toggle('collapsed');\r\n            }\r\n        }\r\n\r\n        // Open step chat (show chat panel)\r\n        function openStepChat(stepId) {\r\n            const chatEl = document.getElementById('step-chat-' + stepId);\r\n            if (chatEl) {\r\n                chatEl.classList.toggle('hidden');\r\n                // Focus the input if now visible\r\n                if (!chatEl.classList.contains('hidden')) {\r\n                    const input = chatEl.querySelector('input');\r\n                    if (input) input.focus();\r\n                }\r\n            }\r\n        }\r\n\r\n        // Skip a step\r\n        function skipStep(stepId) {\r\n            if (confirm('Are you sure you want to skip this step?')) {\r\n                vscode.postMessage({ type: 'skipStep', stepId });\r\n            }\r\n        }\r\n\r\n        // Reset a step back to pending\r\n        function resetStep(stepId) {\r\n            if (confirm('Reset this step to pending? This will clear any output and allow re-execution.')) {\r\n                vscode.postMessage({ type: 'resetStep', stepId });\r\n            }\r\n        }\r\n\r\n        // Open step menu (for additional options)\r\n        function openStepMenu(stepId) {\r\n            // For now, show a simple alert - in future this could be a dropdown\r\n            alert('Additional options coming soon: Edit prompt, View history, Retry with modifications');\r\n        }\r\n\r\n        // Approve step output\r\n        function approveOutput(stepId) {\r\n            vscode.postMessage({ type: 'approveStepOutput', stepId });\r\n        }\r\n\r\n        // Reject step output (request regeneration)\r\n        function rejectOutput(stepId) {\r\n            const reason = prompt('Why should this output be regenerated? (optional)');\r\n            vscode.postMessage({ type: 'rejectStepOutput', stepId, reason: reason || '' });\r\n        }\r\n\r\n        // Send chat message for a step\r\n        function sendStepChat(stepId) {\r\n            const input = document.getElementById('chat-input-' + stepId);\r\n            if (input && input.value.trim()) {\r\n                const message = input.value.trim();\r\n                input.value = '';\r\n                \r\n                // Add user message to chat immediately\r\n                const messagesEl = document.querySelector('#step-chat-' + stepId + ' .chat-messages');\r\n                if (messagesEl) {\r\n                    messagesEl.innerHTML += '<div class=\"chat-message user\">' + escapeHtml(message) + '</div>';\r\n                    messagesEl.scrollTop = messagesEl.scrollHeight;\r\n                }\r\n                \r\n                vscode.postMessage({ type: 'stepChat', stepId, message });\r\n            }\r\n        }\r\n\r\n        // Handle Enter key in chat input\r\n        function handleChatKeypress(event, stepId) {\r\n            if (event.key === 'Enter' && !event.shiftKey) {\r\n                event.preventDefault();\r\n                sendStepChat(stepId);\r\n            }\r\n        }\r\n\r\n        // Helper to escape HTML\r\n        function escapeHtml(text) {\r\n            const div = document.createElement('div');\r\n            div.textContent = text;\r\n            return div.innerHTML;\r\n        }\r\n\r\n        function enrich() {\r\n            setLoading('enrich', true);\r\n            vscode.postMessage({ type: 'enrich' });\r\n        }\r\n\r\n        function indexCodebase() {\r\n            setLoading('index', true);\r\n            vscode.postMessage({ type: 'indexCodebase' });\r\n        }\r\n\r\n        function indexAndEnrich() {\r\n            setLoading('index', true);\r\n            vscode.postMessage({ type: 'indexAndEnrich' });\r\n        }\r\n\r\n        function plan() {\r\n            setLoading('plan', true);\r\n            vscode.postMessage({ type: 'plan' });\r\n        }\r\n\r\n        function complete() {\r\n            setLoading('complete', true);\r\n            vscode.postMessage({ type: 'complete' });\r\n        }\r\n\r\n        function cancel() {\r\n            setLoading('cancel', true);\r\n            vscode.postMessage({ type: 'cancel' });\r\n        }\r\n\r\n        function executeAllPending() {\r\n            setLoading('executeAll', true);\r\n            vscode.postMessage({ type: 'executeAllPending' });\r\n        }\r\n\r\n        function refresh() {\r\n            vscode.postMessage({ type: 'refresh' });\r\n        }\r\n\r\n        function openPullRequest(url) {\r\n            vscode.postMessage({ type: 'openUrl', url: url });\r\n        }\r\n\r\n        function showFinalizeDialog() {\r\n            // Create finalize dialog if it doesn't exist\r\n            let dialog = document.getElementById('finalizeDialog');\r\n            if (!dialog) {\r\n                dialog = document.createElement('div');\r\n                dialog.id = 'finalizeDialog';\r\n                dialog.className = 'modal-overlay';\r\n                dialog.style.display = 'none';\r\n                dialog.innerHTML = \\`\r\n                    <div class=\"modal-dialog\" style=\"max-width: 450px;\">\r\n                        <div class=\"modal-content\">\r\n                            <div class=\"modal-icon\"></div>\r\n                            <div class=\"modal-message\" style=\"font-size: 1.2em; font-weight: bold;\">Finalize Workflow</div>\r\n                        </div>\r\n                        <div style=\"margin: 16px 0; text-align: left;\">\r\n                            <label style=\"display: block; margin-bottom: 12px;\">\r\n                                <div style=\"margin-bottom: 4px;\"><strong>Commit Message</strong></div>\r\n                                <input type=\"text\" id=\"finalizeCommitMsg\" \r\n                                    style=\"width: 100%; padding: 8px; box-sizing: border-box; border: 1px solid var(--vscode-input-border); background: var(--vscode-input-background); color: var(--vscode-input-foreground); border-radius: 4px;\"\r\n                                    placeholder=\"feat: workflow changes\">\r\n                            </label>\r\n                            <label style=\"display: flex; align-items: center; margin-bottom: 12px; cursor: pointer;\">\r\n                                <input type=\"checkbox\" id=\"finalizeCreatePr\" checked style=\"margin-right: 8px;\">\r\n                                <span>Create Pull Request</span>\r\n                            </label>\r\n                            <label style=\"display: block; margin-bottom: 12px;\">\r\n                                <div style=\"margin-bottom: 4px;\"><strong>PR Title</strong></div>\r\n                                <input type=\"text\" id=\"finalizePrTitle\" \r\n                                    style=\"width: 100%; padding: 8px; box-sizing: border-box; border: 1px solid var(--vscode-input-border); background: var(--vscode-input-background); color: var(--vscode-input-foreground); border-radius: 4px;\"\r\n                                    placeholder=\"Workflow title\">\r\n                            </label>\r\n                            <label style=\"display: flex; align-items: center; cursor: pointer;\">\r\n                                <input type=\"checkbox\" id=\"finalizeDraft\" checked style=\"margin-right: 8px;\">\r\n                                <span>Create as Draft PR</span>\r\n                            </label>\r\n                        </div>\r\n                        <div class=\"modal-buttons\" id=\"finalizeButtons\"></div>\r\n                    </div>\r\n                \\`;\r\n                document.body.appendChild(dialog);\r\n            }\r\n            \r\n            // Pre-fill with workflow title\r\n            document.getElementById('finalizeCommitMsg').value = 'feat: ' + workflow.title;\r\n            document.getElementById('finalizePrTitle').value = workflow.title;\r\n            \r\n            // Set up buttons\r\n            const buttonsDiv = document.getElementById('finalizeButtons');\r\n            buttonsDiv.innerHTML = '';\r\n            \r\n            const submitBtn = document.createElement('button');\r\n            submitBtn.className = 'btn btn-primary';\r\n            submitBtn.textContent = ' Finalize';\r\n            submitBtn.onclick = () => {\r\n                const commitMessage = document.getElementById('finalizeCommitMsg').value;\r\n                const createPr = document.getElementById('finalizeCreatePr').checked;\r\n                const prTitle = document.getElementById('finalizePrTitle').value;\r\n                const draft = document.getElementById('finalizeDraft').checked;\r\n                \r\n                dialog.style.display = 'none';\r\n                setLoading('finalize', true);\r\n                vscode.postMessage({ \r\n                    type: 'finalize',\r\n                    commitMessage,\r\n                    createPullRequest: createPr,\r\n                    prTitle,\r\n                    draft\r\n                });\r\n            };\r\n            \r\n            const cancelBtn = document.createElement('button');\r\n            cancelBtn.className = 'btn btn-secondary';\r\n            cancelBtn.textContent = 'Cancel';\r\n            cancelBtn.onclick = () => {\r\n                dialog.style.display = 'none';\r\n            };\r\n            \r\n            buttonsDiv.appendChild(submitBtn);\r\n            buttonsDiv.appendChild(cancelBtn);\r\n            \r\n            dialog.style.display = 'flex';\r\n        }\r\n\r\n        // Modal dialog functions (replace confirm/alert which are blocked in sandboxed webviews)\r\n        function showModal(icon, message, buttons) {\r\n            document.getElementById('modalIcon').textContent = icon;\r\n            document.getElementById('modalMessage').textContent = message;\r\n            const buttonsDiv = document.getElementById('modalButtons');\r\n            buttonsDiv.innerHTML = '';\r\n            buttons.forEach(btn => {\r\n                const button = document.createElement('button');\r\n                button.className = 'btn ' + (btn.primary ? 'btn-primary' : 'btn-secondary');\r\n                button.textContent = btn.text;\r\n                button.onclick = btn.action;\r\n                buttonsDiv.appendChild(button);\r\n            });\r\n            document.getElementById('modalOverlay').style.display = 'flex';\r\n        }\r\n\r\n        function hideModal() {\r\n            document.getElementById('modalOverlay').style.display = 'none';\r\n            // Also hide input modal if open\r\n            const inputModal = document.getElementById('inputModalOverlay');\r\n            if (inputModal) inputModal.style.display = 'none';\r\n        }\r\n\r\n        // Input modal for prompts (replaces prompt() which is blocked)\r\n        function showInputModal(icon, message, defaultValue, onSubmit) {\r\n            // Check if input modal exists, create if not\r\n            let inputModal = document.getElementById('inputModalOverlay');\r\n            if (!inputModal) {\r\n                inputModal = document.createElement('div');\r\n                inputModal.id = 'inputModalOverlay';\r\n                inputModal.className = 'modal-overlay';\r\n                inputModal.innerHTML = \\`\r\n                    <div class=\"modal\">\r\n                        <div class=\"modal-icon\" id=\"inputModalIcon\"></div>\r\n                        <div class=\"modal-message\" id=\"inputModalMessage\"></div>\r\n                        <input type=\"text\" id=\"inputModalInput\" class=\"modal-input\" style=\"width: 100%; padding: 8px; margin: 12px 0; border: 1px solid var(--vscode-input-border); background: var(--vscode-input-background); color: var(--vscode-input-foreground); border-radius: 4px;\">\r\n                        <div class=\"modal-buttons\" id=\"inputModalButtons\"></div>\r\n                    </div>\r\n                \\`;\r\n                document.body.appendChild(inputModal);\r\n            }\r\n            \r\n            document.getElementById('inputModalIcon').textContent = icon;\r\n            document.getElementById('inputModalMessage').textContent = message;\r\n            const input = document.getElementById('inputModalInput');\r\n            input.value = defaultValue || '';\r\n            \r\n            const buttonsDiv = document.getElementById('inputModalButtons');\r\n            buttonsDiv.innerHTML = '';\r\n            \r\n            const submitBtn = document.createElement('button');\r\n            submitBtn.className = 'btn btn-primary';\r\n            submitBtn.textContent = 'OK';\r\n            submitBtn.onclick = () => {\r\n                const value = input.value;\r\n                inputModal.style.display = 'none';\r\n                onSubmit(value);\r\n            };\r\n            \r\n            const cancelBtn = document.createElement('button');\r\n            cancelBtn.className = 'btn btn-secondary';\r\n            cancelBtn.textContent = 'Cancel';\r\n            cancelBtn.onclick = () => {\r\n                inputModal.style.display = 'none';\r\n            };\r\n            \r\n            buttonsDiv.appendChild(submitBtn);\r\n            buttonsDiv.appendChild(cancelBtn);\r\n            \r\n            inputModal.style.display = 'flex';\r\n            input.focus();\r\n            input.select();\r\n            \r\n            // Handle Enter key\r\n            input.onkeypress = (e) => {\r\n                if (e.key === 'Enter') {\r\n                    submitBtn.click();\r\n                }\r\n            };\r\n        }\r\n\r\n        function openWorkspace() {\r\n            vscode.postMessage({\r\n                type: 'openWorkspace',\r\n                worktreePath: workflow.worktreePath,\r\n                gitBranch: workflow.gitBranch\r\n            });\r\n        }\r\n\r\n        // Worktree changes functionality\r\n        let changesExpanded = false;\r\n        let changesLoaded = false;\r\n\r\n        function toggleChanges() {\r\n            changesExpanded = !changesExpanded;\r\n            const content = document.getElementById('changesContent');\r\n            if (content) {\r\n                content.classList.toggle('expanded', changesExpanded);\r\n            }\r\n            if (changesExpanded && !changesLoaded) {\r\n                loadWorktreeChanges();\r\n            }\r\n        }\r\n\r\n        function loadWorktreeChanges() {\r\n            if (workflow.worktreePath) {\r\n                vscode.postMessage({\r\n                    type: 'getWorktreeChanges',\r\n                    worktreePath: workflow.worktreePath\r\n                });\r\n            }\r\n        }\r\n\r\n        function openWorktreeInExplorer() {\r\n            vscode.postMessage({\r\n                type: 'openWorktreeInExplorer',\r\n                worktreePath: workflow.worktreePath\r\n            });\r\n        }\r\n\r\n        function renderWorktreeChanges(status) {\r\n            changesLoaded = true;\r\n            const content = document.getElementById('changesContent');\r\n            const countEl = document.getElementById('changesCount');\r\n            \r\n            if (!status.success) {\r\n                if (content) content.innerHTML = '<div style=\"color: var(--vscode-errorForeground); padding: 10px;\">Failed to load changes: ' + escapeHtml(status.error || 'Unknown error') + '</div>';\r\n                if (countEl) countEl.textContent = 'error';\r\n                return;\r\n            }\r\n\r\n            const modified = status.modifiedFiles || [];\r\n            const untracked = status.untrackedFiles || [];\r\n            const staged = status.stagedFiles || [];\r\n            const total = modified.length + untracked.length + staged.length;\r\n\r\n            if (countEl) countEl.textContent = total > 0 ? total + ' files' : 'clean';\r\n\r\n            if (total === 0) {\r\n                if (content) content.innerHTML = '<div style=\"color: var(--vscode-descriptionForeground); padding: 10px; text-align: center;\">No changes in worktree</div>';\r\n                return;\r\n            }\r\n\r\n            let html = '';\r\n            \r\n            if (staged.length > 0) {\r\n                html += '<div class=\"changes-group\"><div class=\"changes-group-title\">Staged</div>';\r\n                staged.forEach(f => {\r\n                    html += '<div class=\"change-file staged modified\"><span class=\"change-file-path\">' + escapeHtml(f) + '</span>' +\r\n                        '<button class=\"artifact-btn\" onclick=\"openFile(\\\\'' + escapeHtml(f) + '\\\\')\">Open</button>' +\r\n                        '<button class=\"artifact-btn diff\" onclick=\"openDiff(\\\\'' + escapeHtml(f) + '\\\\')\">Diff</button></div>';\r\n                });\r\n                html += '</div>';\r\n            }\r\n            \r\n            if (modified.length > 0) {\r\n                html += '<div class=\"changes-group\"><div class=\"changes-group-title\">Modified</div>';\r\n                modified.forEach(f => {\r\n                    html += '<div class=\"change-file modified\"><span class=\"change-file-path\">' + escapeHtml(f) + '</span>' +\r\n                        '<button class=\"artifact-btn\" onclick=\"openFile(\\\\'' + escapeHtml(f) + '\\\\')\">Open</button>' +\r\n                        '<button class=\"artifact-btn diff\" onclick=\"openDiff(\\\\'' + escapeHtml(f) + '\\\\')\">Diff</button></div>';\r\n                });\r\n                html += '</div>';\r\n            }\r\n            \r\n            if (untracked.length > 0) {\r\n                html += '<div class=\"changes-group\"><div class=\"changes-group-title\">Untracked</div>';\r\n                untracked.forEach(f => {\r\n                    html += '<div class=\"change-file added\"><span class=\"change-file-path\">' + escapeHtml(f) + '</span>' +\r\n                        '<button class=\"artifact-btn\" onclick=\"openFile(\\\\'' + escapeHtml(f) + '\\\\')\">Open</button></div>';\r\n                });\r\n                html += '</div>';\r\n            }\r\n\r\n            html += '<div class=\"changes-actions\">' +\r\n                '<button class=\"btn btn-small\" onclick=\"openWorktreeInExplorer()\"> Open in Explorer</button>' +\r\n                '<button class=\"btn btn-small\" onclick=\"loadWorktreeChanges()\"> Refresh</button>' +\r\n                '</div>';\r\n\r\n            if (content) content.innerHTML = html;\r\n        }\r\n\r\n        function toggleOutput(stepId) {\r\n            const el = document.getElementById('output-section-' + stepId);\r\n            if (el) {\r\n                el.style.display = el.style.display === 'none' ? 'block' : 'none';\r\n            }\r\n        }\r\n\r\n        function toggleChat(stepId) {\r\n            const el = document.getElementById('chat-section-' + stepId);\r\n            if (el) {\r\n                el.style.display = el.style.display === 'none' ? 'block' : 'none';\r\n                // Focus the input if now visible\r\n                if (el.style.display !== 'none') {\r\n                    const input = document.getElementById('chat-input-' + stepId);\r\n                    if (input) input.focus();\r\n                }\r\n            }\r\n        }\r\n\r\n        function toggleToolSteps(stepId) {\r\n            const el = document.getElementById('tool-steps-section-' + stepId);\r\n            if (el) {\r\n                el.style.display = el.style.display === 'none' ? 'block' : 'none';\r\n            }\r\n        }\r\n\r\n        function toggleArtifacts(stepId) {\r\n            const el = document.getElementById('artifacts-section-' + stepId);\r\n            if (el) {\r\n                el.style.display = el.style.display === 'none' ? 'block' : 'none';\r\n            }\r\n        }\r\n\r\n        function openFile(filePath) {\r\n            vscode.postMessage({ type: 'openFile', filePath: filePath, worktreePath: worktreePath });\r\n        }\r\n\r\n        function openDiff(filePath) {\r\n            vscode.postMessage({ type: 'openDiff', filePath: filePath, worktreePath: worktreePath });\r\n        }\r\n\r\n        function togglePreviousOutput(stepId) {\r\n            const el = document.getElementById('previous-output-' + stepId);\r\n            if (el) {\r\n                el.style.display = el.style.display === 'none' ? 'block' : 'none';\r\n            }\r\n        }\r\n\r\n        function copyToClipboard(text, btnEl) {\r\n            navigator.clipboard.writeText(text).then(() => {\r\n                const original = btnEl.textContent;\r\n                btnEl.textContent = ' Copied';\r\n                btnEl.classList.add('copied');\r\n                setTimeout(() => {\r\n                    btnEl.textContent = original;\r\n                    btnEl.classList.remove('copied');\r\n                }, 1500);\r\n            });\r\n        }\r\n\r\n        function copyStepOutput(stepId) {\r\n            const outputEl = document.querySelector('#output-section-' + stepId + ' pre');\r\n            if (outputEl) {\r\n                copyToClipboard(outputEl.textContent, event.target);\r\n            }\r\n        }\r\n\r\n        // Store full observations for expansion\r\n        const fullObservations = {};\r\n        function toggleFullObservation(clickEl, stepId, toolIndex) {\r\n            const key = stepId + '-' + toolIndex;\r\n            const codeEl = clickEl.previousElementSibling?.querySelector('.tool-step-code');\r\n            if (!codeEl) return;\r\n            \r\n            if (fullObservations[key]) {\r\n                // Already expanded, collapse it\r\n                const truncated = fullObservations[key].substring(0, 500);\r\n                codeEl.textContent = truncated;\r\n                clickEl.textContent = 'Show more';\r\n                delete fullObservations[key];\r\n            } else {\r\n                // Need to fetch full observation - for now just indicate it's shown\r\n                // In future could fetch from API\r\n                clickEl.textContent = 'Show less';\r\n                fullObservations[key] = codeEl.textContent; // Store current (may still be truncated)\r\n            }\r\n        }\r\n\r\n        function toggleStepMenu(stepId) {\r\n            const el = document.getElementById('menu-' + stepId);\r\n            if (el) {\r\n                el.style.display = el.style.display === 'none' ? 'block' : 'none';\r\n            }\r\n        }\r\n\r\n        function skipStep(stepId) {\r\n            if (confirm('Are you sure you want to skip this step?')) {\r\n                vscode.postMessage({ type: 'skipStep', stepId });\r\n            }\r\n        }\r\n\r\n        function resetStep(stepId) {\r\n            if (confirm('Reset this step to pending? This will clear any output and allow re-execution.')) {\r\n                vscode.postMessage({ type: 'resetStep', stepId });\r\n            }\r\n        }\r\n\r\n        function reassignStep(stepId) {\r\n            const agent = prompt('Enter agent ID (e.g., coding-agent, documentation-agent, code-review-agent):');\r\n            if (agent && agent.trim()) {\r\n                vscode.postMessage({ type: 'reassignStep', stepId, agentId: agent.trim() });\r\n            }\r\n        }\r\n\r\n        function editDescription(stepId) {\r\n            const stepCard = document.querySelector(\\`[data-step-id=\"\\${stepId}\"]\\`);\r\n            const descEl = stepCard?.querySelector('.step-description');\r\n            const currentDesc = descEl?.textContent || '';\r\n            const newDesc = prompt('Edit step description:', currentDesc);\r\n            if (newDesc !== null && newDesc !== currentDesc) {\r\n                vscode.postMessage({ type: 'updateStepDescription', stepId, description: newDesc });\r\n            }\r\n        }\r\n\r\n        function viewContext(stepId) {\r\n            vscode.postMessage({ type: 'viewStepContext', stepId });\r\n        }\r\n\r\n        function approveStep(stepId) {\r\n            vscode.postMessage({ type: 'approveStepOutput', stepId });\r\n        }\r\n\r\n        function rejectStep(stepId) {\r\n            const reason = prompt('Why should this output be regenerated? (optional)');\r\n            vscode.postMessage({ type: 'rejectStepOutput', stepId, reason: reason || '' });\r\n        }\r\n\r\n        function sendStepChat(stepId) {\r\n            const input = document.getElementById('chat-input-' + stepId);\r\n            if (input && input.value.trim()) {\r\n                const message = input.value.trim();\r\n                input.value = '';\r\n                \r\n                // Add user message to chat immediately\r\n                const messagesEl = document.getElementById('chat-messages-' + stepId);\r\n                if (messagesEl) {\r\n                    const msgDiv = document.createElement('div');\r\n                    msgDiv.className = 'chat-message user';\r\n                    msgDiv.textContent = message;\r\n                    messagesEl.appendChild(msgDiv);\r\n                    messagesEl.scrollTop = messagesEl.scrollHeight;\r\n                }\r\n                \r\n                vscode.postMessage({ type: 'stepChat', stepId, message });\r\n            }\r\n        }\r\n\r\n        // Handle menu button clicks via event delegation\r\n        document.addEventListener('click', (e) => {\r\n            const target = e.target;\r\n            if (!target || !target.closest) return;\r\n            \r\n            // Check if clicking a menu action button\r\n            const menuButton = target.closest('.step-menu button[data-action]');\r\n            if (menuButton) {\r\n                const action = menuButton.getAttribute('data-action');\r\n                const stepId = menuButton.getAttribute('data-step-id');\r\n                const menu = menuButton.closest('.step-menu');\r\n                \r\n                // Close menu immediately\r\n                if (menu) menu.style.display = 'none';\r\n                \r\n                if (action && stepId) {\r\n                    switch (action) {\r\n                        case 'skip':\r\n                            showModal('', 'Are you sure you want to skip this step?', [\r\n                                { text: 'Skip', primary: true, action: () => {\r\n                                    hideModal();\r\n                                    setLoading('skip', true, stepId);\r\n                                    vscode.postMessage({ type: 'skipStep', stepId: stepId });\r\n                                }},\r\n                                { text: 'Cancel', primary: false, action: hideModal }\r\n                            ]);\r\n                            break;\r\n                        case 'reset':\r\n                            showModal('', 'Reset this step to pending? This will clear any output and allow re-execution.', [\r\n                                { text: 'Reset', primary: true, action: () => {\r\n                                    hideModal();\r\n                                    setLoading('reset', true, stepId);\r\n                                    vscode.postMessage({ type: 'resetStep', stepId: stepId });\r\n                                }},\r\n                                { text: 'Cancel', primary: false, action: hideModal }\r\n                            ]);\r\n                            break;\r\n                        case 'reassign':\r\n                            showInputModal('', 'Enter agent ID:', 'e.g., coding-agent, documentation-agent', (agent) => {\r\n                                if (agent && agent.trim()) {\r\n                                    setLoading('reassign', true, stepId);\r\n                                    vscode.postMessage({ type: 'reassignStep', stepId: stepId, agentId: agent.trim() });\r\n                                }\r\n                            });\r\n                            break;\r\n                        case 'edit':\r\n                            const stepCard = document.querySelector('[data-step-id=\"' + stepId + '\"]');\r\n                            const descEl = stepCard?.querySelector('.step-description');\r\n                            const currentDesc = descEl?.textContent || '';\r\n                            showInputModal('', 'Edit step description:', currentDesc, (newDesc) => {\r\n                                if (newDesc !== null && newDesc !== currentDesc) {\r\n                                    vscode.postMessage({ type: 'updateStepDescription', stepId: stepId, description: newDesc });\r\n                                }\r\n                            });\r\n                            break;\r\n                        case 'view':\r\n                            vscode.postMessage({ type: 'viewStepContext', stepId: stepId });\r\n                            break;\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n            \r\n            // Don't close if clicking on the menu toggle button () or inside a menu\r\n            const isMenuToggle = target.closest('button[title=\"More options\"]');\r\n            const isInsideMenu = target.closest('.step-menu');\r\n            \r\n            if (!isMenuToggle && !isInsideMenu) {\r\n                document.querySelectorAll('.step-menu').forEach(menu => {\r\n                    menu.style.display = 'none';\r\n                });\r\n            }\r\n        });\r\n\r\n        window.addEventListener('message', (event) => {\r\n            const message = event.data;\r\n            \r\n            switch (message.type) {\r\n                case 'refresh':\r\n                    workflow = message.workflow;\r\n                    location.reload(); // Simple refresh for now\r\n                    break;\r\n                case 'chatLoading':\r\n                    document.getElementById('chatLoading').classList.add('active');\r\n                    break;\r\n                case 'chatResponse':\r\n                    document.getElementById('chatLoading').classList.remove('active');\r\n                    // Re-enable inputs\r\n                    document.getElementById('chatInput').disabled = false;\r\n                    document.getElementById('chatSend').disabled = false;\r\n                    \r\n                    const responseDiv = document.getElementById('chatResponse');\r\n                    // Append the assistant's response after the user's message\r\n                    responseDiv.innerHTML += '<div class=\"chat-assistant-message\"><strong>Assistant:</strong> ' + escapeHtml(message.response) + '</div>';\r\n                    responseDiv.style.display = 'block';\r\n                    if (message.analysisUpdated) {\r\n                        responseDiv.innerHTML += '<div class=\"chat-status\"><em> Analysis updated with new context. Refreshing...</em></div>';\r\n                    } else if (message.planModified) {\r\n                        responseDiv.innerHTML += '<div class=\"chat-status\"><em> Plan was modified. Refreshing...</em></div>';\r\n                    }\r\n                    break;\r\n                case 'chatError':\r\n                    document.getElementById('chatLoading').classList.remove('active');\r\n                    // Re-enable inputs\r\n                    document.getElementById('chatInput').disabled = false;\r\n                    document.getElementById('chatSend').disabled = false;\r\n                    \r\n                    const errResponseDiv = document.getElementById('chatResponse');\r\n                    errResponseDiv.innerHTML += '<div class=\"chat-error\"><strong>Error:</strong> ' + escapeHtml(message.message) + '</div>';\r\n                    errResponseDiv.style.display = 'block';\r\n                    break;\r\n                case 'loading':\r\n                    setLoading(message.action, true, message.stepId);\r\n                    break;\r\n                case 'loadingDone':\r\n                    setLoading(null, false);\r\n                    break;\r\n                case 'success':\r\n                    setLoading(null, false);\r\n                    // Show brief success then refresh\r\n                    setTimeout(() => vscode.postMessage({ type: 'refresh' }), 500);\r\n                    break;\r\n                case 'error':\r\n                    setLoading(null, false);\r\n                    showModal('', 'Error: ' + message.message, [\r\n                        { text: 'OK', primary: true, action: hideModal }\r\n                    ]);\r\n                    break;\r\n                case 'confirmIndexAndEnrich':\r\n                    setLoading(null, false);\r\n                    showModal('', message.message, [\r\n                        { text: 'Index & Enrich', primary: true, action: () => { hideModal(); indexAndEnrich(); } },\r\n                        { text: 'Cancel', primary: false, action: hideModal }\r\n                    ]);\r\n                    break;\r\n                case 'stepChatResponse':\r\n                    // Add assistant response to step chat\r\n                    const chatMessagesEl = document.getElementById('chat-messages-' + message.stepId);\r\n                    if (chatMessagesEl) {\r\n                        const msgDiv = document.createElement('div');\r\n                        msgDiv.className = 'chat-message assistant';\r\n                        msgDiv.textContent = message.response;\r\n                        chatMessagesEl.appendChild(msgDiv);\r\n                        chatMessagesEl.scrollTop = chatMessagesEl.scrollHeight;\r\n                    }\r\n                    break;\r\n                case 'worktreeChanges':\r\n                    renderWorktreeChanges(message.status);\r\n                    break;\r\n            }\r\n        });\r\n    </script>\r\n</body>\r\n</html>`;\r\n    }\r\n\r\n    private getStepsHtml(steps: WorkflowStep[]): string {\r\n        if (steps.length === 0) {\r\n            return '<div class=\"step-card pending\"><em>No steps yet. Run Plan to create steps.</em></div>';\r\n        }\r\n\r\n        // Determine which steps can execute (only if all previous steps are completed)\r\n        const canExecuteStep = (index: number): boolean => {\r\n            if (steps[index].status !== 'Pending') return false;\r\n            // Check all previous steps are completed\r\n            for (let i = 0; i < index; i++) {\r\n                if (steps[i].status !== 'Completed' && steps[i].status !== 'Skipped') {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n\r\n        // Parse phase from description (e.g., \"[Analysis] Examine code\" -> { phase: \"Analysis\", description: \"Examine code\" })\r\n        const parsePhase = (description: string | undefined): { phase: string | null; cleanDescription: string } => {\r\n            if (!description) return { phase: null, cleanDescription: '' };\r\n            const match = description.match(/^\\[([^\\]]+)\\]\\s*(.*)$/);\r\n            if (match) {\r\n                return { phase: match[1], cleanDescription: match[2] };\r\n            }\r\n            return { phase: null, cleanDescription: description };\r\n        };\r\n\r\n        // Group steps by phase\r\n        interface PhaseGroup {\r\n            phase: string;\r\n            steps: Array<{ step: WorkflowStep; index: number; cleanDescription: string }>;\r\n        }\r\n        const phases: PhaseGroup[] = [];\r\n        let currentPhase: PhaseGroup | null = null;\r\n\r\n        steps.forEach((step, index) => {\r\n            const { phase, cleanDescription } = parsePhase(step.description);\r\n            const phaseName = phase || 'Steps';\r\n\r\n            if (!currentPhase || currentPhase.phase !== phaseName) {\r\n                currentPhase = { phase: phaseName, steps: [] };\r\n                phases.push(currentPhase);\r\n            }\r\n            currentPhase.steps.push({ step, index, cleanDescription });\r\n        });\r\n\r\n        // Check if we actually have meaningful phases (more than one, or named phases)\r\n        const hasMeaningfulPhases = phases.length > 1 || (phases.length === 1 && phases[0].phase !== 'Steps');\r\n\r\n        // Render step card helper\r\n        const renderStepCard = (step: WorkflowStep, index: number, cleanDescription: string): string => {\r\n            const statusClass = step.status.toLowerCase();\r\n            const canExecute = canExecuteStep(index);\r\n            const isBlocked = step.status === 'Pending' && !canExecute;\r\n            const canRetry = step.status === 'Completed' || step.status === 'Failed';\r\n            const hasOutput = !!step.output;\r\n            const needsRework = (step as any).needsRework === true;\r\n            const isApproved = (step as any).approval === 'Approved';\r\n\r\n            // Status icon - show rework indicator for completed steps that need rework\r\n            let statusIcon: string;\r\n            if (needsRework && step.status === 'Completed') {\r\n                statusIcon = '';  // Rework needed\r\n            } else {\r\n                statusIcon = {\r\n                    'pending': isBlocked ? '' : '',\r\n                    'running': '',\r\n                    'completed': isApproved ? '' : '',\r\n                    'failed': '',\r\n                    'skipped': ''\r\n                }[statusClass] || '';\r\n            }\r\n\r\n            // Parse output if available\r\n            let outputHtml = '';\r\n            let toolStepsHtml = '';\r\n            let artifactsHtml = '';\r\n            let tokenInfo = '';\r\n            if (step.output) {\r\n                try {\r\n                    const parsed = JSON.parse(step.output);\r\n                    if (parsed.content) {\r\n                        tokenInfo = parsed.tokensUsed ? `${parsed.tokensUsed.toLocaleString()} tokens` : '';\r\n                        if (parsed.durationMs) {\r\n                            tokenInfo += tokenInfo ? `  ${(parsed.durationMs / 1000).toFixed(1)}s` : `${(parsed.durationMs / 1000).toFixed(1)}s`;\r\n                        }\r\n                        outputHtml = `\r\n                        <div class=\"step-section output-section\" id=\"output-section-${step.id}\" style=\"display: none;\">\r\n                            <div class=\"section-header\">\r\n                                <span>Output</span>\r\n                                <div style=\"display: flex; gap: 8px; align-items: center;\">\r\n                                    <button class=\"copy-btn\" onclick=\"copyStepOutput('${step.id}')\"> Copy</button>\r\n                                    <div class=\"approval-buttons\">\r\n                                        <button class=\"btn-icon approve\" onclick=\"approveStep('${step.id}')\" title=\"Approve\"></button>\r\n                                        <button class=\"btn-icon reject\" onclick=\"rejectStep('${step.id}')\" title=\"Request Changes\"></button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"section-content\">\r\n                                <pre>${this.escapeHtml(parsed.content)}</pre>\r\n                            </div>\r\n                        </div>`;\r\n                    }\r\n\r\n                    // Tool steps trace (ReAct visualization)\r\n                    if (parsed.toolSteps && parsed.toolSteps.length > 0) {\r\n                        const toolStepsInnerHtml = parsed.toolSteps.map((ts: any, i: number) => {\r\n                            const isFailed = ts.observation?.startsWith('Error:') || ts.observation?.includes('failed');\r\n                            const thought = ts.thought || '';\r\n                            const action = ts.action || 'unknown';\r\n                            const actionInput = ts.actionInput || '';\r\n                            const observation = ts.observation || '';\r\n                            const truncatedObs = observation.length > 500 ? observation.substring(0, 500) : observation;\r\n                            const isTruncated = observation.length > 500;\r\n\r\n                            return `\r\n                            <div class=\"tool-step ${isFailed ? 'failed' : ''}\">\r\n                                <div class=\"tool-step-header\">\r\n                                    <span class=\"tool-step-number\">${i + 1}</span>\r\n                                    <span class=\"tool-step-action\">${this.escapeHtml(action)}</span>\r\n                                </div>\r\n                                ${thought ? `<div class=\"tool-step-thought\">${this.escapeHtml(thought)}</div>` : ''}\r\n                                <div class=\"tool-step-details\">\r\n                                    ${actionInput ? `\r\n                                    <div class=\"tool-step-label\">Input:</div>\r\n                                    <div class=\"tool-step-code\">${this.escapeHtml(actionInput)}</div>\r\n                                    ` : ''}\r\n                                    <div class=\"tool-step-label\">Result:</div>\r\n                                    <div class=\"tool-step-observation ${isTruncated ? 'truncated' : ''}\">\r\n                                        <div class=\"tool-step-code\">${this.escapeHtml(truncatedObs)}</div>\r\n                                    </div>\r\n                                    ${isTruncated ? `<span class=\"tool-step-expand\" onclick=\"toggleFullObservation(this, '${step.id}', ${i})\">Show more</span>` : ''}\r\n                                </div>\r\n                            </div>`;\r\n                        }).join('');\r\n\r\n                        toolStepsHtml = `\r\n                        <div class=\"step-section tool-steps-section\" id=\"tool-steps-section-${step.id}\" style=\"display: none;\">\r\n                            <div class=\"section-header\">\r\n                                <span> Tool Steps (${parsed.toolSteps.length})</span>\r\n                            </div>\r\n                            <div class=\"section-content tool-steps\">\r\n                                ${toolStepsInnerHtml}\r\n                            </div>\r\n                        </div>`;\r\n                    }\r\n\r\n                    // Artifacts section (files created/modified)\r\n                    if (parsed.artifacts && Object.keys(parsed.artifacts).length > 0) {\r\n                        const artifactEntries = Object.entries(parsed.artifacts);\r\n                        \r\n                        // Extract modified_files as a special case\r\n                        const modifiedFilesEntry = artifactEntries.find(([k]) => k === 'modified_files');\r\n                        const modifiedFiles = modifiedFilesEntry \r\n                            ? (modifiedFilesEntry[1] as string).split('\\n').filter(f => f.trim())\r\n                            : [];\r\n                        \r\n                        // Parse file paths from modified_files JSON entries\r\n                        const filePaths: string[] = [];\r\n                        for (const fileJson of modifiedFiles) {\r\n                            try {\r\n                                const parsed = JSON.parse(fileJson);\r\n                                if (parsed.path) {\r\n                                    filePaths.push(parsed.path);\r\n                                }\r\n                            } catch {\r\n                                // Not JSON, might be a plain path\r\n                                if (fileJson.includes('/') || fileJson.includes('\\\\')) {\r\n                                    filePaths.push(fileJson);\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        const fileListHtml = filePaths.length > 0 \r\n                            ? `<div class=\"artifacts-files\">\r\n                                <div class=\"artifacts-label\">Modified Files:</div>\r\n                                ${filePaths.map(f => `\r\n                                    <div class=\"artifact-file\">\r\n                                        <span class=\"artifact-file-path\">${this.escapeHtml(f)}</span>\r\n                                        <div class=\"artifact-file-actions\">\r\n                                            <button class=\"btn-icon small\" onclick=\"openFile('${this.escapeHtml(f.replace(/\\\\/g, '\\\\\\\\'))}')\" title=\"Open file\"></button>\r\n                                            <button class=\"btn-icon small\" onclick=\"openDiff('${this.escapeHtml(f.replace(/\\\\/g, '\\\\\\\\'))}')\" title=\"View diff\"></button>\r\n                                        </div>\r\n                                    </div>\r\n                                `).join('')}\r\n                               </div>`\r\n                            : '';\r\n\r\n                        // Other artifacts (excluding modified_files and internal ones)\r\n                        const otherArtifacts = artifactEntries.filter(([k]) => \r\n                            !['modified_files', 'success', 'steps', 'duration_ms', 'reasoning_trace'].includes(k)\r\n                        );\r\n                        \r\n                        const otherArtifactsHtml = otherArtifacts.length > 0\r\n                            ? `<div class=\"artifacts-other\">\r\n                                ${otherArtifacts.map(([key, value]) => `\r\n                                    <div class=\"artifact-item\">\r\n                                        <div class=\"artifact-key\">${this.escapeHtml(key)}:</div>\r\n                                        <pre class=\"artifact-value\">${this.escapeHtml(String(value).substring(0, 500))}${String(value).length > 500 ? '...' : ''}</pre>\r\n                                    </div>\r\n                                `).join('')}\r\n                               </div>`\r\n                            : '';\r\n\r\n                        if (fileListHtml || otherArtifactsHtml) {\r\n                            artifactsHtml = `\r\n                            <div class=\"step-section artifacts-section\" id=\"artifacts-section-${step.id}\" style=\"display: none;\">\r\n                                <div class=\"section-header\">\r\n                                    <span> Artifacts${filePaths.length > 0 ? ` (${filePaths.length} files)` : ''}</span>\r\n                                </div>\r\n                                <div class=\"section-content\">\r\n                                    ${fileListHtml}\r\n                                    ${otherArtifactsHtml}\r\n                                </div>\r\n                            </div>`;\r\n                        }\r\n                    }\r\n                } catch {\r\n                    outputHtml = `\r\n                    <div class=\"step-section output-section\" id=\"output-section-${step.id}\" style=\"display: none;\">\r\n                        <div class=\"section-header\"><span>Output</span></div>\r\n                        <div class=\"section-content\"><pre>${this.escapeHtml(step.output)}</pre></div>\r\n                    </div>`;\r\n                }\r\n            }\r\n\r\n            // Parse chat history and render existing messages\r\n            let chatHistoryHtml = '';\r\n            if (step.chatHistory) {\r\n                try {\r\n                    const chatMessages = JSON.parse(step.chatHistory) as Array<{Role: string, Content: string}>;\r\n                    chatHistoryHtml = chatMessages.map(msg => {\r\n                        const role = msg.Role.toLowerCase();\r\n                        return `<div class=\"chat-message ${role}\">${this.escapeHtml(msg.Content)}</div>`;\r\n                    }).join('');\r\n                } catch {\r\n                    // Ignore parse errors\r\n                }\r\n            }\r\n\r\n            // Chat section (always available)\r\n            const chatHtml = `\r\n            <div class=\"step-section chat-section\" id=\"chat-section-${step.id}\" style=\"display: none;\">\r\n                <div class=\"section-header\"><span>Chat with ${step.assignedAgentId || 'agent'}</span></div>\r\n                <div class=\"section-content\">\r\n                    <div class=\"chat-messages\" id=\"chat-messages-${step.id}\">${chatHistoryHtml}</div>\r\n                    <div class=\"chat-input-row\">\r\n                        <input type=\"text\" class=\"chat-input\" id=\"chat-input-${step.id}\" \r\n                            placeholder=\"Refine this step...\" \r\n                            onkeypress=\"if(event.key==='Enter')sendStepChat('${step.id}')\">\r\n                        <button class=\"btn btn-small\" onclick=\"sendStepChat('${step.id}')\">Send</button>\r\n                    </div>\r\n                </div>\r\n            </div>`;\r\n\r\n            // Action buttons (right side of header)\r\n            const actionButtons = [];\r\n            const hasChatHistory = chatHistoryHtml !== '';\r\n            const chatIcon = hasChatHistory ? '' : '';\r\n            const chatTitle = hasChatHistory ? 'Chat with agent (has history)' : 'Chat with agent';\r\n            actionButtons.push(`<button class=\"btn-icon${hasChatHistory ? ' has-history' : ''}\" onclick=\"toggleChat('${step.id}')\" title=\"${chatTitle}\">${chatIcon}</button>`);\r\n            \r\n            // Check if we have tool steps to show\r\n            const hasToolSteps = toolStepsHtml !== '';\r\n            const hasArtifacts = artifactsHtml !== '';\r\n            \r\n            if (hasToolSteps) {\r\n                actionButtons.push(`<button class=\"btn-icon\" onclick=\"toggleToolSteps('${step.id}')\" title=\"View tool steps\"></button>`);\r\n            }\r\n\r\n            if (hasArtifacts) {\r\n                actionButtons.push(`<button class=\"btn-icon\" onclick=\"toggleArtifacts('${step.id}')\" title=\"View artifacts\"></button>`);\r\n            }\r\n            \r\n            if (hasOutput) {\r\n                actionButtons.push(`<button class=\"btn-icon\" onclick=\"toggleOutput('${step.id}')\" title=\"View output\"></button>`);\r\n            }\r\n            \r\n            if (canExecute) {\r\n                actionButtons.push(`<button class=\"btn-icon primary\" onclick=\"executeStep('${step.id}')\" title=\"Execute step\"></button>`);\r\n            } else if (step.status === 'Failed') {\r\n                // For failed steps, show both Reset and Retry prominently\r\n                actionButtons.push(`<button class=\"btn-icon\" onclick=\"resetStep('${step.id}')\" title=\"Reset to pending\"></button>`);\r\n                actionButtons.push(`<button class=\"btn-icon primary\" onclick=\"executeStep('${step.id}')\" title=\"Retry step\"></button>`);\r\n            } else if (canRetry) {\r\n                actionButtons.push(`<button class=\"btn-icon\" onclick=\"executeStep('${step.id}')\" title=\"Retry step\"></button>`);\r\n            }\r\n            \r\n            actionButtons.push(`<button class=\"btn-icon\" onclick=\"toggleStepMenu('${step.id}')\" title=\"More options\"></button>`);\r\n\r\n            // Step menu (hidden by default) - using data attributes for event delegation\r\n            const menuHtml = `\r\n            <div class=\"step-menu\" id=\"menu-${step.id}\" style=\"display: none;\">\r\n                <button data-action=\"edit\" data-step-id=\"${step.id}\"> Edit description</button>\r\n                <button data-action=\"reassign\" data-step-id=\"${step.id}\"> Reassign agent</button>\r\n                <button data-action=\"skip\" data-step-id=\"${step.id}\"> Skip step</button>\r\n                <button data-action=\"reset\" data-step-id=\"${step.id}\"> Reset step</button>\r\n                <button data-action=\"view\" data-step-id=\"${step.id}\"> View context</button>\r\n            </div>`;\r\n\r\n            // Build CSS classes for the step card\r\n            const cardClasses = [\r\n                'step-card',\r\n                statusClass,\r\n                isBlocked ? 'blocked' : '',\r\n                needsRework ? 'needs-rework' : '',\r\n                isApproved ? 'approved' : ''\r\n            ].filter(c => c).join(' ');\r\n\r\n            // Rework badge if needed\r\n            const reworkBadge = needsRework ? '<span class=\"rework-badge\">needs rework</span>' : '';\r\n            \r\n            // Token info badge (shows usage and timing)\r\n            const tokenBadge = tokenInfo ? `<span class=\"step-meta-badge\">${tokenInfo}</span>` : '';\r\n            \r\n            // Attempts badge (show if > 1)\r\n            const attemptsBadge = step.attempts > 1 \r\n                ? `<span class=\"step-meta-badge attempts\">attempt ${step.attempts}</span>` \r\n                : '';\r\n            \r\n            // Format timestamps for display\r\n            const formatTime = (iso: string | undefined) => {\r\n                if (!iso) return '';\r\n                const d = new Date(iso);\r\n                return d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });\r\n            };\r\n            const startTime = formatTime(step.startedAt);\r\n            const endTime = formatTime(step.completedAt);\r\n            const timestampInfo = startTime \r\n                ? (endTime ? `${startTime}  ${endTime}` : `started ${startTime}`)\r\n                : '';\r\n            \r\n            // Build metadata row\r\n            const metaItems = [tokenBadge, attemptsBadge].filter(x => x);\r\n            const metaRow = metaItems.length > 0 || timestampInfo\r\n                ? `<div class=\"step-meta\">\r\n                    ${metaItems.join('')}\r\n                    ${timestampInfo ? `<span class=\"step-meta-timestamp\">${timestampInfo}</span>` : ''}\r\n                   </div>`\r\n                : '';\r\n            \r\n            // Previous output section (for retried steps)\r\n            const previousOutputHtml = step.previousOutput \r\n                ? `<div class=\"previous-output-toggle\" onclick=\"togglePreviousOutput('${step.id}')\">\r\n                     View previous attempt output\r\n                   </div>\r\n                   <div class=\"previous-output\" id=\"previous-output-${step.id}\" style=\"display: none;\">\r\n                    <div class=\"previous-output-header\">Previous attempt (${step.attempts - 1}):</div>\r\n                    <pre style=\"font-size: 11px; margin: 0; max-height: 150px; overflow-y: auto;\">${this.escapeHtml(step.previousOutput.substring(0, 1000))}${step.previousOutput.length > 1000 ? '...' : ''}</pre>\r\n                   </div>`\r\n                : '';\r\n\r\n            return `\r\n            <div class=\"${cardClasses}\" data-step-id=\"${step.id}\">\r\n                <div class=\"step-header\">\r\n                    <div class=\"step-status\">${statusIcon}</div>\r\n                    <div class=\"step-info\">\r\n                        <div class=\"step-title\">\r\n                            <span class=\"step-name\">${step.order}. ${this.escapeHtml(step.name)}</span>\r\n                            <span class=\"step-agent\">${step.assignedAgentId || step.capability}</span>\r\n                            ${reworkBadge}\r\n                        </div>\r\n                        <div class=\"step-description\">${cleanDescription ? this.escapeHtml(cleanDescription) : ''}</div>\r\n                        ${metaRow}\r\n                    </div>\r\n                    <div class=\"step-actions\">\r\n                        ${actionButtons.join('')}\r\n                        ${menuHtml}\r\n                    </div>\r\n                </div>\r\n                ${step.status === 'Running' ? '<div class=\"step-progress\"><div class=\"progress-bar\"></div></div>' : ''}\r\n                ${step.error ? `\r\n                <div class=\"step-error\">\r\n                    <strong>Error:</strong> ${this.escapeHtml(step.error)}\r\n                    <div class=\"step-error-actions\">\r\n                        <button class=\"primary\" onclick=\"resetStep('${step.id}')\"> Reset</button>\r\n                        <button onclick=\"executeStep('${step.id}')\"> Retry</button>\r\n                    </div>\r\n                </div>` : ''}\r\n                ${previousOutputHtml}\r\n                ${toolStepsHtml}\r\n                ${artifactsHtml}\r\n                ${outputHtml}\r\n                ${chatHtml}\r\n            </div>\r\n            `;\r\n        };\r\n\r\n        // Render with phase grouping if we have meaningful phases\r\n        if (hasMeaningfulPhases) {\r\n            return phases.map(phaseGroup => {\r\n                // Check if all steps in this phase are completed\r\n                const allCompleted = phaseGroup.steps.every(\r\n                    s => s.step.status === 'Completed' || s.step.status === 'Skipped'\r\n                );\r\n                const phaseClass = allCompleted ? 'phase-section completed' : 'phase-section';\r\n                const phaseIcon = allCompleted ? '' : '';\r\n\r\n                const stepsHtml = phaseGroup.steps\r\n                    .map(s => renderStepCard(s.step, s.index, s.cleanDescription))\r\n                    .join('');\r\n\r\n                return `\r\n                <div class=\"${phaseClass}\">\r\n                    <div class=\"phase-title\">${phaseIcon} ${this.escapeHtml(phaseGroup.phase)}</div>\r\n                    ${stepsHtml}\r\n                </div>`;\r\n            }).join('');\r\n        }\r\n\r\n        // No meaningful phases - render flat list\r\n        return phases[0].steps\r\n            .map(s => renderStepCard(s.step, s.index, s.cleanDescription))\r\n            .join('');\r\n    }\r\n\r\n    private getChatPlaceholder(workflow: Workflow): string {\r\n        switch (workflow.status) {\r\n            case 'Created':\r\n                return 'Chat about the workflow before analysis...';\r\n            case 'Analyzed':\r\n                return 'Add context to refine analysis, or proceed to Create Plan...';\r\n            case 'Planned':\r\n            case 'Executing':\r\n                return 'Modify the plan... (e.g., \"Add a step for logging\")';\r\n            default:\r\n                return 'Workflow is complete';\r\n        }\r\n    }\r\n\r\n    private renderWorkflowChatHistory(workflow: Workflow): string {\r\n        if (!workflow.chatHistory) {\r\n            return '';\r\n        }\r\n\r\n        try {\r\n            const messages = JSON.parse(workflow.chatHistory) as Array<{Role: string, Content: string}>;\r\n            if (messages.length === 0) {\r\n                return '';\r\n            }\r\n\r\n            const messagesHtml = messages.map(msg => {\r\n                const isUser = msg.Role.toLowerCase() === 'user';\r\n                const roleLabel = isUser ? ' You' : ' Aura';\r\n                const className = isUser ? 'chat-user-message' : 'chat-assistant-message';\r\n                return `<div class=\"${className}\"><strong>${roleLabel}:</strong> ${this.escapeHtml(msg.Content)}</div>`;\r\n            }).join('');\r\n\r\n            return messagesHtml;\r\n        } catch {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    private getActionButtons(workflow: Workflow): string {\r\n        const leftButtons: string[] = [];\r\n        const rightButtons: string[] = [];\r\n        const pendingSteps = (workflow.steps || []).filter(s => s.status === 'Pending');\r\n        const hasPendingSteps = pendingSteps.length > 0;\r\n\r\n        // Status-specific primary actions (left side)\r\n        switch (workflow.status) {\r\n            case 'Created':\r\n                leftButtons.push('<button class=\"btn btn-primary\" onclick=\"enrich()\"> Enrich Issue</button>');\r\n                leftButtons.push('<button class=\"btn btn-primary\" onclick=\"indexCodebase()\"> Index Codebase</button>');\r\n                rightButtons.push('<button class=\"btn btn-danger\" onclick=\"cancel()\">Cancel Workflow</button>');\r\n                break;\r\n            case 'Analyzed':\r\n                leftButtons.push('<button class=\"btn btn-primary\" onclick=\"plan()\"> Create Plan</button>');\r\n                rightButtons.push('<button class=\"btn btn-danger\" onclick=\"cancel()\">Cancel Workflow</button>');\r\n                break;\r\n            case 'Planned':\r\n            case 'Executing':\r\n                if (hasPendingSteps) {\r\n                    leftButtons.push(`<button class=\"btn btn-primary\" onclick=\"executeAllPending()\"> Execute All (${pendingSteps.length})</button>`);\r\n                }\r\n                leftButtons.push('<button class=\"btn btn-primary\" onclick=\"complete()\"> Mark Complete</button>');\r\n                rightButtons.push('<button class=\"btn btn-danger\" onclick=\"cancel()\">Cancel Workflow</button>');\r\n                break;\r\n            case 'Completed':\r\n                leftButtons.push('<span class=\"status-text success\"> Workflow Completed</span>');\r\n                if (workflow.pullRequestUrl) {\r\n                    leftButtons.push(`<a href=\"${workflow.pullRequestUrl}\" class=\"btn btn-success\" style=\"text-decoration: none;\" onclick=\"openPullRequest('${workflow.pullRequestUrl}'); return false;\"> View Pull Request</a>`);\r\n                } else {\r\n                    leftButtons.push('<button class=\"btn btn-primary\" onclick=\"showFinalizeDialog()\"> Finalize & Create PR</button>');\r\n                }\r\n                break;\r\n            case 'Cancelled':\r\n            case 'Failed':\r\n                leftButtons.push(`<span class=\"status-text error\"> ${workflow.status}</span>`);\r\n                break;\r\n        }\r\n\r\n        // Utility buttons (left side, after primary actions)\r\n        if (workflow.worktreePath && workflow.status !== 'Completed' && workflow.status !== 'Cancelled' && workflow.status !== 'Failed') {\r\n            leftButtons.push('<button class=\"btn btn-primary\" onclick=\"openWorkspace()\"> Open Workspace</button>');\r\n        }\r\n        leftButtons.push('<button class=\"btn btn-primary\" onclick=\"refresh()\"> Refresh</button>');\r\n\r\n        // Build the layout: [left actions] [spacer] [right actions]\r\n        let html = '<div class=\"action-group\">' + leftButtons.join('') + '</div>';\r\n        if (rightButtons.length > 0) {\r\n            html += '<div class=\"action-spacer\"></div>';\r\n            html += '<div class=\"action-group\">' + rightButtons.join('') + '</div>';\r\n        }\r\n        return html;\r\n    }\r\n\r\n    private escapeHtml(text: string): string {\r\n        return text\r\n            .replace(/&/g, '&amp;')\r\n            .replace(/</g, '&lt;')\r\n            .replace(/>/g, '&gt;')\r\n            .replace(/\"/g, '&quot;')\r\n            .replace(/'/g, '&#039;');\r\n    }\r\n\r\n    private formatAnalyzedContext(analyzedContext: string): string {\r\n        try {\r\n            const parsed = JSON.parse(analyzedContext);\r\n            if (parsed.analysis) {\r\n                // Convert markdown-style headers and lists to HTML\r\n                let html = this.escapeHtml(parsed.analysis)\r\n                    .replace(/\\r\\n/g, '\\n')\r\n                    .replace(/## (.+)/g, '<h4>$1</h4>')\r\n                    .replace(/- (.+)/g, '<li>$1</li>')\r\n                    .replace(/\\n\\n/g, '</p><p>')\r\n                    .replace(/\\n/g, '<br>');\r\n                \r\n                // Wrap lists\r\n                html = html.replace(/(<li>.*<\\/li>)+/g, '<ul>$&</ul>');\r\n                \r\n                return `<div class=\"analysis-text\"><p>${html}</p></div>`;\r\n            }\r\n            return '<div class=\"analysis-text\">Context extracted and indexed</div>';\r\n        } catch {\r\n            return '<div class=\"analysis-text\">Context extracted and indexed</div>';\r\n        }\r\n    }\r\n}\r\n","'use strict';\n\n/** @type {import('./eval')} */\nmodule.exports = EvalError;\n","'use strict';\n\n/** @type {import('./shams')} */\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\t/** @type {{ [k in symbol]?: unknown }} */\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (var _ in obj) { return false; } // eslint-disable-line no-restricted-syntax, no-unreachable-loop\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\t// eslint-disable-next-line no-extra-parens\n\t\tvar descriptor = /** @type {PropertyDescriptor} */ (Object.getOwnPropertyDescriptor(obj, sym));\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","'use strict';\n\n// populates missing values\nmodule.exports = function (dst, src) {\n  Object.keys(src).forEach(function (prop) {\n    dst[prop] = dst[prop] || src[prop]; // eslint-disable-line no-param-reassign\n  });\n\n  return dst;\n};\n","module.exports = require(\"vscode\");","'use strict';\n\n/** @type {import('./abs')} */\nmodule.exports = Math.abs;\n","module.exports =\n{\n  parallel      : require('./parallel.js'),\n  serial        : require('./serial.js'),\n  serialOrdered : require('./serialOrdered.js')\n};\n","module.exports = require(\"tty\");","var serialOrdered = require('./serialOrdered.js');\n\n// Public API\nmodule.exports = serial;\n\n/**\n * Runs iterator over provided array elements in series\n *\n * @param   {array|object} list - array or object (named list) to iterate over\n * @param   {function} iterator - iterator to run\n * @param   {function} callback - invoked when all elements processed\n * @returns {function} - jobs terminator\n */\nfunction serial(list, iterator, callback)\n{\n  return serialOrdered(list, iterator, null, callback);\n}\n","module.exports = require(\"stream\");","import * as vscode from 'vscode';\r\nimport axios, { AxiosInstance } from 'axios';\r\nimport { gitService } from './gitService';\r\n\r\n/**\r\n * Normalizes a file path for consistent API calls.\r\n * Matches the C# PathNormalizer: forward slashes, lowercase.\r\n */\r\nfunction normalizePath(path: string): string {\r\n    if (!path) return path;\r\n    return path\r\n        .replace(/\\\\\\\\/g, '/')  // Handle escaped backslashes\r\n        .replace(/\\\\/g, '/')     // Convert backslashes to forward slashes\r\n        .toLowerCase();\r\n}\r\n\r\nexport interface ServiceStatus {\r\n    status: 'healthy' | 'unhealthy' | 'checking' | 'unknown';\r\n    url?: string;\r\n    responseTime?: number;\r\n    details?: string;\r\n    error?: string;\r\n    lastChecked?: Date;\r\n}\r\n\r\nexport interface OllamaModelInfo {\r\n    name: string;\r\n    size: number;  // bytes\r\n    parameterSize: string;\r\n    quantization: string;\r\n    family: string;\r\n}\r\n\r\nexport interface OllamaRunningModel {\r\n    name: string;\r\n    sizeVram: number;  // bytes in VRAM\r\n    expiresAt: Date;\r\n}\r\n\r\nexport interface OllamaStatus extends ServiceStatus {\r\n    models?: OllamaModelInfo[];\r\n    runningModels?: OllamaRunningModel[];\r\n    totalModelSize?: number;  // total size of all models on disk\r\n}\r\n\r\nexport interface RagStatus extends ServiceStatus {\r\n    totalDocuments?: number;\r\n    totalChunks?: number;\r\n    chunksByType?: Record<string, number>;\r\n    // Repository-filtered stats (indexing is per-repo, not per-workspace)\r\n    repoDocuments?: number;\r\n    repoChunks?: number;\r\n    repositoryPath?: string;\r\n    // Code graph stats\r\n    graphNodes?: number;\r\n    graphEdges?: number;\r\n    // Index health (freshness)\r\n    indexHealth?: 'fresh' | 'stale' | 'outdated' | 'not-indexed';\r\n    commitsBehind?: number;\r\n    lastIndexedAt?: string;\r\n    // Indexing in progress\r\n    isIndexing?: boolean;\r\n    indexingProgress?: number;\r\n}\r\n\r\nexport interface McpStatus extends ServiceStatus {\r\n    mcpTools?: string[];\r\n    agentToolCount?: number;\r\n}\r\n\r\nexport interface HealthStatuses {\r\n    api: ServiceStatus;\r\n    ollama: OllamaStatus;\r\n    database: ServiceStatus;\r\n    rag: RagStatus;\r\n    mcp: McpStatus;\r\n}\r\n\r\nexport class HealthCheckService {\r\n    private statuses: HealthStatuses = {\r\n        api: { status: 'unknown' },\r\n        ollama: { status: 'unknown' },\r\n        database: { status: 'unknown' },\r\n        rag: { status: 'unknown' },\r\n        mcp: { status: 'unknown' }\r\n    };\r\n\r\n    private httpClient: AxiosInstance;\r\n\r\n    constructor(private apiService: { getBaseUrl(): string }) {\r\n        this.httpClient = axios.create({\r\n            timeout: 5000\r\n        });\r\n    }\r\n\r\n    async checkAll(): Promise<void> {\r\n        // Run health checks in parallel\r\n        await Promise.all([\r\n            this.checkApi(),\r\n            this.checkOllama(),\r\n            this.checkDatabase(),\r\n            this.checkRag(),\r\n            this.checkMcp()\r\n        ]);\r\n    }\r\n\r\n    getStatuses(): HealthStatuses {\r\n        return { ...this.statuses };\r\n    }\r\n\r\n    getOverallStatus(): 'healthy' | 'degraded' | 'error' | 'checking' {\r\n        const values = Object.values(this.statuses);\r\n        \r\n        if (values.some(s => s.status === 'checking')) {\r\n            return 'checking';\r\n        }\r\n        \r\n        if (values.every(s => s.status === 'healthy')) {\r\n            return 'healthy';\r\n        }\r\n        \r\n        if (values.every(s => s.status === 'unhealthy')) {\r\n            return 'error';\r\n        }\r\n        \r\n        return 'degraded';\r\n    }\r\n\r\n    private async checkApi(): Promise<void> {\r\n        const url = this.apiService.getBaseUrl();\r\n        this.statuses.api = { status: 'checking', url };\r\n\r\n        try {\r\n            const start = Date.now();\r\n            const response = await this.httpClient.get(`${url}/health`);\r\n            const responseTime = Date.now() - start;\r\n\r\n            this.statuses.api = {\r\n                status: 'healthy',\r\n                url,\r\n                responseTime,\r\n                details: response.data?.status || 'Connected',\r\n                lastChecked: new Date()\r\n            };\r\n        } catch (error) {\r\n            this.statuses.api = {\r\n                status: 'unhealthy',\r\n                url,\r\n                error: this.getErrorMessage(error),\r\n                lastChecked: new Date()\r\n            };\r\n        }\r\n    }\r\n\r\n    private async checkOllama(): Promise<void> {\r\n        const config = vscode.workspace.getConfiguration('aura');\r\n        const url = config.get<string>('ollamaUrl', 'http://localhost:11434');\r\n        this.statuses.ollama = { status: 'checking', url };\r\n\r\n        try {\r\n            const start = Date.now();\r\n            \r\n            // Get available models\r\n            const tagsResponse = await this.httpClient.get(`${url}/api/tags`);\r\n            const responseTime = Date.now() - start;\r\n\r\n            const rawModels = tagsResponse.data?.models || [];\r\n            const models: OllamaModelInfo[] = rawModels.map((m: any) => ({\r\n                name: m.name,\r\n                size: m.size || 0,\r\n                parameterSize: m.details?.parameter_size || 'unknown',\r\n                quantization: m.details?.quantization_level || 'unknown',\r\n                family: m.details?.family || 'unknown'\r\n            }));\r\n\r\n            const totalModelSize = models.reduce((sum, m) => sum + m.size, 0);\r\n\r\n            // Get running models (loaded in memory)\r\n            let runningModels: OllamaRunningModel[] = [];\r\n            try {\r\n                const psResponse = await this.httpClient.get(`${url}/api/ps`);\r\n                const rawRunning = psResponse.data?.models || [];\r\n                runningModels = rawRunning.map((m: any) => ({\r\n                    name: m.name,\r\n                    sizeVram: m.size_vram || m.size || 0,\r\n                    expiresAt: m.expires_at ? new Date(m.expires_at) : new Date()\r\n                }));\r\n            } catch {\r\n                // /api/ps might not be available in older Ollama versions\r\n            }\r\n\r\n            const modelCount = models.length;\r\n            const loadedCount = runningModels.length;\r\n            const loadedVram = runningModels.reduce((sum, m) => sum + m.sizeVram, 0);\r\n\r\n            let details = `${modelCount} model${modelCount !== 1 ? 's' : ''}`;\r\n            if (loadedCount > 0) {\r\n                details += ` (${loadedCount} loaded, ${this.formatBytes(loadedVram)} VRAM)`;\r\n            }\r\n\r\n            this.statuses.ollama = {\r\n                status: 'healthy',\r\n                url,\r\n                responseTime,\r\n                details,\r\n                models,\r\n                runningModels,\r\n                totalModelSize,\r\n                lastChecked: new Date()\r\n            };\r\n        } catch (error) {\r\n            this.statuses.ollama = {\r\n                status: 'unhealthy',\r\n                url,\r\n                error: this.getErrorMessage(error),\r\n                lastChecked: new Date()\r\n            };\r\n        }\r\n    }\r\n\r\n    private async checkDatabase(): Promise<void> {\r\n        // Database health is checked via the API\r\n        const url = this.apiService.getBaseUrl();\r\n        this.statuses.database = { status: 'checking' };\r\n\r\n        try {\r\n            const start = Date.now();\r\n            const response = await this.httpClient.get(`${url}/health/db`);\r\n            const responseTime = Date.now() - start;\r\n\r\n            this.statuses.database = {\r\n                status: response.data?.healthy ? 'healthy' : 'unhealthy',\r\n                responseTime,\r\n                details: response.data?.details || 'Connected',\r\n                lastChecked: new Date()\r\n            };\r\n        } catch (error) {\r\n            // If API is down, we can't check DB\r\n            if (this.statuses.api.status === 'unhealthy') {\r\n                this.statuses.database = {\r\n                    status: 'unknown',\r\n                    error: 'API unavailable',\r\n                    lastChecked: new Date()\r\n                };\r\n            } else {\r\n                this.statuses.database = {\r\n                    status: 'unhealthy',\r\n                    error: this.getErrorMessage(error),\r\n                    lastChecked: new Date()\r\n                };\r\n            }\r\n        }\r\n    }\r\n\r\n    private async checkRag(): Promise<void> {\r\n        // RAG health is checked via the API\r\n        const url = this.apiService.getBaseUrl();\r\n        this.statuses.rag = { status: 'checking' };\r\n\r\n        try {\r\n            const start = Date.now();\r\n            const response = await this.httpClient.get(`${url}/health/rag`);\r\n            const responseTime = Date.now() - start;\r\n\r\n            const totalDocuments = response.data?.totalDocuments || 0;\r\n            const totalChunks = response.data?.totalChunks || 0;\r\n\r\n            // Get current workspace path (first workspace folder)\r\n            const workspacePath = vscode.workspace.workspaceFolders?.[0]?.uri.fsPath;\r\n\r\n            // Check if this is a worktree and get canonical path\r\n            let canonicalPath = workspacePath;\r\n            let isWorktree = false;\r\n            if (workspacePath) {\r\n                const repoInfo = await gitService.getRepositoryInfo(workspacePath);\r\n                if (repoInfo) {\r\n                    canonicalPath = repoInfo.canonicalPath;\r\n                    isWorktree = repoInfo.isWorktree;\r\n                }\r\n            }\r\n\r\n            // Fetch workspace stats if we have a workspace open\r\n            let repoDocuments = 0;\r\n            let repoChunks = 0;\r\n            let graphNodes = 0;\r\n            let graphEdges = 0;\r\n            let chunksByType: Record<string, number> = {};\r\n            let indexHealth: 'fresh' | 'stale' | 'outdated' | 'not-indexed' = 'not-indexed';\r\n            let commitsBehind = 0;\r\n            let lastIndexedAt: string | undefined;\r\n            let isIndexing = false;\r\n            let indexingProgress = 0;\r\n\r\n            try {\r\n                if (canonicalPath) {\r\n                    // Normalize path to match API expectations (forward slashes, lowercase)\r\n                    const normalizedPath = normalizePath(canonicalPath);\r\n                    const encodedPath = encodeURIComponent(normalizedPath);\r\n                    const workspaceResponse = await this.httpClient.get(\r\n                        `${url}/api/workspaces/${encodedPath}`\r\n                    ).catch(() => null);\r\n\r\n                    if (workspaceResponse?.data?.id) {\r\n                        const workspace = workspaceResponse.data;\r\n                        repoChunks = workspace.stats?.chunks || 0;\r\n                        repoDocuments = workspace.stats?.files || 0;\r\n                        graphNodes = workspace.stats?.graphNodes || 0;\r\n                        graphEdges = workspace.stats?.graphEdges || 0;\r\n                        \r\n                        // Map workspace status to index health\r\n                        if (workspace.status === 'ready') {\r\n                            indexHealth = 'fresh';\r\n                        } else if (workspace.status === 'stale') {\r\n                            indexHealth = 'stale';\r\n                        } else if (workspace.status === 'indexing') {\r\n                            isIndexing = true;\r\n                            indexHealth = 'stale';\r\n                        } else {\r\n                            indexHealth = 'not-indexed';\r\n                        }\r\n                        lastIndexedAt = workspace.lastAccessedAt;\r\n                        \r\n                        // Use per-workspace indexing job info if available\r\n                        if (workspace.indexingJob) {\r\n                            isIndexing = true;\r\n                            indexingProgress = workspace.indexingJob.progressPercent || 0;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Also get overall stats\r\n                const statsResponse = await this.httpClient.get(`${url}/api/rag/stats`);\r\n                chunksByType = statsResponse.data?.chunksByType || {};\r\n            } catch {\r\n                // Stats endpoints might fail, continue anyway\r\n            }\r\n\r\n            // Build details string for current workspace only\r\n            let details: string;\r\n            if (isIndexing) {\r\n                details = `Indexing... ${indexingProgress}%`;\r\n            } else if (canonicalPath && (repoDocuments > 0 || repoChunks > 0 || graphNodes > 0)) {\r\n                if (isWorktree) {\r\n                    details = `${repoDocuments} files (via parent)`;\r\n                } else {\r\n                    details = `${repoDocuments} files, ${repoChunks} chunks, ${graphNodes} graph nodes`;\r\n                }\r\n            } else if (canonicalPath) {\r\n                details = 'Not indexed';\r\n            } else {\r\n                details = 'No workspace open';\r\n            }\r\n\r\n            this.statuses.rag = {\r\n                status: response.data?.healthy ? 'healthy' : 'unhealthy',\r\n                responseTime,\r\n                details,\r\n                totalDocuments: repoDocuments || totalDocuments,\r\n                totalChunks: repoChunks || totalChunks,\r\n                chunksByType,\r\n                repoDocuments,\r\n                repoChunks,\r\n                repositoryPath: canonicalPath,\r\n                graphNodes,\r\n                graphEdges,\r\n                indexHealth,\r\n                commitsBehind,\r\n                lastIndexedAt,\r\n                isIndexing,\r\n                indexingProgress,\r\n                lastChecked: new Date()\r\n            };\r\n        } catch (error) {\r\n            // If API is down, we can't check RAG\r\n            if (this.statuses.api.status === 'unhealthy') {\r\n                this.statuses.rag = {\r\n                    status: 'unknown',\r\n                    error: 'API unavailable',\r\n                    lastChecked: new Date()\r\n                };\r\n            } else {\r\n                this.statuses.rag = {\r\n                    status: 'unhealthy',\r\n                    error: this.getErrorMessage(error),\r\n                    lastChecked: new Date()\r\n                };\r\n            }\r\n        }\r\n    }\r\n\r\n    private async checkMcp(): Promise<void> {\r\n        const url = this.apiService.getBaseUrl();\r\n        this.statuses.mcp = { status: 'checking', url };\r\n\r\n        try {\r\n            const start = Date.now();\r\n            const response = await this.httpClient.get(`${url}/health/mcp`);\r\n            const responseTime = Date.now() - start;\r\n\r\n            const mcpTools = response.data?.mcpTools || [];\r\n            const agentToolCount = response.data?.agentToolCount || 0;\r\n\r\n            this.statuses.mcp = {\r\n                status: response.data?.healthy ? 'healthy' : 'unhealthy',\r\n                url,\r\n                responseTime,\r\n                details: `${mcpTools.length} MCP tools, ${agentToolCount} agent tools`,\r\n                mcpTools,\r\n                agentToolCount,\r\n                lastChecked: new Date()\r\n            };\r\n        } catch (error) {\r\n            // If API is down, we can't check MCP\r\n            if (this.statuses.api.status === 'unhealthy') {\r\n                this.statuses.mcp = {\r\n                    status: 'unknown',\r\n                    error: 'API unavailable',\r\n                    lastChecked: new Date()\r\n                };\r\n            } else {\r\n                this.statuses.mcp = {\r\n                    status: 'unhealthy',\r\n                    error: this.getErrorMessage(error),\r\n                    lastChecked: new Date()\r\n                };\r\n            }\r\n        }\r\n    }\r\n\r\n    private getErrorMessage(error: unknown): string {\r\n        if (axios.isAxiosError(error)) {\r\n            if (error.code === 'ECONNREFUSED') {\r\n                return 'Connection refused';\r\n            }\r\n            if (error.code === 'ETIMEDOUT') {\r\n                return 'Connection timed out';\r\n            }\r\n            if (error.response) {\r\n                return `HTTP ${error.response.status}`;\r\n            }\r\n            return error.message;\r\n        }\r\n        return 'Unknown error';\r\n    }\r\n\r\n    private formatBytes(bytes: number): string {\r\n        if (bytes === 0) return '0 B';\r\n        const k = 1024;\r\n        const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\r\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\r\n    }\r\n}\r\n","var defer = require('./defer.js');\n\n// API\nmodule.exports = async;\n\n/**\n * Runs provided callback asynchronously\n * even if callback itself is not\n *\n * @param   {function} callback - callback to invoke\n * @returns {function} - augmented callback\n */\nfunction async(callback)\n{\n  var isAsync = false;\n\n  // check if async happened\n  defer(function() { isAsync = true; });\n\n  return function async_callback(err, result)\n  {\n    if (isAsync)\n    {\n      callback(err, result);\n    }\n    else\n    {\n      defer(function nextTick_callback()\n      {\n        callback(err, result);\n      });\n    }\n  };\n}\n","module.exports = require(\"assert\");","'use strict';\n\nvar $isNaN = require('./isNaN');\n\n/** @type {import('./sign')} */\nmodule.exports = function sign(number) {\n\tif ($isNaN(number) || number === 0) {\n\t\treturn number;\n\t}\n\treturn number < 0 ? -1 : +1;\n};\n","module.exports = require(\"zlib\");","import * as vscode from 'vscode';\r\nimport * as fs from 'fs';\r\nimport * as path from 'path';\r\n\r\n/**\r\n * Service for viewing Aura API logs in VS Code\r\n */\r\nexport class LogService {\r\n    private outputChannel: vscode.OutputChannel;\r\n    private logWatcher: fs.FSWatcher | undefined;\r\n    private currentLogFile: string | undefined;\r\n    private lastPosition: number = 0;\r\n\r\n    constructor() {\r\n        this.outputChannel = vscode.window.createOutputChannel('Aura');\r\n    }\r\n\r\n    /**\r\n     * Get the log directory path\r\n     */\r\n    private getLogDirectory(): string {\r\n        if (process.platform === 'win32') {\r\n            return path.join(process.env.PROGRAMDATA || 'C:\\\\ProgramData', 'Aura', 'logs');\r\n        } else if (process.platform === 'darwin') {\r\n            return path.join(process.env.HOME || '~', 'Library', 'Application Support', 'Aura', 'logs');\r\n        } else {\r\n            return path.join(process.env.HOME || '~', '.aura', 'logs');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Find the most recent log file\r\n     */\r\n    private findLatestLogFile(): string | undefined {\r\n        const logDir = this.getLogDirectory();\r\n        \r\n        if (!fs.existsSync(logDir)) {\r\n            return undefined;\r\n        }\r\n\r\n        const files = fs.readdirSync(logDir)\r\n            .filter(f => f.startsWith('aura-') && f.endsWith('.log'))\r\n            .map(f => ({\r\n                name: f,\r\n                path: path.join(logDir, f),\r\n                mtime: fs.statSync(path.join(logDir, f)).mtime\r\n            }))\r\n            .sort((a, b) => b.mtime.getTime() - a.mtime.getTime());\r\n\r\n        return files.length > 0 ? files[0].path : undefined;\r\n    }\r\n\r\n    /**\r\n     * Show the output channel and start tailing logs\r\n     */\r\n    public showLogs(): void {\r\n        this.outputChannel.show(true);\r\n        this.startTailing();\r\n    }\r\n\r\n    /**\r\n     * Start tailing the log file\r\n     */\r\n    public startTailing(): void {\r\n        this.stopTailing();\r\n\r\n        const logFile = this.findLatestLogFile();\r\n        \r\n        if (!logFile) {\r\n            this.outputChannel.appendLine('No Aura log files found.');\r\n            this.outputChannel.appendLine(`Expected location: ${this.getLogDirectory()}`);\r\n            this.outputChannel.appendLine('');\r\n            this.outputChannel.appendLine('The Aura API service may not be running or has not written any logs yet.');\r\n            return;\r\n        }\r\n\r\n        this.currentLogFile = logFile;\r\n        this.outputChannel.appendLine(`=== Aura Logs: ${path.basename(logFile)} ===`);\r\n        this.outputChannel.appendLine(`Log file: ${logFile}`);\r\n        this.outputChannel.appendLine('');\r\n\r\n        // Read existing content\r\n        this.readNewContent();\r\n\r\n        // Watch for changes\r\n        const logDir = path.dirname(logFile);\r\n        this.logWatcher = fs.watch(logDir, (eventType, filename) => {\r\n            if (filename && filename.startsWith('aura-')) {\r\n                // Check if there's a newer log file\r\n                const latestLog = this.findLatestLogFile();\r\n                if (latestLog && latestLog !== this.currentLogFile) {\r\n                    this.outputChannel.appendLine('');\r\n                    this.outputChannel.appendLine(`=== Switched to: ${path.basename(latestLog)} ===`);\r\n                    this.currentLogFile = latestLog;\r\n                    this.lastPosition = 0;\r\n                }\r\n                this.readNewContent();\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Read new content from the log file\r\n     */\r\n    private readNewContent(): void {\r\n        if (!this.currentLogFile || !fs.existsSync(this.currentLogFile)) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const stats = fs.statSync(this.currentLogFile);\r\n            if (stats.size > this.lastPosition) {\r\n                const stream = fs.createReadStream(this.currentLogFile, {\r\n                    start: this.lastPosition,\r\n                    encoding: 'utf8'\r\n                });\r\n\r\n                stream.on('data', (chunk) => {\r\n                    // Split into lines and append each one\r\n                    const text = typeof chunk === 'string' ? chunk : chunk.toString('utf8');\r\n                    const lines = text.split('\\n');\r\n                    for (const line of lines) {\r\n                        if (line.trim()) {\r\n                            this.outputChannel.appendLine(line);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                stream.on('end', () => {\r\n                    this.lastPosition = stats.size;\r\n                });\r\n            }\r\n        } catch (error) {\r\n            // File might be locked or rotated, ignore\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Stop tailing logs\r\n     */\r\n    public stopTailing(): void {\r\n        if (this.logWatcher) {\r\n            this.logWatcher.close();\r\n            this.logWatcher = undefined;\r\n        }\r\n        this.lastPosition = 0;\r\n        this.currentLogFile = undefined;\r\n    }\r\n\r\n    /**\r\n     * Clear the output channel\r\n     */\r\n    public clear(): void {\r\n        this.outputChannel.clear();\r\n    }\r\n\r\n    /**\r\n     * Log a message to the output channel\r\n     */\r\n    public log(message: string): void {\r\n        this.outputChannel.appendLine(`[Extension] ${message}`);\r\n    }\r\n\r\n    /**\r\n     * Log an error to the output channel\r\n     */\r\n    public error(message: string, error?: Error): void {\r\n        this.outputChannel.appendLine(`[Extension Error] ${message}`);\r\n        if (error) {\r\n            this.outputChannel.appendLine(`  ${error.message}`);\r\n            if (error.stack) {\r\n                this.outputChannel.appendLine(`  ${error.stack}`);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Open the log file in VS Code\r\n     */\r\n    public async openLogFile(): Promise<void> {\r\n        const logFile = this.findLatestLogFile();\r\n        \r\n        if (!logFile) {\r\n            vscode.window.showWarningMessage('No Aura log files found.');\r\n            return;\r\n        }\r\n\r\n        const doc = await vscode.workspace.openTextDocument(logFile);\r\n        await vscode.window.showTextDocument(doc);\r\n    }\r\n\r\n    /**\r\n     * Open the log folder in the file explorer\r\n     */\r\n    public openLogFolder(): void {\r\n        const logDir = this.getLogDirectory();\r\n        \r\n        if (!fs.existsSync(logDir)) {\r\n            vscode.window.showWarningMessage(`Log directory does not exist: ${logDir}`);\r\n            return;\r\n        }\r\n\r\n        vscode.env.openExternal(vscode.Uri.file(logDir));\r\n    }\r\n\r\n    /**\r\n     * Dispose the service\r\n     */\r\n    public dispose(): void {\r\n        this.stopTailing();\r\n        this.outputChannel.dispose();\r\n    }\r\n}\r\n","'use strict';\n\nvar bind = require('function-bind');\nvar $TypeError = require('es-errors/type');\n\nvar $call = require('./functionCall');\nvar $actualApply = require('./actualApply');\n\n/** @type {(args: [Function, thisArg?: unknown, ...args: unknown[]]) => Function} TODO FIXME, find a way to use import('.') */\nmodule.exports = function callBindBasic(args) {\n\tif (args.length < 1 || typeof args[0] !== 'function') {\n\t\tthrow new $TypeError('a function is required');\n\t}\n\treturn $actualApply(bind, $call, args);\n};\n","'use strict';\n\nvar bind = require('function-bind');\n\nvar $apply = require('./functionApply');\nvar $call = require('./functionCall');\nvar $reflectApply = require('./reflectApply');\n\n/** @type {import('./actualApply')} */\nmodule.exports = $reflectApply || bind.call($call, $apply);\n","var url = require(\"url\");\nvar URL = url.URL;\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar Writable = require(\"stream\").Writable;\nvar assert = require(\"assert\");\nvar debug = require(\"./debug\");\n\n// Preventive platform detection\n// istanbul ignore next\n(function detectUnsupportedEnvironment() {\n  var looksLikeNode = typeof process !== \"undefined\";\n  var looksLikeBrowser = typeof window !== \"undefined\" && typeof document !== \"undefined\";\n  var looksLikeV8 = isFunction(Error.captureStackTrace);\n  if (!looksLikeNode && (looksLikeBrowser || !looksLikeV8)) {\n    console.warn(\"The follow-redirects package should be excluded from browser builds.\");\n  }\n}());\n\n// Whether to use the native URL object or the legacy url module\nvar useNativeURL = false;\ntry {\n  assert(new URL(\"\"));\n}\ncatch (error) {\n  useNativeURL = error.code === \"ERR_INVALID_URL\";\n}\n\n// URL fields to preserve in copy operations\nvar preservedUrlFields = [\n  \"auth\",\n  \"host\",\n  \"hostname\",\n  \"href\",\n  \"path\",\n  \"pathname\",\n  \"port\",\n  \"protocol\",\n  \"query\",\n  \"search\",\n  \"hash\",\n];\n\n// Create handlers that pass events from native requests\nvar events = [\"abort\", \"aborted\", \"connect\", \"error\", \"socket\", \"timeout\"];\nvar eventHandlers = Object.create(null);\nevents.forEach(function (event) {\n  eventHandlers[event] = function (arg1, arg2, arg3) {\n    this._redirectable.emit(event, arg1, arg2, arg3);\n  };\n});\n\n// Error types with codes\nvar InvalidUrlError = createErrorType(\n  \"ERR_INVALID_URL\",\n  \"Invalid URL\",\n  TypeError\n);\nvar RedirectionError = createErrorType(\n  \"ERR_FR_REDIRECTION_FAILURE\",\n  \"Redirected request failed\"\n);\nvar TooManyRedirectsError = createErrorType(\n  \"ERR_FR_TOO_MANY_REDIRECTS\",\n  \"Maximum number of redirects exceeded\",\n  RedirectionError\n);\nvar MaxBodyLengthExceededError = createErrorType(\n  \"ERR_FR_MAX_BODY_LENGTH_EXCEEDED\",\n  \"Request body larger than maxBodyLength limit\"\n);\nvar WriteAfterEndError = createErrorType(\n  \"ERR_STREAM_WRITE_AFTER_END\",\n  \"write after end\"\n);\n\n// istanbul ignore next\nvar destroy = Writable.prototype.destroy || noop;\n\n// An HTTP(S) request that can be redirected\nfunction RedirectableRequest(options, responseCallback) {\n  // Initialize the request\n  Writable.call(this);\n  this._sanitizeOptions(options);\n  this._options = options;\n  this._ended = false;\n  this._ending = false;\n  this._redirectCount = 0;\n  this._redirects = [];\n  this._requestBodyLength = 0;\n  this._requestBodyBuffers = [];\n\n  // Attach a callback if passed\n  if (responseCallback) {\n    this.on(\"response\", responseCallback);\n  }\n\n  // React to responses of native requests\n  var self = this;\n  this._onNativeResponse = function (response) {\n    try {\n      self._processResponse(response);\n    }\n    catch (cause) {\n      self.emit(\"error\", cause instanceof RedirectionError ?\n        cause : new RedirectionError({ cause: cause }));\n    }\n  };\n\n  // Perform the first request\n  this._performRequest();\n}\nRedirectableRequest.prototype = Object.create(Writable.prototype);\n\nRedirectableRequest.prototype.abort = function () {\n  destroyRequest(this._currentRequest);\n  this._currentRequest.abort();\n  this.emit(\"abort\");\n};\n\nRedirectableRequest.prototype.destroy = function (error) {\n  destroyRequest(this._currentRequest, error);\n  destroy.call(this, error);\n  return this;\n};\n\n// Writes buffered data to the current native request\nRedirectableRequest.prototype.write = function (data, encoding, callback) {\n  // Writing is not allowed if end has been called\n  if (this._ending) {\n    throw new WriteAfterEndError();\n  }\n\n  // Validate input and shift parameters if necessary\n  if (!isString(data) && !isBuffer(data)) {\n    throw new TypeError(\"data should be a string, Buffer or Uint8Array\");\n  }\n  if (isFunction(encoding)) {\n    callback = encoding;\n    encoding = null;\n  }\n\n  // Ignore empty buffers, since writing them doesn't invoke the callback\n  // https://github.com/nodejs/node/issues/22066\n  if (data.length === 0) {\n    if (callback) {\n      callback();\n    }\n    return;\n  }\n  // Only write when we don't exceed the maximum body length\n  if (this._requestBodyLength + data.length <= this._options.maxBodyLength) {\n    this._requestBodyLength += data.length;\n    this._requestBodyBuffers.push({ data: data, encoding: encoding });\n    this._currentRequest.write(data, encoding, callback);\n  }\n  // Error when we exceed the maximum body length\n  else {\n    this.emit(\"error\", new MaxBodyLengthExceededError());\n    this.abort();\n  }\n};\n\n// Ends the current native request\nRedirectableRequest.prototype.end = function (data, encoding, callback) {\n  // Shift parameters if necessary\n  if (isFunction(data)) {\n    callback = data;\n    data = encoding = null;\n  }\n  else if (isFunction(encoding)) {\n    callback = encoding;\n    encoding = null;\n  }\n\n  // Write data if needed and end\n  if (!data) {\n    this._ended = this._ending = true;\n    this._currentRequest.end(null, null, callback);\n  }\n  else {\n    var self = this;\n    var currentRequest = this._currentRequest;\n    this.write(data, encoding, function () {\n      self._ended = true;\n      currentRequest.end(null, null, callback);\n    });\n    this._ending = true;\n  }\n};\n\n// Sets a header value on the current native request\nRedirectableRequest.prototype.setHeader = function (name, value) {\n  this._options.headers[name] = value;\n  this._currentRequest.setHeader(name, value);\n};\n\n// Clears a header value on the current native request\nRedirectableRequest.prototype.removeHeader = function (name) {\n  delete this._options.headers[name];\n  this._currentRequest.removeHeader(name);\n};\n\n// Global timeout for all underlying requests\nRedirectableRequest.prototype.setTimeout = function (msecs, callback) {\n  var self = this;\n\n  // Destroys the socket on timeout\n  function destroyOnTimeout(socket) {\n    socket.setTimeout(msecs);\n    socket.removeListener(\"timeout\", socket.destroy);\n    socket.addListener(\"timeout\", socket.destroy);\n  }\n\n  // Sets up a timer to trigger a timeout event\n  function startTimer(socket) {\n    if (self._timeout) {\n      clearTimeout(self._timeout);\n    }\n    self._timeout = setTimeout(function () {\n      self.emit(\"timeout\");\n      clearTimer();\n    }, msecs);\n    destroyOnTimeout(socket);\n  }\n\n  // Stops a timeout from triggering\n  function clearTimer() {\n    // Clear the timeout\n    if (self._timeout) {\n      clearTimeout(self._timeout);\n      self._timeout = null;\n    }\n\n    // Clean up all attached listeners\n    self.removeListener(\"abort\", clearTimer);\n    self.removeListener(\"error\", clearTimer);\n    self.removeListener(\"response\", clearTimer);\n    self.removeListener(\"close\", clearTimer);\n    if (callback) {\n      self.removeListener(\"timeout\", callback);\n    }\n    if (!self.socket) {\n      self._currentRequest.removeListener(\"socket\", startTimer);\n    }\n  }\n\n  // Attach callback if passed\n  if (callback) {\n    this.on(\"timeout\", callback);\n  }\n\n  // Start the timer if or when the socket is opened\n  if (this.socket) {\n    startTimer(this.socket);\n  }\n  else {\n    this._currentRequest.once(\"socket\", startTimer);\n  }\n\n  // Clean up on events\n  this.on(\"socket\", destroyOnTimeout);\n  this.on(\"abort\", clearTimer);\n  this.on(\"error\", clearTimer);\n  this.on(\"response\", clearTimer);\n  this.on(\"close\", clearTimer);\n\n  return this;\n};\n\n// Proxy all other public ClientRequest methods\n[\n  \"flushHeaders\", \"getHeader\",\n  \"setNoDelay\", \"setSocketKeepAlive\",\n].forEach(function (method) {\n  RedirectableRequest.prototype[method] = function (a, b) {\n    return this._currentRequest[method](a, b);\n  };\n});\n\n// Proxy all public ClientRequest properties\n[\"aborted\", \"connection\", \"socket\"].forEach(function (property) {\n  Object.defineProperty(RedirectableRequest.prototype, property, {\n    get: function () { return this._currentRequest[property]; },\n  });\n});\n\nRedirectableRequest.prototype._sanitizeOptions = function (options) {\n  // Ensure headers are always present\n  if (!options.headers) {\n    options.headers = {};\n  }\n\n  // Since http.request treats host as an alias of hostname,\n  // but the url module interprets host as hostname plus port,\n  // eliminate the host property to avoid confusion.\n  if (options.host) {\n    // Use hostname if set, because it has precedence\n    if (!options.hostname) {\n      options.hostname = options.host;\n    }\n    delete options.host;\n  }\n\n  // Complete the URL object when necessary\n  if (!options.pathname && options.path) {\n    var searchPos = options.path.indexOf(\"?\");\n    if (searchPos < 0) {\n      options.pathname = options.path;\n    }\n    else {\n      options.pathname = options.path.substring(0, searchPos);\n      options.search = options.path.substring(searchPos);\n    }\n  }\n};\n\n\n// Executes the next native request (initial or redirect)\nRedirectableRequest.prototype._performRequest = function () {\n  // Load the native protocol\n  var protocol = this._options.protocol;\n  var nativeProtocol = this._options.nativeProtocols[protocol];\n  if (!nativeProtocol) {\n    throw new TypeError(\"Unsupported protocol \" + protocol);\n  }\n\n  // If specified, use the agent corresponding to the protocol\n  // (HTTP and HTTPS use different types of agents)\n  if (this._options.agents) {\n    var scheme = protocol.slice(0, -1);\n    this._options.agent = this._options.agents[scheme];\n  }\n\n  // Create the native request and set up its event handlers\n  var request = this._currentRequest =\n        nativeProtocol.request(this._options, this._onNativeResponse);\n  request._redirectable = this;\n  for (var event of events) {\n    request.on(event, eventHandlers[event]);\n  }\n\n  // RFC72305.3.1: When making a request directly to an origin server, []\n  // a client MUST send only the absolute path [] as the request-target.\n  this._currentUrl = /^\\//.test(this._options.path) ?\n    url.format(this._options) :\n    // When making a request to a proxy, []\n    // a client MUST send the target URI in absolute-form [].\n    this._options.path;\n\n  // End a redirected request\n  // (The first request must be ended explicitly with RedirectableRequest#end)\n  if (this._isRedirect) {\n    // Write the request entity and end\n    var i = 0;\n    var self = this;\n    var buffers = this._requestBodyBuffers;\n    (function writeNext(error) {\n      // Only write if this request has not been redirected yet\n      // istanbul ignore else\n      if (request === self._currentRequest) {\n        // Report any write errors\n        // istanbul ignore if\n        if (error) {\n          self.emit(\"error\", error);\n        }\n        // Write the next buffer if there are still left\n        else if (i < buffers.length) {\n          var buffer = buffers[i++];\n          // istanbul ignore else\n          if (!request.finished) {\n            request.write(buffer.data, buffer.encoding, writeNext);\n          }\n        }\n        // End the request if `end` has been called on us\n        else if (self._ended) {\n          request.end();\n        }\n      }\n    }());\n  }\n};\n\n// Processes a response from the current native request\nRedirectableRequest.prototype._processResponse = function (response) {\n  // Store the redirected response\n  var statusCode = response.statusCode;\n  if (this._options.trackRedirects) {\n    this._redirects.push({\n      url: this._currentUrl,\n      headers: response.headers,\n      statusCode: statusCode,\n    });\n  }\n\n  // RFC72316.4: The 3xx (Redirection) class of status code indicates\n  // that further action needs to be taken by the user agent in order to\n  // fulfill the request. If a Location header field is provided,\n  // the user agent MAY automatically redirect its request to the URI\n  // referenced by the Location field value,\n  // even if the specific status code is not understood.\n\n  // If the response is not a redirect; return it as-is\n  var location = response.headers.location;\n  if (!location || this._options.followRedirects === false ||\n      statusCode < 300 || statusCode >= 400) {\n    response.responseUrl = this._currentUrl;\n    response.redirects = this._redirects;\n    this.emit(\"response\", response);\n\n    // Clean up\n    this._requestBodyBuffers = [];\n    return;\n  }\n\n  // The response is a redirect, so abort the current request\n  destroyRequest(this._currentRequest);\n  // Discard the remainder of the response to avoid waiting for data\n  response.destroy();\n\n  // RFC72316.4: A client SHOULD detect and intervene\n  // in cyclical redirections (i.e., \"infinite\" redirection loops).\n  if (++this._redirectCount > this._options.maxRedirects) {\n    throw new TooManyRedirectsError();\n  }\n\n  // Store the request headers if applicable\n  var requestHeaders;\n  var beforeRedirect = this._options.beforeRedirect;\n  if (beforeRedirect) {\n    requestHeaders = Object.assign({\n      // The Host header was set by nativeProtocol.request\n      Host: response.req.getHeader(\"host\"),\n    }, this._options.headers);\n  }\n\n  // RFC72316.4: Automatic redirection needs to done with\n  // care for methods not known to be safe, []\n  // RFC72316.4.23: For historical reasons, a user agent MAY change\n  // the request method from POST to GET for the subsequent request.\n  var method = this._options.method;\n  if ((statusCode === 301 || statusCode === 302) && this._options.method === \"POST\" ||\n      // RFC72316.4.4: The 303 (See Other) status code indicates that\n      // the server is redirecting the user agent to a different resource []\n      // A user agent can perform a retrieval request targeting that URI\n      // (a GET or HEAD request if using HTTP) []\n      (statusCode === 303) && !/^(?:GET|HEAD)$/.test(this._options.method)) {\n    this._options.method = \"GET\";\n    // Drop a possible entity and headers related to it\n    this._requestBodyBuffers = [];\n    removeMatchingHeaders(/^content-/i, this._options.headers);\n  }\n\n  // Drop the Host header, as the redirect might lead to a different host\n  var currentHostHeader = removeMatchingHeaders(/^host$/i, this._options.headers);\n\n  // If the redirect is relative, carry over the host of the last request\n  var currentUrlParts = parseUrl(this._currentUrl);\n  var currentHost = currentHostHeader || currentUrlParts.host;\n  var currentUrl = /^\\w+:/.test(location) ? this._currentUrl :\n    url.format(Object.assign(currentUrlParts, { host: currentHost }));\n\n  // Create the redirected request\n  var redirectUrl = resolveUrl(location, currentUrl);\n  debug(\"redirecting to\", redirectUrl.href);\n  this._isRedirect = true;\n  spreadUrlObject(redirectUrl, this._options);\n\n  // Drop confidential headers when redirecting to a less secure protocol\n  // or to a different domain that is not a superdomain\n  if (redirectUrl.protocol !== currentUrlParts.protocol &&\n     redirectUrl.protocol !== \"https:\" ||\n     redirectUrl.host !== currentHost &&\n     !isSubdomain(redirectUrl.host, currentHost)) {\n    removeMatchingHeaders(/^(?:(?:proxy-)?authorization|cookie)$/i, this._options.headers);\n  }\n\n  // Evaluate the beforeRedirect callback\n  if (isFunction(beforeRedirect)) {\n    var responseDetails = {\n      headers: response.headers,\n      statusCode: statusCode,\n    };\n    var requestDetails = {\n      url: currentUrl,\n      method: method,\n      headers: requestHeaders,\n    };\n    beforeRedirect(this._options, responseDetails, requestDetails);\n    this._sanitizeOptions(this._options);\n  }\n\n  // Perform the redirected request\n  this._performRequest();\n};\n\n// Wraps the key/value object of protocols with redirect functionality\nfunction wrap(protocols) {\n  // Default settings\n  var exports = {\n    maxRedirects: 21,\n    maxBodyLength: 10 * 1024 * 1024,\n  };\n\n  // Wrap each protocol\n  var nativeProtocols = {};\n  Object.keys(protocols).forEach(function (scheme) {\n    var protocol = scheme + \":\";\n    var nativeProtocol = nativeProtocols[protocol] = protocols[scheme];\n    var wrappedProtocol = exports[scheme] = Object.create(nativeProtocol);\n\n    // Executes a request, following redirects\n    function request(input, options, callback) {\n      // Parse parameters, ensuring that input is an object\n      if (isURL(input)) {\n        input = spreadUrlObject(input);\n      }\n      else if (isString(input)) {\n        input = spreadUrlObject(parseUrl(input));\n      }\n      else {\n        callback = options;\n        options = validateUrl(input);\n        input = { protocol: protocol };\n      }\n      if (isFunction(options)) {\n        callback = options;\n        options = null;\n      }\n\n      // Set defaults\n      options = Object.assign({\n        maxRedirects: exports.maxRedirects,\n        maxBodyLength: exports.maxBodyLength,\n      }, input, options);\n      options.nativeProtocols = nativeProtocols;\n      if (!isString(options.host) && !isString(options.hostname)) {\n        options.hostname = \"::1\";\n      }\n\n      assert.equal(options.protocol, protocol, \"protocol mismatch\");\n      debug(\"options\", options);\n      return new RedirectableRequest(options, callback);\n    }\n\n    // Executes a GET request, following redirects\n    function get(input, options, callback) {\n      var wrappedRequest = wrappedProtocol.request(input, options, callback);\n      wrappedRequest.end();\n      return wrappedRequest;\n    }\n\n    // Expose the properties on the wrapped protocol\n    Object.defineProperties(wrappedProtocol, {\n      request: { value: request, configurable: true, enumerable: true, writable: true },\n      get: { value: get, configurable: true, enumerable: true, writable: true },\n    });\n  });\n  return exports;\n}\n\nfunction noop() { /* empty */ }\n\nfunction parseUrl(input) {\n  var parsed;\n  // istanbul ignore else\n  if (useNativeURL) {\n    parsed = new URL(input);\n  }\n  else {\n    // Ensure the URL is valid and absolute\n    parsed = validateUrl(url.parse(input));\n    if (!isString(parsed.protocol)) {\n      throw new InvalidUrlError({ input });\n    }\n  }\n  return parsed;\n}\n\nfunction resolveUrl(relative, base) {\n  // istanbul ignore next\n  return useNativeURL ? new URL(relative, base) : parseUrl(url.resolve(base, relative));\n}\n\nfunction validateUrl(input) {\n  if (/^\\[/.test(input.hostname) && !/^\\[[:0-9a-f]+\\]$/i.test(input.hostname)) {\n    throw new InvalidUrlError({ input: input.href || input });\n  }\n  if (/^\\[/.test(input.host) && !/^\\[[:0-9a-f]+\\](:\\d+)?$/i.test(input.host)) {\n    throw new InvalidUrlError({ input: input.href || input });\n  }\n  return input;\n}\n\nfunction spreadUrlObject(urlObject, target) {\n  var spread = target || {};\n  for (var key of preservedUrlFields) {\n    spread[key] = urlObject[key];\n  }\n\n  // Fix IPv6 hostname\n  if (spread.hostname.startsWith(\"[\")) {\n    spread.hostname = spread.hostname.slice(1, -1);\n  }\n  // Ensure port is a number\n  if (spread.port !== \"\") {\n    spread.port = Number(spread.port);\n  }\n  // Concatenate path\n  spread.path = spread.search ? spread.pathname + spread.search : spread.pathname;\n\n  return spread;\n}\n\nfunction removeMatchingHeaders(regex, headers) {\n  var lastValue;\n  for (var header in headers) {\n    if (regex.test(header)) {\n      lastValue = headers[header];\n      delete headers[header];\n    }\n  }\n  return (lastValue === null || typeof lastValue === \"undefined\") ?\n    undefined : String(lastValue).trim();\n}\n\nfunction createErrorType(code, message, baseClass) {\n  // Create constructor\n  function CustomError(properties) {\n    // istanbul ignore else\n    if (isFunction(Error.captureStackTrace)) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n    Object.assign(this, properties || {});\n    this.code = code;\n    this.message = this.cause ? message + \": \" + this.cause.message : message;\n  }\n\n  // Attach constructor and set default properties\n  CustomError.prototype = new (baseClass || Error)();\n  Object.defineProperties(CustomError.prototype, {\n    constructor: {\n      value: CustomError,\n      enumerable: false,\n    },\n    name: {\n      value: \"Error [\" + code + \"]\",\n      enumerable: false,\n    },\n  });\n  return CustomError;\n}\n\nfunction destroyRequest(request, error) {\n  for (var event of events) {\n    request.removeListener(event, eventHandlers[event]);\n  }\n  request.on(\"error\", noop);\n  request.destroy(error);\n}\n\nfunction isSubdomain(subdomain, domain) {\n  assert(isString(subdomain) && isString(domain));\n  var dot = subdomain.length - domain.length - 1;\n  return dot > 0 && subdomain[dot] === \".\" && subdomain.endsWith(domain);\n}\n\nfunction isString(value) {\n  return typeof value === \"string\" || value instanceof String;\n}\n\nfunction isFunction(value) {\n  return typeof value === \"function\";\n}\n\nfunction isBuffer(value) {\n  return typeof value === \"object\" && (\"length\" in value);\n}\n\nfunction isURL(value) {\n  return URL && value instanceof URL;\n}\n\n// Exports\nmodule.exports = wrap({ http: http, https: https });\nmodule.exports.wrap = wrap;\n","'use strict';\n\nvar reflectGetProto = require('./Reflect.getPrototypeOf');\nvar originalGetProto = require('./Object.getPrototypeOf');\n\nvar getDunderProto = require('dunder-proto/get');\n\n/** @type {import('.')} */\nmodule.exports = reflectGetProto\n\t? function getProto(O) {\n\t\t// @ts-expect-error TS can't narrow inside a closure, for some reason\n\t\treturn reflectGetProto(O);\n\t}\n\t: originalGetProto\n\t\t? function getProto(O) {\n\t\t\tif (!O || (typeof O !== 'object' && typeof O !== 'function')) {\n\t\t\t\tthrow new TypeError('getProto: not an object');\n\t\t\t}\n\t\t\t// @ts-expect-error TS can't narrow inside a closure, for some reason\n\t\t\treturn originalGetProto(O);\n\t\t}\n\t\t: getDunderProto\n\t\t\t? function getProto(O) {\n\t\t\t\t// @ts-expect-error TS can't narrow inside a closure, for some reason\n\t\t\t\treturn getDunderProto(O);\n\t\t\t}\n\t\t\t: null;\n","'use strict';\n\nvar origSymbol = typeof Symbol !== 'undefined' && Symbol;\nvar hasSymbolSham = require('./shams');\n\n/** @type {import('.')} */\nmodule.exports = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n","import * as vscode from 'vscode';\nimport { StatusTreeProvider } from './providers/statusTreeProvider';\nimport { AgentTreeProvider, AgentItem, setExtensionPath } from './providers/agentTreeProvider';\nimport { ChatWindowProvider } from './providers/chatWindowProvider';\nimport { WorkflowTreeProvider } from './providers/workflowTreeProvider';\nimport { WorkflowPanelProvider } from './providers/workflowPanelProvider';\nimport { WelcomeViewProvider } from './providers/welcomeViewProvider';\nimport { HealthCheckService } from './services/healthCheckService';\nimport { AuraApiService, AgentInfo } from './services/auraApiService';\nimport { gitService } from './services/gitService';\nimport { LogService } from './services/logService';\n\nlet auraApiService: AuraApiService;\nlet healthCheckService: HealthCheckService;\nlet logService: LogService;\nlet statusTreeProvider: StatusTreeProvider;\nlet agentTreeProvider: AgentTreeProvider;\nlet workflowTreeProvider: WorkflowTreeProvider;\nlet welcomeViewProvider: WelcomeViewProvider;\nlet chatWindowProvider: ChatWindowProvider;\nlet workflowPanelProvider: WorkflowPanelProvider;\nlet statusBarItem: vscode.StatusBarItem;\nlet refreshInterval: NodeJS.Timeout | undefined;\nlet currentRefreshRate: number = 10000; // Default 10 second refresh\nconst FAST_REFRESH_RATE = 1000; // 1 second when indexing\nconst NORMAL_REFRESH_RATE = 10000; // 10 seconds normally\n\nexport async function activate(context: vscode.ExtensionContext) {\n    console.log('Aura extension activating...');\n\n    // Set default context values immediately - assume not onboarded until we check\n    // This ensures views with when clauses behave correctly from the start\n    await vscode.commands.executeCommand('setContext', 'aura.workspaceOnboarded', false);\n    await vscode.commands.executeCommand('setContext', 'aura.workspaceNotOnboarded', true);\n\n    // Set extension path for resource loading\n    setExtensionPath(context.extensionPath);\n\n    // Initialize services\n    auraApiService = new AuraApiService();\n    healthCheckService = new HealthCheckService(auraApiService);\n    logService = new LogService();\n\n    // Initialize tree providers\n    statusTreeProvider = new StatusTreeProvider(healthCheckService);\n    agentTreeProvider = new AgentTreeProvider(auraApiService);\n    workflowTreeProvider = new WorkflowTreeProvider(auraApiService);\n    welcomeViewProvider = new WelcomeViewProvider(auraApiService);\n    chatWindowProvider = new ChatWindowProvider(context.extensionUri, auraApiService);\n    workflowPanelProvider = new WorkflowPanelProvider(context.extensionUri, auraApiService);\n\n    // Register tree views\n    const statusView = vscode.window.createTreeView('aura.status', {\n        treeDataProvider: statusTreeProvider,\n        showCollapseAll: false\n    });\n\n    const welcomeView = vscode.window.createTreeView('aura.welcome', {\n        treeDataProvider: welcomeViewProvider,\n        showCollapseAll: false\n    });\n\n    const workflowView = vscode.window.createTreeView('aura.workflows', {\n        treeDataProvider: workflowTreeProvider,\n        showCollapseAll: true\n    });\n\n    const agentView = vscode.window.createTreeView('aura.agents', {\n        treeDataProvider: agentTreeProvider,\n        showCollapseAll: true\n    });\n\n    // Create status bar item - clicking opens current story panel\n    statusBarItem = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Right, 100);\n    statusBarItem.command = 'aura.showCurrentStory';\n    statusBarItem.show();\n    updateStatusBar('checking');\n\n    // Register commands\n    const refreshCommand = vscode.commands.registerCommand('aura.refreshStatus', async () => {\n        await refreshAll();\n    });\n\n    const startCommand = vscode.commands.registerCommand('aura.startServices', async () => {\n        vscode.window.showInformationMessage('Starting Aura services... (Aspire orchestration coming soon)');\n    });\n\n    const stopCommand = vscode.commands.registerCommand('aura.stopServices', async () => {\n        vscode.window.showInformationMessage('Stopping Aura services... (Aspire orchestration coming soon)');\n    });\n\n    const executeAgentCommand = vscode.commands.registerCommand('aura.executeAgent', async (item?: AgentItem) => {\n        await executeAgent(item);\n    });\n\n    const quickExecuteCommand = vscode.commands.registerCommand('aura.quickExecute', async () => {\n        await executeAgent();\n    });\n\n    const selectAgentCommand = vscode.commands.registerCommand('aura.selectAgent', async (agent: AgentInfo) => {\n        const actions = [\n            { label: '$(comment) Chat with this agent', action: 'chat' },\n            { label: '$(info) View details', action: 'details' },\n            { label: '$(copy) Copy agent ID', action: 'copy' }\n        ];\n\n        const selected = await vscode.window.showQuickPick(actions, {\n            placeHolder: `${agent.name} - Select action`\n        });\n\n        if (!selected) return;\n\n        switch (selected.action) {\n            case 'chat':\n                await openChatWindow(agent);\n                break;\n            case 'details':\n                showAgentDetails(agent);\n                break;\n            case 'copy':\n                await vscode.env.clipboard.writeText(agent.id);\n                vscode.window.showInformationMessage(`Copied agent ID: ${agent.id}`);\n                break;\n        }\n    });\n\n    // Open Chat command\n    const openChatCommand = vscode.commands.registerCommand('aura.openChat', async () => {\n        try {\n            const agents = await auraApiService.getAgents();\n            if (agents.length === 0) {\n                vscode.window.showWarningMessage('No agents available');\n                return;\n            }\n\n            const items = agents.map(a => ({\n                label: a.name,\n                description: a.model,\n                detail: a.description,\n                agent: a\n            }));\n\n            const selected = await vscode.window.showQuickPick(items, {\n                placeHolder: 'Select an agent to chat with'\n            });\n\n            if (selected) {\n                await chatWindowProvider.openChatWindow(selected.agent);\n            }\n        } catch (error) {\n            vscode.window.showErrorMessage('Failed to load agents');\n        }\n    });\n\n    // RAG Commands\n    const indexWorkspaceCommand = vscode.commands.registerCommand('aura.indexWorkspace', async () => {\n        await indexWorkspace();\n    });\n\n    const showRagStatsCommand = vscode.commands.registerCommand('aura.showRagStats', async () => {\n        await showRagStats();\n    });\n\n    const clearRagIndexCommand = vscode.commands.registerCommand('aura.clearRagIndex', async () => {\n        await clearRagIndex();\n    });\n\n    const clearAndReindexCommand = vscode.commands.registerCommand('aura.clearAndReindex', async () => {\n        await clearAndReindex();\n    });\n\n    const showIndexingProgressCommand = vscode.commands.registerCommand('aura.showIndexingProgress', async () => {\n        await showIndexingProgress();\n    });\n\n    // Workspace onboarding command\n    const onboardWorkspaceCommand = vscode.commands.registerCommand('aura.onboardWorkspace', async () => {\n        await onboardWorkspace();\n    });\n\n    // Workflow commands\n    const createWorkflowCommand = vscode.commands.registerCommand('aura.createWorkflow', async () => {\n        await createWorkflow();\n    });\n\n    const openWorkflowCommand = vscode.commands.registerCommand('aura.openWorkflow', async (workflowId: string) => {\n        await workflowPanelProvider.openWorkflowPanel(workflowId);\n    });\n\n    const executeStepCommand = vscode.commands.registerCommand('aura.executeStep', async (workflowId: string, stepId: string) => {\n        await executeStep(workflowId, stepId);\n    });\n\n    const refreshWorkflowsCommand = vscode.commands.registerCommand('aura.refreshWorkflows', async () => {\n        workflowTreeProvider.refresh();\n    });\n\n    const deleteWorkflowCommand = vscode.commands.registerCommand('aura.deleteWorkflow', async (item?: any) => {\n        await deleteWorkflow(item);\n    });\n\n    // Help commands\n    const showHelpCommand = vscode.commands.registerCommand('aura.showHelp', async () => {\n        const items: vscode.QuickPickItem[] = [\n            { label: '$(rocket) Getting Started', description: 'Open the Aura walkthrough' },\n            { label: '$(book) Documentation', description: 'Open full documentation' },\n            { label: '$(note) Quick Reference', description: 'Show keyboard shortcuts and tips' },\n            { label: '$(comment-discussion) Use Cases', description: 'See practical examples' },\n            { label: '$(output) View Logs', description: 'Show Aura API logs' },\n        ];\n        const selected = await vscode.window.showQuickPick(items, {\n            placeHolder: 'How can we help?'\n        });\n        if (selected) {\n            if (selected.label.includes('Getting Started')) {\n                vscode.commands.executeCommand('workbench.action.openWalkthrough', 'aura.aura#aura.gettingStarted');\n            } else if (selected.label.includes('Documentation')) {\n                vscode.commands.executeCommand('aura.openDocs');\n            } else if (selected.label.includes('Quick Reference')) {\n                vscode.commands.executeCommand('aura.showCheatSheet');\n            } else if (selected.label.includes('Use Cases')) {\n                openDocFile('user-guide/use-cases.md');\n            } else if (selected.label.includes('View Logs')) {\n                vscode.commands.executeCommand('aura.showLogs');\n            }\n        }\n    });\n\n    const openDocsCommand = vscode.commands.registerCommand('aura.openDocs', async () => {\n        openDocFile('README.md');\n    });\n\n    const showCheatSheetCommand = vscode.commands.registerCommand('aura.showCheatSheet', async () => {\n        showCheatSheet();\n    });\n\n    const openGettingStartedCommand = vscode.commands.registerCommand('aura.openGettingStarted', async () => {\n        vscode.commands.executeCommand('workbench.action.openWalkthrough', 'aura.aura#aura.gettingStarted');\n    });\n\n    // Log commands\n    const showLogsCommand = vscode.commands.registerCommand('aura.showLogs', () => {\n        logService.showLogs();\n    });\n\n    const openLogFileCommand = vscode.commands.registerCommand('aura.openLogFile', async () => {\n        await logService.openLogFile();\n    });\n\n    const openLogFolderCommand = vscode.commands.registerCommand('aura.openLogFolder', () => {\n        logService.openLogFolder();\n    });\n\n    // Code Graph query commands\n    const findImplementationsCommand = vscode.commands.registerCommand('aura.findImplementations', async () => {\n        await findImplementations();\n    });\n\n    const findCallersCommand = vscode.commands.registerCommand('aura.findCallers', async () => {\n        await findCallers();\n    });\n\n    const showTypeMembersCommand = vscode.commands.registerCommand('aura.showTypeMembers', async () => {\n        await showTypeMembers();\n    });\n\n    // Story/Issue integration commands\n    const createStoryFromIssueCommand = vscode.commands.registerCommand('aura.createStoryFromIssue', async () => {\n        await createStoryFromIssue();\n    });\n\n    const refreshFromIssueCommand = vscode.commands.registerCommand('aura.refreshFromIssue', async (workflowId?: string) => {\n        await refreshFromIssue(workflowId);\n    });\n\n    const postUpdateToIssueCommand = vscode.commands.registerCommand('aura.postUpdateToIssue', async (workflowId?: string) => {\n        await postUpdateToIssue(workflowId);\n    });\n\n    const openStoryWorktreeCommand = vscode.commands.registerCommand('aura.openStoryWorktree', async (worktreePath?: string) => {\n        if (worktreePath) {\n            await vscode.commands.executeCommand('vscode.openFolder', vscode.Uri.file(worktreePath), { forceNewWindow: true });\n        }\n    });\n\n    const showCurrentStoryCommand = vscode.commands.registerCommand('aura.showCurrentStory', async () => {\n        await showCurrentStory();\n    });\n\n    // Subscribe to configuration changes\n    const configWatcher = vscode.workspace.onDidChangeConfiguration(e => {\n        if (e.affectsConfiguration('aura')) {\n            setupAutoRefresh();\n        }\n    });\n\n    // Register MCP (Model Context Protocol) server definition provider\n    // This exposes Aura's RAG and Code Graph context to GitHub Copilot\n    let mcpProvider: vscode.Disposable | undefined;\n    try {\n        // Check if the MCP API is available (VS Code 1.100+)\n        if ('lm' in vscode && typeof (vscode as any).lm?.registerMcpServerDefinitionProvider === 'function') {\n            const apiUrl = vscode.workspace.getConfiguration('aura').get<string>('apiUrl') || 'http://localhost:5300';\n            \n            mcpProvider = (vscode as any).lm.registerMcpServerDefinitionProvider('aura.context', {\n                onDidChangeMcpServerDefinitions: new vscode.EventEmitter<void>().event,\n                \n                provideMcpServerDefinitions: async (_token: vscode.CancellationToken) => {\n                    // Return Aura as an HTTP MCP server\n                    return [\n                        new (vscode as any).McpHttpServerDefinition(\n                            'Aura Codebase Context',\n                            vscode.Uri.parse(`${apiUrl}/mcp`),\n                            {}, // headers\n                            '1.2.0'\n                        )\n                    ];\n                },\n                \n                resolveMcpServerDefinition: async (server: any, _token: vscode.CancellationToken) => server\n            });\n            \n            console.log('Aura MCP server provider registered');\n        } else {\n            console.log('MCP API not available - GitHub Copilot integration disabled');\n        }\n    } catch (err) {\n        console.warn('Failed to register MCP provider:', err);\n    }\n\n    // Add disposables\n    context.subscriptions.push(\n        statusView,\n        welcomeView,\n        workflowView,\n        agentView,\n        statusBarItem,\n        refreshCommand,\n        startCommand,\n        stopCommand,\n        executeAgentCommand,\n        quickExecuteCommand,\n        selectAgentCommand,\n        openChatCommand,\n        indexWorkspaceCommand,\n        showRagStatsCommand,\n        clearRagIndexCommand,\n        clearAndReindexCommand,\n        showIndexingProgressCommand,\n        onboardWorkspaceCommand,\n        createWorkflowCommand,\n        openWorkflowCommand,\n        executeStepCommand,\n        refreshWorkflowsCommand,\n        deleteWorkflowCommand,\n        showHelpCommand,\n        openDocsCommand,\n        showCheatSheetCommand,\n        openGettingStartedCommand,\n        showLogsCommand,\n        openLogFileCommand,\n        openLogFolderCommand,\n        findImplementationsCommand,\n        findCallersCommand,\n        showTypeMembersCommand,\n        createStoryFromIssueCommand,\n        refreshFromIssueCommand,\n        postUpdateToIssueCommand,\n        openStoryWorktreeCommand,\n        showCurrentStoryCommand,\n        configWatcher,\n        { dispose: () => logService.dispose() }\n    );\n    \n    // Add MCP provider if available\n    if (mcpProvider) {\n        context.subscriptions.push(mcpProvider);\n    }\n\n    // Initial refresh\n    await refreshAll();\n\n    // Check workspace onboarding status and set context for view visibility\n    await checkOnboardingStatus();\n\n    // Check if this workspace is a workflow worktree and auto-open the panel\n    await checkAndOpenWorkflowForWorktree();\n\n    // Setup auto-refresh\n    setupAutoRefresh();\n\n    console.log('Aura extension activated');\n}\n\n// =====================\n// RAG Functions\n// =====================\n\nasync function indexWorkspace(): Promise<void> {\n    const workspaceFolders = vscode.workspace.workspaceFolders;\n    if (!workspaceFolders || workspaceFolders.length === 0) {\n        vscode.window.showWarningMessage('No workspace folder open');\n        return;\n    }\n\n    const workspacePath = workspaceFolders[0].uri.fsPath;\n\n    try {\n        // Check if workspace is already onboarded\n        const status = await auraApiService.getWorkspaceStatus(workspacePath);\n        \n        if (!status.isOnboarded) {\n            // Not onboarded - use onboardWorkspace to create workspace record and start indexing\n            const result = await auraApiService.onboardWorkspace(workspacePath, {\n                excludePatterns: ['**/node_modules/**', '**/bin/**', '**/obj/**', '**/.git/**']\n            });\n            \n            if (result.success && result.jobId) {\n                vscode.window.showInformationMessage(`Indexing started (Job: ${result.jobId.slice(0, 8)}...)`);\n                updateIndexingStatusBar(result.jobId);\n                \n                // Update context\n                await vscode.commands.executeCommand('setContext', 'aura.workspaceOnboarded', true);\n                await vscode.commands.executeCommand('setContext', 'aura.workspaceNotOnboarded', false);\n            }\n        } else {\n            // Already onboarded - trigger a re-index through workspace API\n            const result = await auraApiService.reindexWorkspace(workspacePath);\n            vscode.window.showInformationMessage(`Re-indexing started (Job: ${result.jobId.slice(0, 8)}...)`);\n            updateIndexingStatusBar(result.jobId);\n        }\n    } catch (error) {\n        const message = error instanceof Error ? error.message : 'Unknown error';\n        vscode.window.showErrorMessage(`Failed to start indexing: ${message}`);\n    }\n}\n\n/**\n * Check if the current workspace is onboarded and set VS Code context accordingly.\n * This controls which views are shown (welcome vs workflows).\n * For worktrees, we check the parent repository's onboarding status.\n */\nasync function checkOnboardingStatus(): Promise<void> {\n    const workspaceFolders = vscode.workspace.workspaceFolders;\n    if (!workspaceFolders || workspaceFolders.length === 0) {\n        // No workspace - show welcome to guide user\n        console.log('[Aura] No workspace folders, setting not onboarded');\n        await vscode.commands.executeCommand('setContext', 'aura.workspaceOnboarded', false);\n        await vscode.commands.executeCommand('setContext', 'aura.workspaceNotOnboarded', true);\n        await vscode.commands.executeCommand('setContext', 'aura.isWorktree', false);\n        return;\n    }\n\n    const workspacePath = workspaceFolders[0].uri.fsPath;\n    console.log('[Aura] Checking onboarding status for:', workspacePath);\n\n    // Check if this is a worktree and get the canonical repository path\n    const repoInfo = await gitService.getRepositoryInfo(workspacePath);\n    const canonicalPath = repoInfo?.canonicalPath ?? workspacePath;\n    const isWorktree = repoInfo?.isWorktree ?? false;\n\n    await vscode.commands.executeCommand('setContext', 'aura.isWorktree', isWorktree);\n\n    if (isWorktree) {\n        console.log('[Aura] Workspace is a worktree, using parent path:', canonicalPath);\n    }\n\n    try {\n        const status = await auraApiService.getWorkspaceStatus(canonicalPath);\n        console.log('[Aura] API returned status:', JSON.stringify(status));\n        \n        if (status.isOnboarded) {\n            console.log('[Aura] Workspace IS onboarded, hiding welcome view');\n            await vscode.commands.executeCommand('setContext', 'aura.workspaceOnboarded', true);\n            await vscode.commands.executeCommand('setContext', 'aura.workspaceNotOnboarded', false);\n            if (isWorktree) {\n                console.log(`Worktree using parent index: ${canonicalPath} (${status.stats.files} files, ${status.stats.chunks} chunks)`);\n            } else {\n                console.log(`Workspace onboarded: ${canonicalPath} (${status.stats.files} files, ${status.stats.chunks} chunks)`);\n            }\n        } else {\n            console.log('[Aura] Workspace NOT onboarded, showing welcome view');\n            await vscode.commands.executeCommand('setContext', 'aura.workspaceOnboarded', false);\n            await vscode.commands.executeCommand('setContext', 'aura.workspaceNotOnboarded', true);\n            console.log(`Workspace not onboarded: ${canonicalPath}`);\n        }\n    } catch (error) {\n        // If API call fails, assume not onboarded (will show welcome view)\n        console.log('[Aura] Failed to check onboarding status:', error);\n        await vscode.commands.executeCommand('setContext', 'aura.workspaceOnboarded', false);\n        await vscode.commands.executeCommand('setContext', 'aura.workspaceNotOnboarded', true);\n    }\n}\n\n/**\n * Check if the current workspace is a workflow worktree and auto-open the workflow panel.\n * This provides the \"continue existing story\" experience.\n */\nasync function checkAndOpenWorkflowForWorktree(): Promise<void> {\n    const workspaceFolders = vscode.workspace.workspaceFolders;\n    if (!workspaceFolders || workspaceFolders.length === 0) {\n        return;\n    }\n\n    const workspacePath = workspaceFolders[0].uri.fsPath;\n    console.log('[Aura] Checking if workspace is a workflow worktree:', workspacePath);\n\n    try {\n        const workflow = await auraApiService.getWorkflowByPath(workspacePath);\n        if (workflow) {\n            console.log('[Aura] Found workflow for worktree:', workflow.id, workflow.title);\n            \n            // Find current/next step\n            const steps = workflow.steps || [];\n            const currentStep = steps.find((s: any) => s.status === 'Running' || s.status === 'Pending');\n            const completedCount = steps.filter((s: any) => s.status === 'Completed').length;\n            const totalCount = steps.length;\n            \n            // Build message with progress\n            let message = ` ${workflow.title}`;\n            if (totalCount > 0) {\n                message += ` (${completedCount}/${totalCount} steps)`;\n            }\n            if (currentStep) {\n                message += `\\n Next: ${currentStep.name}`;\n            }\n\n            // Show notification with action buttons\n            const action = await vscode.window.showInformationMessage(\n                message,\n                'Open Story Panel',\n                'Dismiss'\n            );\n\n            if (action === 'Open Story Panel') {\n                await workflowPanelProvider.openWorkflowPanel(workflow.id);\n            }\n        } else {\n            console.log('[Aura] No workflow found for this path');\n        }\n    } catch (error) {\n        // Silently fail - this is an enhancement, not critical\n        console.log('[Aura] Failed to check for workflow worktree:', error);\n    }\n}\n\n/**\n * Show the current story panel for this workspace.\n * Called via command palette or keyboard shortcut.\n */\nasync function showCurrentStory(): Promise<void> {\n    const workspaceFolders = vscode.workspace.workspaceFolders;\n    if (!workspaceFolders || workspaceFolders.length === 0) {\n        vscode.window.showWarningMessage('No workspace folder open');\n        return;\n    }\n\n    const workspacePath = workspaceFolders[0].uri.fsPath;\n\n    try {\n        const workflow = await auraApiService.getWorkflowByPath(workspacePath);\n        if (workflow) {\n            await workflowPanelProvider.openWorkflowPanel(workflow.id);\n        } else {\n            // No workflow for this path - offer to pick from list or create new\n            const items: vscode.QuickPickItem[] = [\n                { label: '$(add) Create New Story', description: 'Start a new development story' },\n                { label: '$(list-unordered) Browse All Stories', description: 'View existing stories' }\n            ];\n\n            const selected = await vscode.window.showQuickPick(items, {\n                placeHolder: 'No active story for this workspace'\n            });\n\n            if (selected?.label.includes('Create New')) {\n                await vscode.commands.executeCommand('aura.createWorkflow');\n            } else if (selected?.label.includes('Browse All')) {\n                // Focus the workflows sidebar\n                await vscode.commands.executeCommand('aura.workflows.focus');\n            }\n        }\n    } catch (error) {\n        vscode.window.showErrorMessage(`Failed to find current story: ${error}`);\n    }\n}\n\nasync function onboardWorkspace(): Promise<void> {\n    const workspaceFolders = vscode.workspace.workspaceFolders;\n    if (!workspaceFolders || workspaceFolders.length === 0) {\n        vscode.window.showWarningMessage('No workspace folder open');\n        return;\n    }\n\n    const workspacePath = workspaceFolders[0].uri.fsPath;\n\n    try {\n        vscode.window.showInformationMessage(' Enabling Aura for this workspace...');\n\n        // Call the onboard API\n        const result = await auraApiService.onboardWorkspace(workspacePath);\n\n        if (result.success) {\n            // Update context to show onboarded views\n            await vscode.commands.executeCommand('setContext', 'aura.workspaceOnboarded', true);\n            await vscode.commands.executeCommand('setContext', 'aura.workspaceNotOnboarded', false);\n\n            // Show progress for indexing\n            if (result.jobId) {\n                updateIndexingStatusBar(result.jobId);\n            }\n\n            // Show setup actions\n            const actions = result.setupActions?.join(', ') || 'Indexing started';\n            vscode.window.showInformationMessage(` Aura enabled: ${actions}`);\n\n            // Refresh views\n            statusTreeProvider.refresh();\n            workflowTreeProvider.refresh();\n            welcomeViewProvider.refresh();\n        }\n    } catch (error) {\n        const message = error instanceof Error ? error.message : 'Unknown error';\n        vscode.window.showErrorMessage(`Failed to enable Aura: ${message}`);\n    }\n}\n\nlet indexingStatusBarItem: vscode.StatusBarItem | undefined;\nlet indexingPollInterval: NodeJS.Timeout | undefined;\n\nfunction updateIndexingStatusBar(jobId: string): void {\n    // Create or show indexing status bar item\n    if (!indexingStatusBarItem) {\n        indexingStatusBarItem = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Right, 99);\n    }\n\n    indexingStatusBarItem.text = '$(sync~spin) Indexing...';\n    indexingStatusBarItem.tooltip = 'Background indexing in progress';\n    indexingStatusBarItem.command = 'aura.showIndexingProgress';\n    indexingStatusBarItem.show();\n\n    // Poll for progress\n    indexingPollInterval = setInterval(async () => {\n        try {\n            const status = await auraApiService.getBackgroundJobStatus(jobId);\n            \n            if (status.state === 'Processing') {\n                const percent = status.totalItems > 0 \n                    ? Math.round((status.processedItems / status.totalItems) * 100)\n                    : 0;\n                indexingStatusBarItem!.text = `$(sync~spin) Indexing ${percent}%`;\n                indexingStatusBarItem!.tooltip = `Indexing: ${status.processedItems}/${status.totalItems} files`;\n                \n                // Refresh status tree to keep panel in sync\n                statusTreeProvider.refresh();\n            } else if (status.state === 'Completed') {\n                clearInterval(indexingPollInterval);\n                indexingPollInterval = undefined;\n                \n                indexingStatusBarItem!.text = '$(check) Indexed';\n                indexingStatusBarItem!.tooltip = `Completed: ${status.processedItems} files indexed`;\n                \n                // Hide after 5 seconds\n                setTimeout(() => {\n                    indexingStatusBarItem?.hide();\n                }, 5000);\n\n                // Refresh status tree\n                statusTreeProvider.refresh();\n                vscode.window.showInformationMessage(` Indexed ${status.processedItems} files`);\n            } else if (status.state === 'Failed') {\n                clearInterval(indexingPollInterval);\n                indexingPollInterval = undefined;\n                \n                indexingStatusBarItem!.text = '$(error) Index Failed';\n                indexingStatusBarItem!.tooltip = status.error || 'Indexing failed';\n                indexingStatusBarItem!.backgroundColor = new vscode.ThemeColor('statusBarItem.errorBackground');\n                \n                vscode.window.showErrorMessage(`Indexing failed: ${status.error}`);\n            }\n        } catch (error) {\n            console.error('Failed to poll indexing status:', error);\n        }\n    }, 1000);\n}\n\nasync function showRagStats(): Promise<void> {\n    try {\n        const stats = await auraApiService.getRagStats();\n        const health = await auraApiService.getRagHealth();\n\n        const message = `RAG Index Status:\n Documents: ${stats.totalDocuments}\n Chunks: ${stats.totalChunks}\n Health: ${health.healthy ? 'Healthy' : 'Unhealthy'}`;\n\n        vscode.window.showInformationMessage(message, 'Index Workspace', 'Clear Index')\n            .then(action => {\n                if (action === 'Index Workspace') {\n                    vscode.commands.executeCommand('aura.indexWorkspace');\n                } else if (action === 'Clear Index') {\n                    vscode.commands.executeCommand('aura.clearRagIndex');\n                }\n            });\n    } catch (error) {\n        const message = error instanceof Error ? error.message : 'Unknown error';\n        vscode.window.showErrorMessage(`Failed to get RAG stats: ${message}`);\n    }\n}\n\nasync function clearRagIndex(): Promise<void> {\n    const workspaceFolders = vscode.workspace.workspaceFolders;\n    if (!workspaceFolders || workspaceFolders.length === 0) {\n        vscode.window.showWarningMessage('No workspace folder open');\n        return;\n    }\n\n    const workspacePath = workspaceFolders[0].uri.fsPath;\n    const workspaceName = workspaceFolders[0].name;\n\n    const confirm = await vscode.window.showWarningMessage(\n        `Clear all indexed data for \"${workspaceName}\"? This cannot be undone.`,\n        { modal: true },\n        'Clear Index'\n    );\n\n    if (confirm !== 'Clear Index') return;\n\n    try {\n        await auraApiService.removeWorkspace(workspacePath);\n        vscode.window.showInformationMessage(`Index cleared for ${workspaceName}`);\n        statusTreeProvider.refresh();\n        await checkOnboardingStatus();\n    } catch (error) {\n        const message = error instanceof Error ? error.message : 'Unknown error';\n        vscode.window.showErrorMessage(`Failed to clear index: ${message}`);\n    }\n}\n\nasync function clearAndReindex(): Promise<void> {\n    const workspaceFolders = vscode.workspace.workspaceFolders;\n    if (!workspaceFolders || workspaceFolders.length === 0) {\n        vscode.window.showWarningMessage('No workspace folder open');\n        return;\n    }\n\n    const workspacePath = workspaceFolders[0].uri.fsPath;\n    const workspaceName = workspaceFolders[0].name;\n\n    const confirm = await vscode.window.showWarningMessage(\n        `Clear and reindex \"${workspaceName}\"? This will delete all indexed data and rebuild from scratch.`,\n        { modal: true },\n        'Clear & Reindex'\n    );\n\n    if (confirm !== 'Clear & Reindex') return;\n\n    try {\n        // First, try to remove existing workspace (ignore if not found)\n        try {\n            await auraApiService.removeWorkspace(workspacePath);\n        } catch {\n            // Workspace may not exist yet, that's fine\n        }\n\n        // Now onboard fresh\n        const result = await auraApiService.onboardWorkspace(workspacePath, {\n            excludePatterns: ['**/node_modules/**', '**/bin/**', '**/obj/**', '**/.git/**']\n        });\n\n        if (result.success && result.jobId) {\n            vscode.window.showInformationMessage(`Reindexing started (Job: ${result.jobId.slice(0, 8)}...)`);\n            updateIndexingStatusBar(result.jobId);\n            \n            await vscode.commands.executeCommand('setContext', 'aura.workspaceOnboarded', true);\n            await vscode.commands.executeCommand('setContext', 'aura.workspaceNotOnboarded', false);\n        }\n        \n        statusTreeProvider.refresh();\n    } catch (error) {\n        const message = error instanceof Error ? error.message : 'Unknown error';\n        vscode.window.showErrorMessage(`Failed to clear and reindex: ${message}`);\n    }\n}\n\nasync function showIndexingProgress(): Promise<void> {\n    // Show current indexing status in an info message\n    try {\n        const stats = await auraApiService.getRagStats();\n        vscode.window.showInformationMessage(\n            `RAG Index: ${stats.totalDocuments} symbols, ${stats.totalChunks} embeddings`,\n            'Index Workspace'\n        ).then(action => {\n            if (action === 'Index Workspace') {\n                vscode.commands.executeCommand('aura.indexWorkspace');\n            }\n        });\n    } catch {\n        vscode.window.showInformationMessage('Click the status bar icon while indexing to see progress');\n    }\n}\n\n// =====================\n// Existing Functions\n// =====================\n\nasync function refreshAll(): Promise<void> {\n    updateStatusBar('checking');\n\n    try {\n        await healthCheckService.checkAll();\n        statusTreeProvider.refresh();\n        agentTreeProvider.refresh();\n\n        const status = healthCheckService.getOverallStatus();\n        updateStatusBar(status);\n        \n        // Check if indexing is in progress and adjust refresh rate\n        const ragStatus = healthCheckService.getStatuses().rag;\n        const isIndexing = ragStatus?.isIndexing === true;\n        adjustRefreshRate(isIndexing);\n    } catch (error) {\n        console.error('Error refreshing status:', error);\n        updateStatusBar('error');\n    }\n}\n\nfunction updateStatusBar(status: 'healthy' | 'degraded' | 'error' | 'checking'): void {\n    const icons: Record<string, string> = {\n        healthy: '$(check)',\n        degraded: '$(warning)',\n        error: '$(error)',\n        checking: '$(sync~spin)'\n    };\n\n    const colors: Record<string, vscode.ThemeColor | undefined> = {\n        healthy: undefined,\n        degraded: new vscode.ThemeColor('statusBarItem.warningBackground'),\n        error: new vscode.ThemeColor('statusBarItem.errorBackground'),\n        checking: undefined\n    };\n\n    statusBarItem.text = `${icons[status]} Aura`;\n    statusBarItem.backgroundColor = colors[status];\n    statusBarItem.tooltip = `Aura: ${status} (click to show current story)`;\n}\n\nfunction setupAutoRefresh(): void {\n    if (refreshInterval) {\n        clearInterval(refreshInterval);\n        refreshInterval = undefined;\n    }\n\n    const config = vscode.workspace.getConfiguration('aura');\n    const autoRefresh = config.get<boolean>('autoRefresh', true);\n\n    if (autoRefresh) {\n        currentRefreshRate = NORMAL_REFRESH_RATE;\n        refreshInterval = setInterval(refreshAll, currentRefreshRate);\n    }\n}\n\nfunction adjustRefreshRate(isIndexing: boolean): void {\n    const config = vscode.workspace.getConfiguration('aura');\n    const autoRefresh = config.get<boolean>('autoRefresh', true);\n    if (!autoRefresh) return;\n\n    const targetRate = isIndexing ? FAST_REFRESH_RATE : NORMAL_REFRESH_RATE;\n    \n    // Only change if rate is different\n    if (currentRefreshRate !== targetRate) {\n        if (refreshInterval) {\n            clearInterval(refreshInterval);\n        }\n        currentRefreshRate = targetRate;\n        refreshInterval = setInterval(refreshAll, currentRefreshRate);\n        console.log(`[Aura] Adjusted refresh rate to ${currentRefreshRate}ms (indexing: ${isIndexing})`);\n    }\n}\n\nasync function openChatWindow(agent: AgentInfo): Promise<void> {\n    await chatWindowProvider.openChatWindow(agent);\n}\n\nasync function executeAgentById(agentId: string, agentName: string): Promise<void> {\n    const prompt = await vscode.window.showInputBox({\n        prompt: `Enter prompt for ${agentName}`,\n        placeHolder: 'What would you like the agent to do?'\n    });\n\n    if (!prompt) return;\n\n    const workspacePath = vscode.workspace.workspaceFolders?.[0]?.uri.fsPath;\n\n    await vscode.window.withProgress(\n        {\n            location: vscode.ProgressLocation.Notification,\n            title: `Executing ${agentName}...`,\n            cancellable: false\n        },\n        async () => {\n            const result = await auraApiService.executeAgent(agentId, prompt, workspacePath);\n\n            const doc = await vscode.workspace.openTextDocument({\n                content: `# Agent: ${agentName}\\n\\n## Prompt\\n${prompt}\\n\\n## Response\\n${result}`,\n                language: 'markdown'\n            });\n            await vscode.window.showTextDocument(doc);\n        }\n    );\n}\n\nfunction showAgentDetails(agent: AgentInfo): void {\n    const capabilities = agent.capabilities?.join(', ') || 'none';\n    const languages = agent.languages?.join(', ') || 'all';\n    const priority = agent.priority ?? 'default';\n\n    const details = `\n# ${agent.name}\n\n## Overview\n- **ID:** ${agent.id}\n- **Model:** ${agent.model}\n- **Provider:** ${agent.provider || 'ollama'}\n- **Priority:** ${priority}\n\n## Capabilities\n${capabilities}\n\n## Language Support\n${languages}\n`;\n\n    vscode.workspace.openTextDocument({\n        content: details.trim(),\n        language: 'markdown'\n    }).then(doc => vscode.window.showTextDocument(doc));\n}\n\nasync function executeAgent(item?: AgentItem): Promise<void> {\n    try {\n        let agentId: string;\n        let agentName: string;\n\n        if (item && item.agent.id !== 'offline') {\n            agentId = item.agent.id;\n            agentName = item.agent.name;\n        } else {\n            const agents = await auraApiService.getAgents();\n            if (agents.length === 0) {\n                vscode.window.showWarningMessage('No agents available');\n                return;\n            }\n\n            interface AgentPickItem extends vscode.QuickPickItem {\n                id: string;\n            }\n\n            const pickItems: AgentPickItem[] = agents.map((a: AgentInfo) => ({\n                label: a.name,\n                description: a.model,\n                id: a.id\n            }));\n\n            const picked = await vscode.window.showQuickPick(pickItems, {\n                placeHolder: 'Select an agent to execute'\n            });\n\n            if (!picked) return;\n\n            agentId = picked.id;\n            agentName = picked.label;\n        }\n\n        const prompt = await vscode.window.showInputBox({\n            prompt: `Enter prompt for ${agentName}`,\n            placeHolder: 'What would you like the agent to do?'\n        });\n\n        if (!prompt) return;\n\n        const workspacePath = vscode.workspace.workspaceFolders?.[0]?.uri.fsPath;\n\n        await vscode.window.withProgress(\n            {\n                location: vscode.ProgressLocation.Notification,\n                title: `Executing ${agentName}...`,\n                cancellable: false\n            },\n            async () => {\n                const result = await auraApiService.executeAgent(agentId, prompt, workspacePath);\n\n                const doc = await vscode.workspace.openTextDocument({\n                    content: `# Agent: ${agentName}\\n\\n## Prompt\\n${prompt}\\n\\n## Response\\n${result}`,\n                    language: 'markdown'\n                });\n                await vscode.window.showTextDocument(doc);\n            }\n        );\n\n    } catch (error) {\n        const message = error instanceof Error ? error.message : 'Unknown error';\n        vscode.window.showErrorMessage(`Failed to execute agent: ${message}`);\n    }\n}\n\n// =====================\n// Workflow Functions\n// =====================\n\nasync function createWorkflow(): Promise<void> {\n    // Open the new workflow panel with a form\n    await workflowPanelProvider.openNewWorkflowPanel((workflowId: string) => {\n        // Refresh tree when workflow is created\n        workflowTreeProvider.refresh();\n    });\n}\n\nasync function executeStep(workflowId: string, stepId: string): Promise<void> {\n    try {\n        await vscode.window.withProgress(\n            {\n                location: vscode.ProgressLocation.Notification,\n                title: 'Executing step...',\n                cancellable: false\n            },\n            async () => {\n                const step = await auraApiService.executeWorkflowStep(workflowId, stepId);\n                workflowTreeProvider.refresh();\n\n                if (step.status === 'Completed') {\n                    vscode.window.showInformationMessage(`Step completed: ${step.name}`);\n                } else if (step.status === 'Failed') {\n                    vscode.window.showErrorMessage(`Step failed: ${step.error || 'Unknown error'}`);\n                }\n            }\n        );\n    } catch (error) {\n        const message = error instanceof Error ? error.message : 'Unknown error';\n        vscode.window.showErrorMessage(`Failed to execute step: ${message}`);\n        workflowTreeProvider.refresh();\n    }\n}\n\nasync function deleteWorkflow(item?: any): Promise<void> {\n    // Get workflow ID from tree item\n    let workflowId: string | undefined;\n    let workflowTitle: string = 'this workflow';\n\n    if (item?.workflow) {\n        workflowId = item.workflow.id;\n        workflowTitle = item.workflow.title;\n    } else if (item?.workflowId) {\n        workflowId = item.workflowId;\n        workflowTitle = item.label || 'this workflow';\n    }\n\n    if (!workflowId) {\n        vscode.window.showErrorMessage('No workflow selected');\n        return;\n    }\n\n    // Confirm deletion\n    const confirm = await vscode.window.showWarningMessage(\n        `Delete \"${workflowTitle}\"?`,\n        { modal: true },\n        'Delete'\n    );\n\n    if (confirm !== 'Delete') {\n        return;\n    }\n\n    try {\n        await auraApiService.deleteWorkflow(workflowId);\n        workflowTreeProvider.refresh();\n        vscode.window.showInformationMessage(`Deleted: ${workflowTitle}`);\n    } catch (error) {\n        const message = error instanceof Error ? error.message : 'Unknown error';\n        vscode.window.showErrorMessage(`Failed to delete workflow: ${message}`);\n    }\n}\n\n// =====================\n// Story/Issue Functions\n// =====================\n\nasync function createStoryFromIssue(): Promise<void> {\n    // Prompt for GitHub issue URL\n    const issueUrl = await vscode.window.showInputBox({\n        prompt: 'Enter GitHub issue URL',\n        placeHolder: 'https://github.com/owner/repo/issues/123',\n        validateInput: (value) => {\n            if (!value) {\n                return 'Issue URL is required';\n            }\n            if (!value.match(/github\\.com\\/[^/]+\\/[^/]+\\/issues\\/\\d+/i)) {\n                return 'Invalid GitHub issue URL format';\n            }\n            return null;\n        }\n    });\n\n    if (!issueUrl) {\n        return;\n    }\n\n    // Get current workspace path\n    const workspacePath = vscode.workspace.workspaceFolders?.[0]?.uri.fsPath;\n\n    try {\n        await vscode.window.withProgress(\n            {\n                location: vscode.ProgressLocation.Notification,\n                title: 'Creating story from issue...',\n                cancellable: false\n            },\n            async () => {\n                const workflow = await auraApiService.createStoryFromIssue(\n                    issueUrl,\n                    workspacePath\n                );\n\n                workflowTreeProvider.refresh();\n\n                // Auto-open worktree in new VS Code window\n                if (workflow.worktreePath) {\n                    const action = await vscode.window.showInformationMessage(\n                        `Created story: ${workflow.title}`,\n                        'Open in New Window',\n                        'Stay Here'\n                    );\n                    if (action === 'Open in New Window') {\n                        await vscode.commands.executeCommand(\n                            'vscode.openFolder',\n                            vscode.Uri.file(workflow.worktreePath),\n                            { forceNewWindow: true }\n                        );\n                    }\n                } else {\n                    vscode.window.showInformationMessage(`Created story: ${workflow.title}`);\n                }\n            }\n        );\n    } catch (error) {\n        const message = error instanceof Error ? error.message : 'Unknown error';\n        vscode.window.showErrorMessage(`Failed to create story: ${message}`);\n    }\n}\n\nasync function refreshFromIssue(workflowId?: string): Promise<void> {\n    if (!workflowId) {\n        vscode.window.showErrorMessage('No story selected');\n        return;\n    }\n\n    try {\n        const result = await auraApiService.refreshFromIssue(workflowId);\n        \n        if (result.updated) {\n            workflowTreeProvider.refresh();\n            vscode.window.showInformationMessage(`Story updated: ${result.changes.join(', ')}`);\n        } else {\n            vscode.window.showInformationMessage('Story is already up to date');\n        }\n    } catch (error) {\n        const message = error instanceof Error ? error.message : 'Unknown error';\n        vscode.window.showErrorMessage(`Failed to refresh from issue: ${message}`);\n    }\n}\n\nasync function postUpdateToIssue(workflowId?: string): Promise<void> {\n    if (!workflowId) {\n        vscode.window.showErrorMessage('No story selected');\n        return;\n    }\n\n    const message = await vscode.window.showInputBox({\n        prompt: 'Enter update message to post to the issue',\n        placeHolder: 'Progress update...'\n    });\n\n    if (!message) {\n        return;\n    }\n\n    try {\n        await auraApiService.postUpdateToIssue(workflowId, message);\n        vscode.window.showInformationMessage('Update posted to issue');\n    } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n        vscode.window.showErrorMessage(`Failed to post update: ${errorMessage}`);\n    }\n}\n\n// =====================\n// Help Functions\n// =====================\n\nfunction openDocFile(relativePath: string): void {\n    const workspaceFolders = vscode.workspace.workspaceFolders;\n    if (workspaceFolders && workspaceFolders.length > 0) {\n        // Try to find docs in the Aura project itself\n        const docsPath = vscode.Uri.joinPath(workspaceFolders[0].uri, 'docs', relativePath);\n        vscode.workspace.fs.stat(docsPath).then(\n            () => {\n                vscode.commands.executeCommand('markdown.showPreview', docsPath);\n            },\n            () => {\n                // File not found in workspace, open GitHub docs\n                vscode.env.openExternal(vscode.Uri.parse('https://github.com/johnazariah/aura/tree/main/docs/' + relativePath));\n            }\n        );\n    } else {\n        // No workspace, open GitHub docs\n        vscode.env.openExternal(vscode.Uri.parse('https://github.com/johnazariah/aura/tree/main/docs/' + relativePath));\n    }\n}\n\nfunction showCheatSheet(): void {\n    const panel = vscode.window.createWebviewPanel(\n        'auraCheatSheet',\n        'Aura Quick Reference',\n        vscode.ViewColumn.One,\n        {}\n    );\n\n    panel.webview.html = getCheatSheetHtml();\n}\n\nfunction getCheatSheetHtml(): string {\n    return `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Aura Quick Reference</title>\n    <style>\n        body {\n            font-family: var(--vscode-font-family);\n            padding: 20px;\n            color: var(--vscode-foreground);\n            background: var(--vscode-editor-background);\n        }\n        h1 { color: var(--vscode-textLink-foreground); }\n        h2 { \n            color: var(--vscode-textLink-activeForeground); \n            border-bottom: 1px solid var(--vscode-textSeparator-foreground);\n            padding-bottom: 5px;\n        }\n        table { \n            border-collapse: collapse; \n            width: 100%; \n            margin-bottom: 20px;\n        }\n        th, td { \n            border: 1px solid var(--vscode-textSeparator-foreground); \n            padding: 8px 12px; \n            text-align: left; \n        }\n        th { background: var(--vscode-editor-selectionBackground); }\n        code { \n            background: var(--vscode-textCodeBlock-background); \n            padding: 2px 6px; \n            border-radius: 3px;\n        }\n        .shortcut { font-family: monospace; font-weight: bold; }\n    </style>\n</head>\n<body>\n    <h1> Aura Quick Reference</h1>\n\n    <h2>Keyboard Shortcuts</h2>\n    <table>\n        <tr><th>Action</th><th>Windows/Linux</th><th>macOS</th></tr>\n        <tr><td>New Workflow</td><td class=\"shortcut\">Ctrl+Shift+W</td><td class=\"shortcut\">Cmd+Shift+W</td></tr>\n        <tr><td>Open Chat</td><td class=\"shortcut\">Ctrl+Shift+A</td><td class=\"shortcut\">Cmd+Shift+A</td></tr>\n        <tr><td>Execute Agent</td><td class=\"shortcut\">Ctrl+Shift+E</td><td class=\"shortcut\">Cmd+Shift+E</td></tr>\n        <tr><td>Index Workspace</td><td class=\"shortcut\">Ctrl+Alt+I</td><td class=\"shortcut\">Cmd+Alt+I</td></tr>\n        <tr><td>Show Help</td><td class=\"shortcut\">Ctrl+Shift+/</td><td class=\"shortcut\">Cmd+Shift+/</td></tr>\n    </table>\n\n    <h2>Workflow Tips</h2>\n    <table>\n        <tr><th>Task</th><th>Example Prompt</th></tr>\n        <tr><td>New endpoint</td><td><code>Create POST /api/products endpoint following OrderController patterns</code></td></tr>\n        <tr><td>Write tests</td><td><code>Add unit tests for OrderService using xUnit</code></td></tr>\n        <tr><td>Refactor</td><td><code>Extract email logic from UserService into EmailNotificationService</code></td></tr>\n        <tr><td>Documentation</td><td><code>Add XML docs to all public methods in PaymentController</code></td></tr>\n    </table>\n\n    <h2>Chat Examples</h2>\n    <table>\n        <tr><th>Goal</th><th>Question</th></tr>\n        <tr><td>Understand code</td><td><code>How does authentication work in this project?</code></td></tr>\n        <tr><td>Find code</td><td><code>Where is payment processing implemented?</code></td></tr>\n        <tr><td>Trace flow</td><td><code>What happens when a user places an order?</code></td></tr>\n        <tr><td>Review code</td><td><code>Are there SQL injection risks in UserRepository?</code></td></tr>\n    </table>\n\n    <h2>Step Actions</h2>\n    <table>\n        <tr><th>Action</th><th>When to Use</th></tr>\n        <tr><td> Approve</td><td>Output looks correct</td></tr>\n        <tr><td> Reject</td><td>Output is wrong, let agent retry</td></tr>\n        <tr><td> Skip</td><td>Step not needed</td></tr>\n        <tr><td> Chat</td><td>Ask agent to modify or explain</td></tr>\n        <tr><td> Reassign</td><td>Use a different agent</td></tr>\n    </table>\n\n    <p><em>Press <strong>Ctrl+Shift+P</strong> and type \"Aura\" to see all commands.</em></p>\n</body>\n</html>`;\n}\n\n// =====================\n// Code Graph Query Functions\n// =====================\n\nasync function findImplementations(): Promise<void> {\n    const typeName = await vscode.window.showInputBox({\n        prompt: 'Enter interface or abstract class name',\n        placeHolder: 'IWorkflowService'\n    });\n\n    if (!typeName) return;\n\n    try {\n        const workspacePath = vscode.workspace.workspaceFolders?.[0]?.uri.fsPath;\n        const implementations = await auraApiService.findImplementations(typeName, workspacePath);\n\n        if (implementations.length === 0) {\n            vscode.window.showInformationMessage(`No implementations found for ${typeName}`);\n            return;\n        }\n\n        const selected = await vscode.window.showQuickPick(\n            implementations.map(impl => ({\n                label: impl.name,\n                description: impl.filePath ? impl.filePath.replace(/.*[\\\\/]/, '') : '',\n                detail: impl.lineNumber ? `Line ${impl.lineNumber}` : impl.fullName,\n                impl\n            })),\n            { placeHolder: `Implementations of ${typeName} (${implementations.length} found)` }\n        );\n\n        if (selected && selected.impl.filePath) {\n            const doc = await vscode.workspace.openTextDocument(selected.impl.filePath);\n            const line = (selected.impl.lineNumber || 1) - 1;\n            await vscode.window.showTextDocument(doc, {\n                selection: new vscode.Range(line, 0, line, 0)\n            });\n        }\n    } catch (error) {\n        const message = error instanceof Error ? error.message : 'Failed to find implementations';\n        vscode.window.showErrorMessage(message);\n    }\n}\n\nasync function findCallers(): Promise<void> {\n    const methodName = await vscode.window.showInputBox({\n        prompt: 'Enter method name',\n        placeHolder: 'ExecuteAsync'\n    });\n\n    if (!methodName) return;\n\n    const containingType = await vscode.window.showInputBox({\n        prompt: 'Enter containing type (optional)',\n        placeHolder: 'WorkflowService'\n    });\n\n    try {\n        const workspacePath = vscode.workspace.workspaceFolders?.[0]?.uri.fsPath;\n        const callers = await auraApiService.findCallers(methodName, containingType || undefined, workspacePath);\n\n        if (callers.length === 0) {\n            vscode.window.showInformationMessage(`No callers found for ${methodName}`);\n            return;\n        }\n\n        const selected = await vscode.window.showQuickPick(\n            callers.map(caller => ({\n                label: caller.name,\n                description: caller.filePath ? caller.filePath.replace(/.*[\\\\/]/, '') : '',\n                detail: caller.signature || caller.fullName,\n                caller\n            })),\n            { placeHolder: `Callers of ${methodName} (${callers.length} found)` }\n        );\n\n        if (selected && selected.caller.filePath) {\n            const doc = await vscode.workspace.openTextDocument(selected.caller.filePath);\n            const line = (selected.caller.lineNumber || 1) - 1;\n            await vscode.window.showTextDocument(doc, {\n                selection: new vscode.Range(line, 0, line, 0)\n            });\n        }\n    } catch (error) {\n        const message = error instanceof Error ? error.message : 'Failed to find callers';\n        vscode.window.showErrorMessage(message);\n    }\n}\n\nasync function showTypeMembers(): Promise<void> {\n    const typeName = await vscode.window.showInputBox({\n        prompt: 'Enter type name',\n        placeHolder: 'WorkflowService'\n    });\n\n    if (!typeName) return;\n\n    try {\n        const workspacePath = vscode.workspace.workspaceFolders?.[0]?.uri.fsPath;\n        const members = await auraApiService.getTypeMembers(typeName, workspacePath);\n\n        if (members.length === 0) {\n            vscode.window.showInformationMessage(`No members found for ${typeName}`);\n            return;\n        }\n\n        const selected = await vscode.window.showQuickPick(\n            members.map(member => ({\n                label: `$(${getSymbolIcon(member.nodeType)}) ${member.name}`,\n                description: member.nodeType || '',\n                detail: member.signature || member.fullName,\n                member\n            })),\n            { placeHolder: `Members of ${typeName} (${members.length} found)` }\n        );\n\n        if (selected && selected.member.filePath) {\n            const doc = await vscode.workspace.openTextDocument(selected.member.filePath);\n            const line = (selected.member.lineNumber || 1) - 1;\n            await vscode.window.showTextDocument(doc, {\n                selection: new vscode.Range(line, 0, line, 0)\n            });\n        }\n    } catch (error) {\n        const message = error instanceof Error ? error.message : 'Failed to get type members';\n        vscode.window.showErrorMessage(message);\n    }\n}\n\nfunction getSymbolIcon(nodeType?: string): string {\n    switch (nodeType?.toLowerCase()) {\n        case 'method': return 'symbol-method';\n        case 'property': return 'symbol-property';\n        case 'field': return 'symbol-field';\n        case 'constructor': return 'symbol-constructor';\n        case 'event': return 'symbol-event';\n        default: return 'symbol-misc';\n    }\n}\n\nexport function deactivate() {\n    if (refreshInterval) {\n        clearInterval(refreshInterval);\n    }\n    if (indexingPollInterval) {\n        clearInterval(indexingPollInterval);\n    }\n    indexingStatusBarItem?.dispose();\n}\n","module.exports = require(\"events\");","'use strict';\n\n/** @type {import('./isNaN')} */\nmodule.exports = Number.isNaN || function isNaN(a) {\n\treturn a !== a;\n};\n","// API\nmodule.exports = abort;\n\n/**\n * Aborts leftover active jobs\n *\n * @param {object} state - current state object\n */\nfunction abort(state)\n{\n  Object.keys(state.jobs).forEach(clean.bind(state));\n\n  // reset leftover jobs\n  state.jobs = {};\n}\n\n/**\n * Cleans up leftover job by invoking abort function for the provided job id\n *\n * @this  state\n * @param {string|number} key - job id to abort\n */\nfunction clean(key)\n{\n  if (typeof this.jobs[key] == 'function')\n  {\n    this.jobs[key]();\n  }\n}\n","module.exports = require(\"child_process\");","'use strict';\n\n/** @type {import('./uri')} */\nmodule.exports = URIError;\n","import * as vscode from 'vscode';\nimport axios, { AxiosInstance } from 'axios';\n\n/**\n * Normalizes a file path for consistent API calls.\n * Matches the C# PathNormalizer: forward slashes, lowercase.\n */\nfunction normalizePath(path: string): string {\n    if (!path) return path;\n    return path\n        .replace(/\\\\\\\\/g, '/')  // Handle escaped backslashes\n        .replace(/\\\\/g, '/')     // Convert backslashes to forward slashes\n        .toLowerCase();\n}\n\nexport interface AgentInfo {\n    id: string;\n    name: string;\n    description: string;\n    capabilities: string[];\n    priority: number;\n    languages?: string[];\n    provider: string;\n    model: string;\n    tags: string[];\n}\n\nexport interface HealthResponse {\n    status: string;\n    healthy: boolean;\n    details?: string;\n    version?: string;\n}\n\nexport interface RagHealthResponse {\n    healthy: boolean;\n    details: string;\n    totalDocuments: number;\n    totalChunks: number;\n}\n\nexport interface IndexHealthInfo {\n    indexType: string;\n    status: 'fresh' | 'stale' | 'not-indexed';\n    indexedAt?: string;\n    indexedCommitSha?: string;\n    commitsBehind?: number;\n    isStale: boolean;\n    itemCount: number;\n}\n\nexport interface IndexHealthResponse {\n    workspacePath: string;\n    isGitRepository: boolean;\n    currentCommitSha?: string;\n    currentCommitAt?: string;\n    overallStatus: 'fresh' | 'stale' | 'not-indexed';\n    rag: IndexHealthInfo;\n    graph: IndexHealthInfo;\n}\n\nexport interface RagIndexResult {\n    success: boolean;\n    filesIndexed: number;\n    message: string;\n}\n\nexport interface BackgroundIndexJob {\n    jobId: string;\n    directory: string;\n    message: string;\n}\n\nexport interface BackgroundJobStatus {\n    jobId: string;\n    source: string;\n    state: 'Queued' | 'Processing' | 'Completed' | 'Failed';\n    totalItems: number;\n    processedItems: number;\n    failedItems: number;\n    progressPercent: number;\n    startedAt?: string;\n    completedAt?: string;\n    error?: string;\n}\n\nexport interface CodeGraphIndexResult {\n    success: boolean;\n    nodesCreated: number;\n    edgesCreated: number;\n    projectsIndexed: number;\n    filesIndexed: number;\n    typesIndexed: number;\n    durationMs: number;\n    warnings: string[];\n    error?: string;\n}\n\nexport interface RagQueryResult {\n    contentId: string;\n    chunkIndex: number;\n    text: string;\n    score: number;\n    sourcePath?: string;\n    contentType: string;\n}\n\nexport interface RagExecuteResult {\n    content: string;\n    tokensUsed: number;\n    ragEnriched: boolean;\n    durationMs: number;\n}\n\nexport interface AgenticResult {\n    content: string;\n    tokensUsed: number;\n    stepCount: number;\n    durationMs: number;\n    toolSteps: Array<{\n        toolId: string;\n        input: string;\n        output: string;\n        success: boolean;\n    }>;\n}\n\nexport interface StreamChatMessage {\n    role: 'user' | 'assistant' | 'system';\n    content: string;\n}\n\nexport interface StreamChatCallbacks {\n    onToken: (content: string) => void;\n    onDone: (totalTokens: number, finishReason: string) => void;\n    onError: (message: string, code?: string) => void;\n}\n\n// =====================\n// Developer Module Types\n// =====================\n\nexport interface WorkflowStep {\n    id: string;\n    order: number;\n    name: string;\n    capability: string;\n    description?: string;\n    status: string;\n    assignedAgentId?: string;\n    attempts: number;\n    output?: string;\n    error?: string;\n    startedAt?: string;\n    completedAt?: string;\n    needsRework?: boolean;\n    previousOutput?: string;\n    approval?: string;\n    chatHistory?: string;\n}\n\nexport interface Workflow {\n    id: string;\n    title: string;\n    description?: string;\n    status: string;\n    gitBranch?: string;\n    worktreePath?: string;\n    repositoryPath?: string;\n    patternName?: string;\n    issueUrl?: string;\n    issueProvider?: string;\n    issueNumber?: number;\n    issueOwner?: string;\n    issueRepo?: string;\n    analyzedContext?: string;\n    executionPlan?: string;\n    pullRequestUrl?: string;\n    chatHistory?: string;\n    steps: WorkflowStep[];\n    createdAt: string;\n    updatedAt: string;\n    completedAt?: string;\n}\n\nexport interface WorkflowChatResponse {\n    response: string;\n    planModified: boolean;\n    analysisUpdated: boolean;\n    stepsAdded: { id: string; order: number; name: string; capability: string }[];\n    stepsRemoved: string[];\n}\n\nexport interface StepChatResponse {\n    stepId: string;\n    response: string;\n    updatedDescription?: string;\n}\n\nexport class AuraApiService {\n    private httpClient: AxiosInstance;\n\n    constructor() {\n        this.httpClient = axios.create({\n            timeout: 30000  // 30s default for general API calls\n        });\n    }\n\n    getBaseUrl(): string {\n        const config = vscode.workspace.getConfiguration('aura');\n        return config.get<string>('apiUrl', 'http://localhost:5300');\n    }\n\n    getExecutionTimeout(): number {\n        const config = vscode.workspace.getConfiguration('aura');\n        return config.get<number>('executionTimeout', 120000);  // 2 minutes default\n    }\n\n    getWorkflowTimeout(): number {\n        const config = vscode.workspace.getConfiguration('aura');\n        return config.get<number>('workflowTimeout', 60000);  // 1 minute for workflow operations (worktree creation, etc.)\n    }\n\n    getIndexingTimeout(): number {\n        const config = vscode.workspace.getConfiguration('aura');\n        return config.get<number>('indexingTimeout', 300000);  // 5 minutes for indexing\n    }\n\n    async getHealth(): Promise<HealthResponse> {\n        const response = await this.httpClient.get(`${this.getBaseUrl()}/health`);\n        return response.data;\n    }\n\n    async getRagHealth(): Promise<RagHealthResponse> {\n        const response = await this.httpClient.get(`${this.getBaseUrl()}/health/rag`);\n        return response.data;\n    }\n\n    async getIndexHealth(workspacePath: string): Promise<IndexHealthResponse> {\n        const response = await this.httpClient.get(`${this.getBaseUrl()}/api/index/health`, {\n            params: { workspacePath }\n        });\n        return response.data;\n    }\n\n    async getAgents(): Promise<AgentInfo[]> {\n        const response = await this.httpClient.get(`${this.getBaseUrl()}/api/agents`);\n        return response.data;\n    }\n\n    async getAgentsByCapability(capability: string, language?: string): Promise<AgentInfo[]> {\n        let url = `${this.getBaseUrl()}/api/agents?capability=${encodeURIComponent(capability)}`;\n        if (language) {\n            url += `&language=${encodeURIComponent(language)}`;\n        }\n        const response = await this.httpClient.get(url);\n        return response.data;\n    }\n\n    async getBestAgent(capability: string, language?: string): Promise<AgentInfo | null> {\n        try {\n            let url = `${this.getBaseUrl()}/api/agents/best?capability=${encodeURIComponent(capability)}`;\n            if (language) {\n                url += `&language=${encodeURIComponent(language)}`;\n            }\n            const response = await this.httpClient.get(url);\n            return response.data;\n        } catch {\n            return null;\n        }\n    }\n\n    async getAgentById(agentId: string): Promise<AgentInfo | null> {\n        try {\n            const response = await this.httpClient.get(`${this.getBaseUrl()}/api/agents/${agentId}`);\n            return response.data;\n        } catch {\n            return null;\n        }\n    }\n\n    async executeAgent(agentId: string, prompt: string, workspacePath?: string): Promise<string> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/agents/${agentId}/execute`,\n            { prompt, workspacePath },\n            { timeout: this.getExecutionTimeout() }\n        );\n        return response.data.content;\n    }\n\n    // =====================\n    // RAG Methods\n    // =====================\n\n    async queryRag(query: string, topK: number = 5): Promise<RagQueryResult[]> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/rag/query`,\n            { query, topK },\n            { timeout: 30000 }\n        );\n        return response.data.results;\n    }\n\n    async executeAgentWithRag(\n        agentId: string,\n        prompt: string,\n        workspacePath?: string,\n        topK: number = 5,\n        useRag: boolean = true,\n        useCodeGraph: boolean = true\n    ): Promise<RagExecuteResult> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/agents/${agentId}/execute/rag`,\n            { prompt, workspacePath, useRag, useCodeGraph, topK },\n            { timeout: this.getExecutionTimeout() }\n        );\n        return response.data;\n    }\n\n    /**\n     * Execute an agent with agentic chat (multi-step tool use).\n     * The agent can explore the codebase using tools before answering.\n     */\n    async executeAgentAgentic(\n        agentId: string,\n        prompt: string,\n        workspacePath?: string,\n        maxSteps: number = 10,\n        useRag: boolean = true,\n        useCodeGraph: boolean = true\n    ): Promise<AgenticResult> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/agents/${agentId}/execute/agentic`,\n            { prompt, workspacePath, useRag, useCodeGraph, maxSteps },\n            { timeout: this.getExecutionTimeout() * 2 } // Allow more time for multi-step\n        );\n        return response.data;\n    }\n\n    /**\n     * Execute an agent with streaming responses using Server-Sent Events.\n     * Tokens are delivered incrementally via callbacks.\n     * @param agentId The agent to execute\n     * @param message The user's message\n     * @param history Optional conversation history\n     * @param callbacks Callbacks for token, done, and error events\n     * @param abortController Optional AbortController to cancel the stream\n     */\n    async executeAgentStreaming(\n        agentId: string,\n        message: string,\n        history: StreamChatMessage[] = [],\n        callbacks: StreamChatCallbacks,\n        abortController?: AbortController\n    ): Promise<void> {\n        const url = `${this.getBaseUrl()}/api/agents/${agentId}/chat/stream`;\n        \n        try {\n            const response = await fetch(url, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Accept': 'text/event-stream'\n                },\n                body: JSON.stringify({ message, history }),\n                signal: abortController?.signal\n            });\n\n            if (!response.ok) {\n                const errorText = await response.text();\n                try {\n                    const errorJson = JSON.parse(errorText);\n                    callbacks.onError(errorJson.error || 'Request failed', response.status.toString());\n                } catch {\n                    callbacks.onError(`Request failed: ${response.statusText}`, response.status.toString());\n                }\n                return;\n            }\n\n            const reader = response.body?.getReader();\n            if (!reader) {\n                callbacks.onError('No response body');\n                return;\n            }\n\n            const decoder = new TextDecoder();\n            let buffer = '';\n\n            while (true) {\n                const { done, value } = await reader.read();\n                if (done) break;\n\n                buffer += decoder.decode(value, { stream: true });\n                \n                // Process complete SSE events (lines ending with \\n\\n)\n                const events = buffer.split('\\n\\n');\n                buffer = events.pop() || ''; // Keep incomplete event in buffer\n\n                for (const event of events) {\n                    if (!event.trim()) continue;\n                    \n                    const lines = event.split('\\n');\n                    let eventType = '';\n                    let eventData = '';\n\n                    for (const line of lines) {\n                        if (line.startsWith('event: ')) {\n                            eventType = line.slice(7);\n                        } else if (line.startsWith('data: ')) {\n                            eventData = line.slice(6);\n                        }\n                    }\n\n                    if (!eventType || !eventData) continue;\n\n                    try {\n                        const data = JSON.parse(eventData);\n                        \n                        switch (eventType) {\n                            case 'token':\n                                if (data.content) {\n                                    callbacks.onToken(data.content);\n                                }\n                                break;\n                            case 'done':\n                                callbacks.onDone(data.totalTokens || 0, data.finishReason || 'stop');\n                                break;\n                            case 'error':\n                                callbacks.onError(data.message || 'Unknown error', data.code);\n                                break;\n                        }\n                    } catch (parseError) {\n                        console.error('Failed to parse SSE event:', eventData, parseError);\n                    }\n                }\n            }\n        } catch (error) {\n            if (error instanceof Error) {\n                if (error.name === 'AbortError') {\n                    // Request was cancelled - this is normal\n                    return;\n                }\n                callbacks.onError(error.message);\n            } else {\n                callbacks.onError('Unknown error during streaming');\n            }\n        }\n    }\n\n    async getRagStats(): Promise<{ totalDocuments: number; totalChunks: number }> {\n        const response = await this.httpClient.get(`${this.getBaseUrl()}/api/rag/stats`);\n        return response.data;\n    }\n\n    async getBackgroundJobStatus(jobId: string): Promise<BackgroundJobStatus> {\n        const response = await this.httpClient.get(\n            `${this.getBaseUrl()}/api/index/jobs/${jobId}`,\n            { timeout: 5000 }\n        );\n        return response.data;\n    }\n\n    // =====================\n    // Code Graph Methods\n    // =====================\n\n    /**\n     * Get code graph statistics, optionally filtered by repository.\n     */\n    async getCodeGraphStats(repositoryPath?: string): Promise<{\n        totalNodes: number;\n        totalEdges: number;\n        nodesByType: Record<string, number>;\n        edgesByType: Record<string, number>;\n        repositoryPath?: string;\n    }> {\n        const params = repositoryPath ? { repositoryPath } : {};\n        const response = await this.httpClient.get(\n            `${this.getBaseUrl()}/api/graph/stats`,\n            { params, timeout: 5000 }\n        );\n        return response.data;\n    }\n\n    /**\n     * Find implementations of an interface or abstract class.\n     */\n    async findImplementations(interfaceName: string, repositoryPath?: string): Promise<CodeGraphNode[]> {\n        const params = repositoryPath ? { repositoryPath } : {};\n        const response = await this.httpClient.get(\n            `${this.getBaseUrl()}/api/graph/implementations/${encodeURIComponent(interfaceName)}`,\n            { params, timeout: 10000 }\n        );\n        return response.data.implementations || [];\n    }\n\n    /**\n     * Find callers of a method.\n     */\n    async findCallers(methodName: string, containingType?: string, repositoryPath?: string): Promise<CodeGraphNode[]> {\n        const params: Record<string, string> = {};\n        if (containingType) params.containingType = containingType;\n        if (repositoryPath) params.repositoryPath = repositoryPath;\n        const response = await this.httpClient.get(\n            `${this.getBaseUrl()}/api/graph/callers/${encodeURIComponent(methodName)}`,\n            { params, timeout: 10000 }\n        );\n        return response.data.callers || [];\n    }\n\n    /**\n     * Get members of a type (methods, properties, fields).\n     */\n    async getTypeMembers(typeName: string, repositoryPath?: string): Promise<CodeGraphNode[]> {\n        const params = repositoryPath ? { repositoryPath } : {};\n        const response = await this.httpClient.get(\n            `${this.getBaseUrl()}/api/graph/members/${encodeURIComponent(typeName)}`,\n            { params, timeout: 10000 }\n        );\n        return response.data.members || [];\n    }\n\n    /**\n     * Find nodes by name (fuzzy search).\n     */\n    async findNodes(name: string, nodeType?: string, repositoryPath?: string): Promise<CodeGraphNode[]> {\n        const params: Record<string, string> = {};\n        if (nodeType) params.nodeType = nodeType;\n        if (repositoryPath) params.repositoryPath = repositoryPath;\n        const response = await this.httpClient.get(\n            `${this.getBaseUrl()}/api/graph/find/${encodeURIComponent(name)}`,\n            { params, timeout: 10000 }\n        );\n        return response.data.nodes || [];\n    }\n\n    // =====================\n    // Developer Module Methods\n    // =====================\n\n    async createWorkflow(title: string, description?: string, repositoryPath?: string): Promise<Workflow> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/developer/workflows`,\n            { title, description, repositoryPath },\n            { timeout: this.getWorkflowTimeout() }\n        );\n        return response.data;\n    }\n\n    async getWorkflows(status?: string, repositoryPath?: string): Promise<Workflow[]> {\n        const params = new URLSearchParams();\n        if (status) {\n            params.append('status', status);\n        }\n        if (repositoryPath) {\n            params.append('repositoryPath', repositoryPath);\n        }\n        const queryString = params.toString();\n        const url = `${this.getBaseUrl()}/api/developer/workflows${queryString ? '?' + queryString : ''}`;\n        const response = await this.httpClient.get(url);\n        return response.data.workflows;\n    }\n\n    async getWorkflow(id: string): Promise<Workflow> {\n        const response = await this.httpClient.get(`${this.getBaseUrl()}/api/developer/workflows/${id}`);\n        return response.data;\n    }\n\n    async getWorkflowByPath(worktreePath: string): Promise<Workflow | null> {\n        try {\n            const params = new URLSearchParams();\n            params.append('path', worktreePath);\n            const response = await this.httpClient.get(\n                `${this.getBaseUrl()}/api/developer/workflows/by-path?${params.toString()}`\n            );\n            return response.data;\n        } catch (error: unknown) {\n            if (axios.isAxiosError(error) && error.response?.status === 404) {\n                return null;\n            }\n            throw error;\n        }\n    }\n\n    async deleteWorkflow(id: string): Promise<void> {\n        await this.httpClient.delete(`${this.getBaseUrl()}/api/developer/workflows/${id}`);\n    }\n\n    async analyzeWorkflow(workflowId: string): Promise<Workflow> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/developer/workflows/${workflowId}/analyze`,\n            {},\n            { timeout: this.getExecutionTimeout() }\n        );\n        return response.data;\n    }\n\n    async planWorkflow(workflowId: string): Promise<Workflow> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/developer/workflows/${workflowId}/plan`,\n            {},\n            { timeout: this.getExecutionTimeout() }\n        );\n        return response.data;\n    }\n\n    async executeWorkflowStep(workflowId: string, stepId: string, agentId?: string): Promise<WorkflowStep> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/developer/workflows/${workflowId}/steps/${stepId}/execute`,\n            agentId ? { agentId } : {},\n            { timeout: this.getExecutionTimeout() }\n        );\n        return response.data;\n    }\n\n    async addWorkflowStep(workflowId: string, name: string, capability: string, description?: string): Promise<WorkflowStep> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/developer/workflows/${workflowId}/steps`,\n            { name, capability, description }\n        );\n        return response.data;\n    }\n\n    async removeWorkflowStep(workflowId: string, stepId: string): Promise<void> {\n        await this.httpClient.delete(\n            `${this.getBaseUrl()}/api/developer/workflows/${workflowId}/steps/${stepId}`\n        );\n    }\n\n    async completeWorkflow(workflowId: string): Promise<Workflow> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/developer/workflows/${workflowId}/complete`\n        );\n        return response.data;\n    }\n\n    async cancelWorkflow(workflowId: string): Promise<Workflow> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/developer/workflows/${workflowId}/cancel`\n        );\n        return response.data;\n    }\n\n    async sendWorkflowChat(workflowId: string, message: string): Promise<WorkflowChatResponse> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/developer/workflows/${workflowId}/chat`,\n            { message },\n            { timeout: this.getExecutionTimeout() }\n        );\n        return response.data;\n    }\n\n    // Step management methods\n\n    async approveStepOutput(workflowId: string, stepId: string): Promise<WorkflowStep> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/developer/workflows/${workflowId}/steps/${stepId}/approve`\n        );\n        return response.data;\n    }\n\n    async rejectStepOutput(workflowId: string, stepId: string, feedback?: string): Promise<WorkflowStep> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/developer/workflows/${workflowId}/steps/${stepId}/reject`,\n            feedback ? { feedback } : {}\n        );\n        return response.data;\n    }\n\n    async skipStep(workflowId: string, stepId: string, reason?: string): Promise<WorkflowStep> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/developer/workflows/${workflowId}/steps/${stepId}/skip`,\n            reason ? { reason } : {}\n        );\n        return response.data;\n    }\n\n    async resetStep(workflowId: string, stepId: string): Promise<WorkflowStep> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/developer/workflows/${workflowId}/steps/${stepId}/reset`,\n            {}\n        );\n        return response.data;\n    }\n\n    async chatWithStep(workflowId: string, stepId: string, message: string): Promise<StepChatResponse> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/developer/workflows/${workflowId}/steps/${stepId}/chat`,\n            { message },\n            { timeout: this.getExecutionTimeout() }\n        );\n        return response.data;\n    }\n\n    async reassignStep(workflowId: string, stepId: string, agentId: string): Promise<WorkflowStep> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/developer/workflows/${workflowId}/steps/${stepId}/reassign`,\n            { agentId }\n        );\n        return response.data;\n    }\n\n    async updateStepDescription(workflowId: string, stepId: string, description: string): Promise<WorkflowStep> {\n        const response = await this.httpClient.put(\n            `${this.getBaseUrl()}/api/developer/workflows/${workflowId}/steps/${stepId}/description`,\n            { description }\n        );\n        return response.data;\n    }\n\n    async finalizeWorkflow(workflowId: string, options: {\n        commitMessage?: string;\n        createPullRequest?: boolean;\n        prTitle?: string;\n        prBody?: string;\n        baseBranch?: string;\n        draft?: boolean;\n    } = {}): Promise<FinalizeResult> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/developer/workflows/${workflowId}/finalize`,\n            {\n                commitMessage: options.commitMessage,\n                createPullRequest: options.createPullRequest ?? true,\n                prTitle: options.prTitle,\n                prBody: options.prBody,\n                baseBranch: options.baseBranch,\n                draft: options.draft ?? true\n            },\n            { timeout: 120000 } // 2 minute timeout for git operations\n        );\n        return response.data;\n    }\n\n    async getGitStatus(path: string): Promise<GitStatusResponse> {\n        try {\n            const response = await this.httpClient.get(\n                `${this.getBaseUrl()}/api/git/status`,\n                { params: { path }, timeout: 10000 }\n            );\n            return response.data;\n        } catch (error) {\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : 'Failed to get git status'\n            };\n        }\n    }\n\n    // =====================\n    // Workspace Methods\n    // =====================\n\n    /**\n     * List all workspaces.\n     */\n    async listWorkspaces(limit?: number): Promise<{ count: number; workspaces: WorkspaceInfo[] }> {\n        const response = await this.httpClient.get(\n            `${this.getBaseUrl()}/api/workspaces`,\n            { params: limit ? { limit } : undefined, timeout: 5000 }\n        );\n        return response.data;\n    }\n\n    /**\n     * Get workspace by ID or path.\n     * The API accepts either a 16-char hex ID or a URL-encoded filesystem path.\n     */\n    async getWorkspace(idOrPath: string): Promise<WorkspaceInfo> {\n        // URL-encode the path if it's not already an ID (16 hex chars)\n        const isId = /^[0-9a-f]{16}$/i.test(idOrPath);\n        // Normalize paths to match API expectations (forward slashes, lowercase)\n        const normalizedValue = isId ? idOrPath : normalizePath(idOrPath);\n        const param = isId ? idOrPath : encodeURIComponent(normalizedValue);\n        \n        const response = await this.httpClient.get(\n            `${this.getBaseUrl()}/api/workspaces/${param}`,\n            { timeout: 5000 }\n        );\n        return response.data;\n    }\n\n    /**\n     * Get the onboarding status of a workspace by path.\n     * Returns a status object (with isOnboarded=false if not found).\n     */\n    async getWorkspaceStatus(path: string): Promise<WorkspaceStatus> {\n        try {\n            const workspace = await this.getWorkspace(path);\n            return {\n                path: workspace.path,\n                isOnboarded: workspace.status === 'ready' || workspace.status === 'indexing',\n                onboardedAt: workspace.createdAt,\n                lastIndexedAt: workspace.lastAccessedAt,\n                indexHealth: workspace.status === 'ready' ? 'fresh' : workspace.status,\n                stats: workspace.stats ?? { files: 0, chunks: 0, graphNodes: 0, graphEdges: 0 }\n            };\n        } catch (error: unknown) {\n            if (error && typeof error === 'object' && 'response' in error) {\n                const axiosError = error as { response?: { status?: number } };\n                if (axiosError.response?.status === 404) {\n                    return {\n                        path,\n                        isOnboarded: false,\n                        indexHealth: 'not-indexed',\n                        stats: { files: 0, chunks: 0, graphNodes: 0, graphEdges: 0 }\n                    };\n                }\n            }\n            throw error;\n        }\n    }\n\n    /**\n     * Onboard a workspace (create and start indexing).\n     */\n    async onboardWorkspace(path: string, options?: {\n        name?: string;\n        includePatterns?: string[];\n        excludePatterns?: string[];\n    }): Promise<OnboardResult> {\n        // Normalize path for consistent storage\n        const normalizedPath = normalizePath(path);\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/workspaces`,\n            {\n                path: normalizedPath,\n                name: options?.name,\n                startIndexing: true,\n                options: options?.includePatterns || options?.excludePatterns ? {\n                    includePatterns: options?.includePatterns,\n                    excludePatterns: options?.excludePatterns\n                } : undefined\n            },\n            { timeout: 30000 }\n        );\n        return {\n            success: true,\n            jobId: response.data.jobId,\n            message: response.data.message,\n            workspaceId: response.data.id\n        };\n    }\n\n    /**\n     * Remove a workspace from Aura (delete all indexed data).\n     */\n    async removeWorkspace(path: string): Promise<{ success: boolean; message: string }> {\n        const workspace = await this.getWorkspace(path);\n        if (!workspace) {\n            return { success: true, message: 'Workspace not found (already removed)' };\n        }\n        const response = await this.httpClient.delete(\n            `${this.getBaseUrl()}/api/workspaces/${workspace.id}`,\n            { timeout: 30000 }\n        );\n        return response.data;\n    }\n\n    /**\n     * Re-index an existing workspace.\n     */\n    async reindexWorkspace(path: string): Promise<{ jobId: string; message: string }> {\n        const workspace = await this.getWorkspace(path);\n        if (!workspace) {\n            throw new Error('Workspace not found. Please onboard the workspace first.');\n        }\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/workspaces/${workspace.id}/reindex`,\n            {},\n            { timeout: 30000 }\n        );\n        return {\n            jobId: response.data.jobId,\n            message: response.data.message\n        };\n    }\n\n    // =====================\n    // Story/Issue Integration Methods\n    // =====================\n\n    /**\n     * Create a story from a GitHub issue URL.\n     */\n    async createStoryFromIssue(\n        issueUrl: string,\n        repositoryPath?: string\n    ): Promise<Workflow> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/developer/stories/from-issue`,\n            { issueUrl, repositoryPath, createWorktree: true },\n            { timeout: this.getWorkflowTimeout() }\n        );\n        return response.data;\n    }\n\n    /**\n     * Refresh a workflow/story from its linked GitHub issue.\n     */\n    async refreshFromIssue(workflowId: string): Promise<{ updated: boolean; changes: string[] }> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/developer/workflows/${workflowId}/refresh-from-issue`,\n            {},\n            { timeout: 10000 }\n        );\n        return response.data;\n    }\n\n    /**\n     * Post an update comment to the linked GitHub issue.\n     */\n    async postUpdateToIssue(workflowId: string, message: string): Promise<{ posted: boolean }> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/developer/workflows/${workflowId}/post-update`,\n            { message },\n            { timeout: 10000 }\n        );\n        return response.data;\n    }\n\n    /**\n     * Close the linked GitHub issue.\n     */\n    async closeLinkedIssue(workflowId: string, comment?: string): Promise<{ closed: boolean }> {\n        const response = await this.httpClient.post(\n            `${this.getBaseUrl()}/api/developer/workflows/${workflowId}/close-issue`,\n            { comment },\n            { timeout: 10000 }\n        );\n        return response.data;\n    }\n}\n\nexport interface WorkspaceInfo {\n    id: string;\n    name: string;\n    path: string;\n    status: string;\n    errorMessage?: string;\n    createdAt?: string;\n    lastAccessedAt?: string;\n    gitRemoteUrl?: string;\n    defaultBranch?: string;\n    stats?: {\n        files: number;\n        chunks: number;\n        graphNodes: number;\n        graphEdges: number;\n    };\n}\n\nexport interface WorkspaceStatus {\n    path: string;\n    isOnboarded: boolean;\n    onboardedAt?: string;\n    lastIndexedAt?: string;\n    indexHealth: string;\n    stats: {\n        files: number;\n        chunks: number;\n        graphNodes: number;\n        graphEdges: number;\n    };\n}\n\nexport interface OnboardResult {\n    success: boolean;\n    jobId?: string;\n    message: string;\n    workspaceId?: string;\n    setupActions?: string[];\n}\n\nexport interface FinalizeResult {\n    workflowId: string;\n    commitSha?: string;\n    pushed: boolean;\n    prNumber?: number;\n    prUrl?: string;\n    message: string;\n}\n\nexport interface GitStatusResponse {\n    success: boolean;\n    branch?: string;\n    isDirty?: boolean;\n    modifiedFiles?: string[];\n    untrackedFiles?: string[];\n    stagedFiles?: string[];\n    error?: string;\n}\n\nexport interface CodeGraphNode {\n    name: string;\n    fullName: string;\n    nodeType?: string;\n    signature?: string;\n    modifiers?: string[];\n    filePath?: string;\n    lineNumber?: number;\n}\n","module.exports = require(\"http2\");","module.exports = require(\"https\");","/**\n * Detect Electron renderer / nwjs process, which is node, but we should\n * treat as a browser.\n */\n\nif (typeof process === 'undefined' || process.type === 'renderer' || process.browser === true || process.__nwjs) {\n\tmodule.exports = require('./browser.js');\n} else {\n\tmodule.exports = require('./node.js');\n}\n","'use strict';\n\n/** @type {import('.')} */\nvar $gOPD = require('./gOPD');\n\nif ($gOPD) {\n\ttry {\n\t\t$gOPD([], 'length');\n\t} catch (e) {\n\t\t// IE 8 has a broken gOPD\n\t\t$gOPD = null;\n\t}\n}\n\nmodule.exports = $gOPD;\n","'use strict';\n\n/** @type {import('./pow')} */\nmodule.exports = Math.pow;\n","'use strict';\n\nmodule.exports = (flag, argv = process.argv) => {\n\tconst prefix = flag.startsWith('-') ? '' : (flag.length === 1 ? '-' : '--');\n\tconst position = argv.indexOf(prefix + flag);\n\tconst terminatorPosition = argv.indexOf('--');\n\treturn position !== -1 && (terminatorPosition === -1 || position < terminatorPosition);\n};\n","/**\n * Module dependencies.\n */\n\nconst tty = require('tty');\nconst util = require('util');\n\n/**\n * This is the Node.js implementation of `debug()`.\n */\n\nexports.init = init;\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.destroy = util.deprecate(\n\t() => {},\n\t'Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.'\n);\n\n/**\n * Colors.\n */\n\nexports.colors = [6, 2, 3, 4, 5, 1];\n\ntry {\n\t// Optional dependency (as in, doesn't need to be installed, NOT like optionalDependencies in package.json)\n\t// eslint-disable-next-line import/no-extraneous-dependencies\n\tconst supportsColor = require('supports-color');\n\n\tif (supportsColor && (supportsColor.stderr || supportsColor).level >= 2) {\n\t\texports.colors = [\n\t\t\t20,\n\t\t\t21,\n\t\t\t26,\n\t\t\t27,\n\t\t\t32,\n\t\t\t33,\n\t\t\t38,\n\t\t\t39,\n\t\t\t40,\n\t\t\t41,\n\t\t\t42,\n\t\t\t43,\n\t\t\t44,\n\t\t\t45,\n\t\t\t56,\n\t\t\t57,\n\t\t\t62,\n\t\t\t63,\n\t\t\t68,\n\t\t\t69,\n\t\t\t74,\n\t\t\t75,\n\t\t\t76,\n\t\t\t77,\n\t\t\t78,\n\t\t\t79,\n\t\t\t80,\n\t\t\t81,\n\t\t\t92,\n\t\t\t93,\n\t\t\t98,\n\t\t\t99,\n\t\t\t112,\n\t\t\t113,\n\t\t\t128,\n\t\t\t129,\n\t\t\t134,\n\t\t\t135,\n\t\t\t148,\n\t\t\t149,\n\t\t\t160,\n\t\t\t161,\n\t\t\t162,\n\t\t\t163,\n\t\t\t164,\n\t\t\t165,\n\t\t\t166,\n\t\t\t167,\n\t\t\t168,\n\t\t\t169,\n\t\t\t170,\n\t\t\t171,\n\t\t\t172,\n\t\t\t173,\n\t\t\t178,\n\t\t\t179,\n\t\t\t184,\n\t\t\t185,\n\t\t\t196,\n\t\t\t197,\n\t\t\t198,\n\t\t\t199,\n\t\t\t200,\n\t\t\t201,\n\t\t\t202,\n\t\t\t203,\n\t\t\t204,\n\t\t\t205,\n\t\t\t206,\n\t\t\t207,\n\t\t\t208,\n\t\t\t209,\n\t\t\t214,\n\t\t\t215,\n\t\t\t220,\n\t\t\t221\n\t\t];\n\t}\n} catch (error) {\n\t// Swallow - we only care if `supports-color` is available; it doesn't have to be.\n}\n\n/**\n * Build up the default `inspectOpts` object from the environment variables.\n *\n *   $ DEBUG_COLORS=no DEBUG_DEPTH=10 DEBUG_SHOW_HIDDEN=enabled node script.js\n */\n\nexports.inspectOpts = Object.keys(process.env).filter(key => {\n\treturn /^debug_/i.test(key);\n}).reduce((obj, key) => {\n\t// Camel-case\n\tconst prop = key\n\t\t.substring(6)\n\t\t.toLowerCase()\n\t\t.replace(/_([a-z])/g, (_, k) => {\n\t\t\treturn k.toUpperCase();\n\t\t});\n\n\t// Coerce string value into JS value\n\tlet val = process.env[key];\n\tif (/^(yes|on|true|enabled)$/i.test(val)) {\n\t\tval = true;\n\t} else if (/^(no|off|false|disabled)$/i.test(val)) {\n\t\tval = false;\n\t} else if (val === 'null') {\n\t\tval = null;\n\t} else {\n\t\tval = Number(val);\n\t}\n\n\tobj[prop] = val;\n\treturn obj;\n}, {});\n\n/**\n * Is stdout a TTY? Colored output is enabled when `true`.\n */\n\nfunction useColors() {\n\treturn 'colors' in exports.inspectOpts ?\n\t\tBoolean(exports.inspectOpts.colors) :\n\t\ttty.isatty(process.stderr.fd);\n}\n\n/**\n * Adds ANSI color escape codes if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\tconst {namespace: name, useColors} = this;\n\n\tif (useColors) {\n\t\tconst c = this.color;\n\t\tconst colorCode = '\\u001B[3' + (c < 8 ? c : '8;5;' + c);\n\t\tconst prefix = `  ${colorCode};1m${name} \\u001B[0m`;\n\n\t\targs[0] = prefix + args[0].split('\\n').join('\\n' + prefix);\n\t\targs.push(colorCode + 'm+' + module.exports.humanize(this.diff) + '\\u001B[0m');\n\t} else {\n\t\targs[0] = getDate() + name + ' ' + args[0];\n\t}\n}\n\nfunction getDate() {\n\tif (exports.inspectOpts.hideDate) {\n\t\treturn '';\n\t}\n\treturn new Date().toISOString() + ' ';\n}\n\n/**\n * Invokes `util.formatWithOptions()` with the specified arguments and writes to stderr.\n */\n\nfunction log(...args) {\n\treturn process.stderr.write(util.formatWithOptions(exports.inspectOpts, ...args) + '\\n');\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\tif (namespaces) {\n\t\tprocess.env.DEBUG = namespaces;\n\t} else {\n\t\t// If you set a process.env field to null or undefined, it gets cast to the\n\t\t// string 'null' or 'undefined'. Just delete instead.\n\t\tdelete process.env.DEBUG;\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n\treturn process.env.DEBUG;\n}\n\n/**\n * Init logic for `debug` instances.\n *\n * Create a new `inspectOpts` object in case `useColors` is set\n * differently for a particular `debug` instance.\n */\n\nfunction init(debug) {\n\tdebug.inspectOpts = {};\n\n\tconst keys = Object.keys(exports.inspectOpts);\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tdebug.inspectOpts[keys[i]] = exports.inspectOpts[keys[i]];\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %o to `util.inspect()`, all on a single line.\n */\n\nformatters.o = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts)\n\t\t.split('\\n')\n\t\t.map(str => str.trim())\n\t\t.join(' ');\n};\n\n/**\n * Map %O to `util.inspect()`, allowing multiple lines if needed.\n */\n\nformatters.O = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts);\n};\n","/*!\n * mime-types\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar db = require('mime-db')\nvar extname = require('path').extname\n\n/**\n * Module variables.\n * @private\n */\n\nvar EXTRACT_TYPE_REGEXP = /^\\s*([^;\\s]*)(?:;|\\s|$)/\nvar TEXT_TYPE_REGEXP = /^text\\//i\n\n/**\n * Module exports.\n * @public\n */\n\nexports.charset = charset\nexports.charsets = { lookup: charset }\nexports.contentType = contentType\nexports.extension = extension\nexports.extensions = Object.create(null)\nexports.lookup = lookup\nexports.types = Object.create(null)\n\n// Populate the extensions/types maps\npopulateMaps(exports.extensions, exports.types)\n\n/**\n * Get the default charset for a MIME type.\n *\n * @param {string} type\n * @return {boolean|string}\n */\n\nfunction charset (type) {\n  if (!type || typeof type !== 'string') {\n    return false\n  }\n\n  // TODO: use media-typer\n  var match = EXTRACT_TYPE_REGEXP.exec(type)\n  var mime = match && db[match[1].toLowerCase()]\n\n  if (mime && mime.charset) {\n    return mime.charset\n  }\n\n  // default text/* to utf-8\n  if (match && TEXT_TYPE_REGEXP.test(match[1])) {\n    return 'UTF-8'\n  }\n\n  return false\n}\n\n/**\n * Create a full Content-Type header given a MIME type or extension.\n *\n * @param {string} str\n * @return {boolean|string}\n */\n\nfunction contentType (str) {\n  // TODO: should this even be in this module?\n  if (!str || typeof str !== 'string') {\n    return false\n  }\n\n  var mime = str.indexOf('/') === -1\n    ? exports.lookup(str)\n    : str\n\n  if (!mime) {\n    return false\n  }\n\n  // TODO: use content-type or other module\n  if (mime.indexOf('charset') === -1) {\n    var charset = exports.charset(mime)\n    if (charset) mime += '; charset=' + charset.toLowerCase()\n  }\n\n  return mime\n}\n\n/**\n * Get the default extension for a MIME type.\n *\n * @param {string} type\n * @return {boolean|string}\n */\n\nfunction extension (type) {\n  if (!type || typeof type !== 'string') {\n    return false\n  }\n\n  // TODO: use media-typer\n  var match = EXTRACT_TYPE_REGEXP.exec(type)\n\n  // get extensions\n  var exts = match && exports.extensions[match[1].toLowerCase()]\n\n  if (!exts || !exts.length) {\n    return false\n  }\n\n  return exts[0]\n}\n\n/**\n * Lookup the MIME type for a file path/extension.\n *\n * @param {string} path\n * @return {boolean|string}\n */\n\nfunction lookup (path) {\n  if (!path || typeof path !== 'string') {\n    return false\n  }\n\n  // get the extension (\"ext\" or \".ext\" or full path)\n  var extension = extname('x.' + path)\n    .toLowerCase()\n    .substr(1)\n\n  if (!extension) {\n    return false\n  }\n\n  return exports.types[extension] || false\n}\n\n/**\n * Populate the extensions and types maps.\n * @private\n */\n\nfunction populateMaps (extensions, types) {\n  // source preference (least -> most)\n  var preference = ['nginx', 'apache', undefined, 'iana']\n\n  Object.keys(db).forEach(function forEachMimeType (type) {\n    var mime = db[type]\n    var exts = mime.extensions\n\n    if (!exts || !exts.length) {\n      return\n    }\n\n    // mime -> extensions\n    extensions[type] = exts\n\n    // extension -> mime\n    for (var i = 0; i < exts.length; i++) {\n      var extension = exts[i]\n\n      if (types[extension]) {\n        var from = preference.indexOf(db[types[extension]].source)\n        var to = preference.indexOf(mime.source)\n\n        if (types[extension] !== 'application/octet-stream' &&\n          (from > to || (from === to && types[extension].substr(0, 12) === 'application/'))) {\n          // skip the remapping\n          continue\n        }\n      }\n\n      // set the extension -> mime\n      types[extension] = type\n    }\n  })\n}\n","import * as vscode from 'vscode';\r\nimport * as path from 'path';\r\nimport { AuraApiService, AgentInfo } from '../services/auraApiService';\r\n\r\n// Extension context for resource paths\r\nlet extensionPath: string = '';\r\n\r\nexport function setExtensionPath(extPath: string): void {\r\n    extensionPath = extPath;\r\n}\r\n\r\ntype TreeNode = CapabilityGroup | SubCapabilityGroup | AgentItem | PlaceholderItem;\r\n\r\n// Define parent-child capability relationships\r\nconst CAPABILITY_HIERARCHY: Record<string, string[]> = {\r\n    'coding': [\r\n        // Core languages\r\n        'csharp-coding', 'fsharp-coding', 'python-coding', 'typescript-coding', \r\n        'javascript-coding', 'go-coding', 'rust-coding',\r\n        // Additional language agents from YAML configs\r\n        'arm-coding', 'bash-coding', 'bicep-coding', 'elm-coding', \r\n        'haskell-coding', 'powershell-coding', 'terraform-coding',\r\n        // Generic software development\r\n        'software-development', 'software-development-csharp',\r\n    ],\r\n    'ingest': [\r\n        'ingest:cs', 'ingest:csx',      // C#\r\n        'ingest:fs', 'ingest:fsx',      // F#\r\n        'ingest:py',                     // Python\r\n        'ingest:ts', 'ingest:js',       // TypeScript/JavaScript\r\n        'ingest:go',                     // Go\r\n        'ingest:rs',                     // Rust\r\n        'ingest:txt', 'ingest:md', 'ingest:rst', 'ingest:adoc', 'ingest:log',  // Text\r\n        'ingest:*',                      // Fallback\r\n    ],\r\n};\r\n\r\n// Reverse lookup: child -> parent\r\nconst CHILD_TO_PARENT: Record<string, string> = {};\r\nfor (const [parent, children] of Object.entries(CAPABILITY_HIERARCHY)) {\r\n    for (const child of children) {\r\n        CHILD_TO_PARENT[child] = parent;\r\n    }\r\n}\r\n\r\n// Dynamic parent lookup - also handles patterns not in the static map\r\nfunction getParentCapability(capability: string): string | undefined {\r\n    // Check static map first\r\n    if (CHILD_TO_PARENT[capability]) {\r\n        return CHILD_TO_PARENT[capability];\r\n    }\r\n    // Any capability ending in -coding goes under 'coding'\r\n    if (capability.endsWith('-coding')) {\r\n        return 'coding';\r\n    }\r\n    // Any capability starting with 'ingest:' goes under 'ingest'\r\n    if (capability.startsWith('ingest:')) {\r\n        return 'ingest';\r\n    }\r\n    // Any capability starting with 'software-development' goes under 'coding'\r\n    if (capability.startsWith('software-development')) {\r\n        return 'coding';\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport class AgentTreeProvider implements vscode.TreeDataProvider<TreeNode> {\r\n    private _onDidChangeTreeData = new vscode.EventEmitter<TreeNode | undefined | null | void>();\r\n    readonly onDidChangeTreeData = this._onDidChangeTreeData.event;\r\n\r\n    private agents: AgentInfo[] = [];\r\n    private capabilityGroups: Map<string, CapabilityGroup> = new Map();\r\n\r\n    constructor(private apiService: AuraApiService) {}\r\n\r\n    refresh(): void {\r\n        this._onDidChangeTreeData.fire();\r\n    }\r\n\r\n    getTreeItem(element: TreeNode): vscode.TreeItem {\r\n        return element;\r\n    }\r\n\r\n    async getChildren(element?: TreeNode): Promise<TreeNode[]> {\r\n        if (!element) {\r\n            return this.getRootChildren();\r\n        }\r\n\r\n        if (element instanceof CapabilityGroup) {\r\n            return element.getChildren();\r\n        }\r\n\r\n        if (element instanceof SubCapabilityGroup) {\r\n            return element.agents\r\n                .sort((a, b) => a.priority - b.priority)\r\n                .map(agent => new AgentItem(agent));\r\n        }\r\n\r\n        return [];\r\n    }\r\n\r\n    private async getRootChildren(): Promise<TreeNode[]> {\r\n        try {\r\n            this.agents = await this.apiService.getAgents();\r\n\r\n            if (this.agents.length === 0) {\r\n                return [new PlaceholderItem('No agents loaded', 'warning')];\r\n            }\r\n\r\n            // Filter out only echo agents - keep ingesters and fallback visible\r\n            const userAgents = this.agents.filter(agent =>\r\n                !agent.id.includes('echo')\r\n            );\r\n\r\n            // Build hierarchical structure\r\n            // Top-level: parent capabilities and standalone capabilities\r\n            // Children: language/file-specific sub-capabilities\r\n\r\n            const topLevelMap = new Map<string, AgentInfo[]>();\r\n            const subCapabilityMap = new Map<string, Map<string, AgentInfo[]>>();\r\n\r\n            for (const agent of userAgents) {\r\n                const capabilities = agent.capabilities || [];\r\n                if (capabilities.length === 0) {\r\n                    const list = topLevelMap.get('general') || [];\r\n                    list.push(agent);\r\n                    topLevelMap.set('general', list);\r\n                    continue;\r\n                }\r\n\r\n                const primaryCap = capabilities[0];\r\n                const parentCap = getParentCapability(primaryCap);\r\n\r\n                if (parentCap) {\r\n                    // This is a sub-capability\r\n                    // For 'coding' parent, flatten all agents directly (no sub-groups)\r\n                    // For 'ingest' parent, keep sub-groups by file type\r\n                    if (parentCap === 'coding') {\r\n                        // Put directly under coding parent\r\n                        const list = topLevelMap.get(parentCap) || [];\r\n                        list.push(agent);\r\n                        topLevelMap.set(parentCap, list);\r\n                    } else {\r\n                        // Create sub-capability groups (for ingest, etc.)\r\n                        if (!subCapabilityMap.has(parentCap)) {\r\n                            subCapabilityMap.set(parentCap, new Map());\r\n                        }\r\n                        const subMap = subCapabilityMap.get(parentCap)!;\r\n                        const list = subMap.get(primaryCap) || [];\r\n                        list.push(agent);\r\n                        subMap.set(primaryCap, list);\r\n\r\n                        // Ensure parent exists in top-level\r\n                        if (!topLevelMap.has(parentCap)) {\r\n                            topLevelMap.set(parentCap, []);\r\n                        }\r\n                    }\r\n                } else {\r\n                    // Top-level capability\r\n                    const list = topLevelMap.get(primaryCap) || [];\r\n                    list.push(agent);\r\n                    topLevelMap.set(primaryCap, list);\r\n                }\r\n            }\r\n\r\n            // Sort capabilities\r\n            const priorityOrder = ['chat', 'coding', 'ingest', 'analysis', 'enrichment', 'fixing', 'review', 'documentation'];\r\n            const sortedCapabilities = Array.from(topLevelMap.keys()).sort((a, b) => {\r\n                const aIndex = priorityOrder.indexOf(a);\r\n                const bIndex = priorityOrder.indexOf(b);\r\n                if (aIndex !== -1 && bIndex !== -1) return aIndex - bIndex;\r\n                if (aIndex !== -1) return -1;\r\n                if (bIndex !== -1) return 1;\r\n                return a.localeCompare(b);\r\n            });\r\n\r\n            this.capabilityGroups.clear();\r\n            return sortedCapabilities.map(cap => {\r\n                const group = new CapabilityGroup(\r\n                    cap,\r\n                    topLevelMap.get(cap) || [],\r\n                    subCapabilityMap.get(cap) || new Map()\r\n                );\r\n                this.capabilityGroups.set(cap, group);\r\n                return group;\r\n            });\r\n        } catch (error) {\r\n            return [new PlaceholderItem('API Offline - Start Aura API to see agents', 'cloud-offline')];\r\n        }\r\n    }\r\n}export class CapabilityGroup extends vscode.TreeItem {\r\n    constructor(\r\n        public readonly capability: string,\r\n        public readonly agents: AgentInfo[],\r\n        public readonly subCapabilities: Map<string, AgentInfo[]>\r\n    ) {\r\n        super(\r\n            CapabilityGroup.formatCapabilityName(capability),\r\n            vscode.TreeItemCollapsibleState.Expanded\r\n        );\r\n\r\n        const directAgentCount = agents.length;\r\n        const subCapCount = subCapabilities.size;\r\n        const totalAgents = directAgentCount + Array.from(subCapabilities.values()).reduce((sum, arr) => sum + arr.length, 0);\r\n\r\n        if (subCapCount > 0) {\r\n            this.description = `${subCapCount} specializations, ${totalAgents} agents`;\r\n        } else {\r\n            this.description = `${directAgentCount} agent${directAgentCount !== 1 ? 's' : ''}`;\r\n        }\r\n\r\n        this.iconPath = CapabilityGroup.getIcon(capability);\r\n        this.tooltip = new vscode.MarkdownString(\r\n            `### ${this.label}\\n\\n` +\r\n            `**${totalAgents}** total agent${totalAgents !== 1 ? 's' : ''}\\n\\n` +\r\n            (subCapCount > 0 ? `**${subCapCount}** language specializations` : '')\r\n        );\r\n        this.contextValue = 'capabilityGroup';\r\n    }\r\n\r\n    getChildren(): TreeNode[] {\r\n        const children: TreeNode[] = [];\r\n\r\n        // Add sub-capability groups first (sorted)\r\n        const sortedSubCaps = Array.from(this.subCapabilities.keys()).sort();\r\n        for (const subCap of sortedSubCaps) {\r\n            const agents = this.subCapabilities.get(subCap)!;\r\n            children.push(new SubCapabilityGroup(subCap, agents, this.capability));\r\n        }\r\n\r\n        // Then add direct agents (generic ones)\r\n        const sortedAgents = [...this.agents].sort((a, b) => a.priority - b.priority);\r\n        for (const agent of sortedAgents) {\r\n            children.push(new AgentItem(agent));\r\n        }\r\n\r\n        return children;\r\n    }\r\n\r\n    private static formatCapabilityName(cap: string): string {\r\n        if (cap === 'ingest') return 'Ingesting';\r\n        return cap\r\n            .split('-')\r\n            .map(word => {\r\n                if (word === 'csharp') return 'C#';\r\n                if (word === 'typescript') return 'TypeScript';\r\n                if (word === 'javascript') return 'JavaScript';\r\n                return word.charAt(0).toUpperCase() + word.slice(1);\r\n            })\r\n            .join(' ');\r\n    }\r\n\r\n    private static getIcon(capability: string): vscode.ThemeIcon | { light: vscode.Uri; dark: vscode.Uri } {\r\n        // Fallback to theme icons for non-language categories\r\n        const iconMap: Record<string, [string, string]> = {\r\n            'chat': ['comment-discussion', 'charts.blue'],\r\n            'coding': ['code', 'charts.green'],\r\n            'ingest': ['file-code', 'charts.purple'],\r\n            'analysis': ['graph', 'charts.purple'],\r\n            'enrichment': ['sparkle', 'charts.orange'],\r\n            'fixing': ['wrench', 'charts.red'],\r\n            'review': ['checklist', 'charts.yellow'],\r\n            'documentation': ['book', 'charts.orange'],\r\n            'testing': ['beaker', 'charts.green'],\r\n            'general': ['robot', 'charts.foreground'],\r\n        };\r\n\r\n        const [icon, color] = iconMap[capability] || ['symbol-misc', 'charts.foreground'];\r\n        return new vscode.ThemeIcon(icon, new vscode.ThemeColor(color));\r\n    }\r\n}\r\n\r\nexport class SubCapabilityGroup extends vscode.TreeItem {\r\n    constructor(\r\n        public readonly subCapability: string,\r\n        public readonly agents: AgentInfo[],\r\n        public readonly parentCapability: string\r\n    ) {\r\n        super(\r\n            SubCapabilityGroup.formatSubCapabilityName(subCapability, parentCapability),\r\n            vscode.TreeItemCollapsibleState.Collapsed\r\n        );\r\n\r\n        const agentCount = agents.length;\r\n        this.description = `${agentCount} agent${agentCount !== 1 ? 's' : ''}`;\r\n        this.iconPath = SubCapabilityGroup.getIcon(subCapability);\r\n        this.tooltip = new vscode.MarkdownString(\r\n            `### ${this.label}\\n\\n` +\r\n            `**${agentCount}** agent${agentCount !== 1 ? 's' : ''} available`\r\n        );\r\n        this.contextValue = 'subCapabilityGroup';\r\n    }\r\n\r\n    private static formatSubCapabilityName(subCap: string, parentCap: string): string {\r\n        // For ingest capabilities like \"ingest:cs\" -> \"C#\"\r\n        if (subCap.startsWith('ingest:')) {\r\n            const ext = subCap.substring(7);\r\n            const extMap: Record<string, string> = {\r\n                'cs': 'C#', 'csx': 'C# Script',\r\n                'fs': 'F#', 'fsx': 'F# Script',\r\n                'py': 'Python',\r\n                'ts': 'TypeScript', 'js': 'JavaScript',\r\n                'go': 'Go',\r\n                'rs': 'Rust',\r\n                '*': 'Fallback',\r\n            };\r\n            return extMap[ext] || ext.toUpperCase();\r\n        }\r\n\r\n        // For coding capabilities like \"csharp-coding\" -> \"C#\"\r\n        const lang = subCap.replace('-coding', '').replace('-', '');\r\n        const langMap: Record<string, string> = {\r\n            'csharp': 'C#',\r\n            'fsharp': 'F#',\r\n            'python': 'Python',\r\n            'typescript': 'TypeScript',\r\n            'javascript': 'JavaScript',\r\n            'go': 'Go',\r\n            'rust': 'Rust',\r\n        };\r\n        return langMap[lang] || lang.charAt(0).toUpperCase() + lang.slice(1);\r\n    }\r\n\r\n    private static getIcon(subCap: string): vscode.ThemeIcon | { light: vscode.Uri; dark: vscode.Uri } {\r\n        // Map sub-capability to language for icon\r\n        let lang: string | null = null;\r\n\r\n        if (subCap.startsWith('ingest:')) {\r\n            const extMap: Record<string, string> = {\r\n                'cs': 'csharp', 'csx': 'csharp',\r\n                'fs': 'fsharp', 'fsx': 'fsharp',\r\n                'py': 'python',\r\n                'ts': 'typescript', 'js': 'typescript',\r\n                'go': 'go',\r\n                'rs': 'rust',\r\n            };\r\n            lang = extMap[subCap.substring(7)];\r\n        } else if (subCap.endsWith('-coding')) {\r\n            lang = subCap.replace('-coding', '');\r\n        }\r\n\r\n        if (lang && extensionPath) {\r\n            const iconName = lang;\r\n            const iconFilePath = path.join(extensionPath, 'resources', 'languages', `${iconName}.svg`);\r\n            return {\r\n                light: vscode.Uri.file(iconFilePath),\r\n                dark: vscode.Uri.file(iconFilePath)\r\n            };\r\n        }\r\n\r\n        return new vscode.ThemeIcon('symbol-misc', new vscode.ThemeColor('charts.foreground'));\r\n    }\r\n}\r\n\r\nexport class AgentItem extends vscode.TreeItem {\r\n    constructor(public readonly agent: AgentInfo) {\r\n        super(agent.name, vscode.TreeItemCollapsibleState.None);\r\n\r\n        const priorityLabel = AgentItem.getPriorityLabel(agent.priority);\r\n        const languageInfo = agent.languages?.length ? ` [${agent.languages.join(', ')}]` : '';\r\n        \r\n        this.description = `${priorityLabel}${languageInfo}`;\r\n        this.iconPath = this.getIcon();\r\n        this.tooltip = this.getTooltip();\r\n        this.contextValue = 'agent';\r\n        \r\n        // Command to execute when clicking the agent\r\n        this.command = {\r\n            command: 'aura.selectAgent',\r\n            title: 'Select Agent',\r\n            arguments: [agent]\r\n        };\r\n    }\r\n\r\n    private static getPriorityLabel(priority: number): string {\r\n        if (priority <= 30) return '';  // Specialist\r\n        if (priority <= 50) return '';   // Standard\r\n        if (priority <= 70) return '';    // General\r\n        return '';                         // Fallback\r\n    }\r\n\r\n    private getIcon(): vscode.ThemeIcon {\r\n        // All agents get the robot icon\r\n        return new vscode.ThemeIcon('robot', new vscode.ThemeColor('charts.foreground'));\r\n    }    private getTooltip(): vscode.MarkdownString {\r\n        const md = new vscode.MarkdownString();\r\n        md.appendMarkdown(`### ${this.agent.name}\\n\\n`);\r\n        \r\n        if (this.agent.description) {\r\n            md.appendMarkdown(`${this.agent.description}\\n\\n`);\r\n        }\r\n\r\n        md.appendMarkdown(`---\\n\\n`);\r\n        md.appendMarkdown(`| Property | Value |\\n`);\r\n        md.appendMarkdown(`|----------|-------|\\n`);\r\n        md.appendMarkdown(`| **Priority** | ${this.agent.priority} |\\n`);\r\n        md.appendMarkdown(`| **Provider** | ${this.agent.provider || 'ollama'} |\\n`);\r\n        md.appendMarkdown(`| **Model** | ${this.agent.model || 'default'} |\\n`);\r\n        \r\n        if (this.agent.capabilities?.length) {\r\n            md.appendMarkdown(`| **Capabilities** | ${this.agent.capabilities.join(', ')} |\\n`);\r\n        }\r\n        \r\n        if (this.agent.languages?.length) {\r\n            md.appendMarkdown(`| **Languages** | ${this.agent.languages.join(', ')} |\\n`);\r\n        }\r\n\r\n        if (this.agent.tags?.length) {\r\n            md.appendMarkdown(`\\n**Tags:** ${this.agent.tags.map(t => `\\`${t}\\``).join(' ')}\\n`);\r\n        }\r\n\r\n        return md;\r\n    }\r\n}\r\n\r\nexport class PlaceholderItem extends vscode.TreeItem {\r\n    constructor(message: string, icon: string) {\r\n        super(message, vscode.TreeItemCollapsibleState.None);\r\n        this.iconPath = new vscode.ThemeIcon(icon);\r\n        this.contextValue = 'placeholder';\r\n    }\r\n}\r\n","'use strict';\n\n/** @type {import('./max')} */\nmodule.exports = Math.max;\n","var abort = require('./abort.js')\n  , async = require('./async.js')\n  ;\n\n// API\nmodule.exports = terminator;\n\n/**\n * Terminates jobs in the attached state context\n *\n * @this  AsyncKitState#\n * @param {function} callback - final callback to invoke after termination\n */\nfunction terminator(callback)\n{\n  if (!Object.keys(this.jobs).length)\n  {\n    return;\n  }\n\n  // fast forward iteration index\n  this.index = this.size;\n\n  // abort jobs\n  abort(this);\n\n  // send back results we have so far\n  async(callback)(null, this.results);\n}\n","import * as vscode from 'vscode';\r\nimport * as fs from 'fs';\r\nimport * as path from 'path';\r\nimport { execSync } from 'child_process';\r\n\r\nexport interface GitRepositoryInfo {\r\n    /** The canonical path to the git repository root (parent for worktrees) */\r\n    canonicalPath: string;\r\n    /** Whether the current path is a git worktree */\r\n    isWorktree: boolean;\r\n    /** The parent repository path if this is a worktree */\r\n    parentPath?: string;\r\n    /** The worktree name if this is a worktree */\r\n    worktreeName?: string;\r\n}\r\n\r\n/**\r\n * Service for git-related operations in the extension.\r\n */\r\nexport class GitService {\r\n    /**\r\n     * Get the git repository root information for a given path.\r\n     * Detects if the path is a worktree and returns the parent repo path.\r\n     */\r\n    async getRepositoryInfo(workspacePath: string): Promise<GitRepositoryInfo | null> {\r\n        try {\r\n            const gitPath = path.join(workspacePath, '.git');\r\n\r\n            // Check if .git exists\r\n            if (!fs.existsSync(gitPath)) {\r\n                console.log('[GitService] No .git found at:', gitPath);\r\n                return null;\r\n            }\r\n\r\n            const stats = fs.statSync(gitPath);\r\n\r\n            if (stats.isDirectory()) {\r\n                // Normal git repository - .git is a directory\r\n                console.log('[GitService] Normal git repository:', workspacePath);\r\n                return {\r\n                    canonicalPath: workspacePath,\r\n                    isWorktree: false\r\n                };\r\n            }\r\n\r\n            if (stats.isFile()) {\r\n                // Worktree - .git is a file containing path to parent\r\n                console.log('[GitService] Detected worktree at:', workspacePath);\r\n                return this.parseWorktreeGitFile(workspacePath, gitPath);\r\n            }\r\n\r\n            return null;\r\n        } catch (error) {\r\n            console.error('[GitService] Error getting repository info:', error);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Parse the .git file in a worktree to find the parent repository.\r\n     */\r\n    private parseWorktreeGitFile(workspacePath: string, gitFilePath: string): GitRepositoryInfo | null {\r\n        try {\r\n            // .git file contains: \"gitdir: /path/to/parent/.git/worktrees/worktree-name\"\r\n            const content = fs.readFileSync(gitFilePath, 'utf-8').trim();\r\n            console.log('[GitService] .git file content:', content);\r\n\r\n            const match = content.match(/^gitdir:\\s*(.+)$/);\r\n            if (!match) {\r\n                console.log('[GitService] Could not parse .git file');\r\n                return null;\r\n            }\r\n\r\n            const gitdir = match[1].trim();\r\n            console.log('[GitService] gitdir:', gitdir);\r\n\r\n            // gitdir format: /path/to/parent/.git/worktrees/worktree-name\r\n            // We need to extract /path/to/parent\r\n            const worktreesIndex = gitdir.indexOf('.git' + path.sep + 'worktrees');\r\n            if (worktreesIndex === -1) {\r\n                // Try with forward slash (git often uses forward slashes)\r\n                const worktreesIndexAlt = gitdir.indexOf('.git/worktrees');\r\n                if (worktreesIndexAlt === -1) {\r\n                    console.log('[GitService] Not a standard worktree path:', gitdir);\r\n                    return null;\r\n                }\r\n                \r\n                const parentPath = gitdir.substring(0, worktreesIndexAlt).replace(/\\/$/, '');\r\n                const worktreeName = path.basename(gitdir);\r\n                \r\n                console.log('[GitService] Parent path (alt):', parentPath);\r\n                console.log('[GitService] Worktree name:', worktreeName);\r\n                \r\n                return {\r\n                    canonicalPath: parentPath,\r\n                    isWorktree: true,\r\n                    parentPath: parentPath,\r\n                    worktreeName: worktreeName\r\n                };\r\n            }\r\n\r\n            const parentPath = gitdir.substring(0, worktreesIndex).replace(/[\\\\/]$/, '');\r\n            const worktreeName = path.basename(gitdir);\r\n\r\n            console.log('[GitService] Parent path:', parentPath);\r\n            console.log('[GitService] Worktree name:', worktreeName);\r\n\r\n            return {\r\n                canonicalPath: parentPath,\r\n                isWorktree: true,\r\n                parentPath: parentPath,\r\n                worktreeName: worktreeName\r\n            };\r\n        } catch (error) {\r\n            console.error('[GitService] Error parsing .git file:', error);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get the git repository root using git rev-parse.\r\n     * This is a fallback method if .git file parsing fails.\r\n     */\r\n    async getRepositoryRootViaGit(workspacePath: string): Promise<string | null> {\r\n        try {\r\n            const result = execSync('git rev-parse --show-toplevel', {\r\n                cwd: workspacePath,\r\n                encoding: 'utf-8',\r\n                timeout: 5000\r\n            });\r\n            return result.trim();\r\n        } catch (error) {\r\n            console.error('[GitService] git rev-parse failed:', error);\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\n// Export singleton instance\r\nexport const gitService = new GitService();\r\n","'use strict';\n\nvar parseUrl = require('url').parse;\n\nvar DEFAULT_PORTS = {\n  ftp: 21,\n  gopher: 70,\n  http: 80,\n  https: 443,\n  ws: 80,\n  wss: 443,\n};\n\nvar stringEndsWith = String.prototype.endsWith || function(s) {\n  return s.length <= this.length &&\n    this.indexOf(s, this.length - s.length) !== -1;\n};\n\n/**\n * @param {string|object} url - The URL, or the result from url.parse.\n * @return {string} The URL of the proxy that should handle the request to the\n *  given URL. If no proxy is set, this will be an empty string.\n */\nfunction getProxyForUrl(url) {\n  var parsedUrl = typeof url === 'string' ? parseUrl(url) : url || {};\n  var proto = parsedUrl.protocol;\n  var hostname = parsedUrl.host;\n  var port = parsedUrl.port;\n  if (typeof hostname !== 'string' || !hostname || typeof proto !== 'string') {\n    return '';  // Don't proxy URLs without a valid scheme or host.\n  }\n\n  proto = proto.split(':', 1)[0];\n  // Stripping ports in this way instead of using parsedUrl.hostname to make\n  // sure that the brackets around IPv6 addresses are kept.\n  hostname = hostname.replace(/:\\d*$/, '');\n  port = parseInt(port) || DEFAULT_PORTS[proto] || 0;\n  if (!shouldProxy(hostname, port)) {\n    return '';  // Don't proxy URLs that match NO_PROXY.\n  }\n\n  var proxy =\n    getEnv('npm_config_' + proto + '_proxy') ||\n    getEnv(proto + '_proxy') ||\n    getEnv('npm_config_proxy') ||\n    getEnv('all_proxy');\n  if (proxy && proxy.indexOf('://') === -1) {\n    // Missing scheme in proxy, default to the requested URL's scheme.\n    proxy = proto + '://' + proxy;\n  }\n  return proxy;\n}\n\n/**\n * Determines whether a given URL should be proxied.\n *\n * @param {string} hostname - The host name of the URL.\n * @param {number} port - The effective port of the URL.\n * @returns {boolean} Whether the given URL should be proxied.\n * @private\n */\nfunction shouldProxy(hostname, port) {\n  var NO_PROXY =\n    (getEnv('npm_config_no_proxy') || getEnv('no_proxy')).toLowerCase();\n  if (!NO_PROXY) {\n    return true;  // Always proxy if NO_PROXY is not set.\n  }\n  if (NO_PROXY === '*') {\n    return false;  // Never proxy if wildcard is set.\n  }\n\n  return NO_PROXY.split(/[,\\s]/).every(function(proxy) {\n    if (!proxy) {\n      return true;  // Skip zero-length hosts.\n    }\n    var parsedProxy = proxy.match(/^(.+):(\\d+)$/);\n    var parsedProxyHostname = parsedProxy ? parsedProxy[1] : proxy;\n    var parsedProxyPort = parsedProxy ? parseInt(parsedProxy[2]) : 0;\n    if (parsedProxyPort && parsedProxyPort !== port) {\n      return true;  // Skip if ports don't match.\n    }\n\n    if (!/^[.*]/.test(parsedProxyHostname)) {\n      // No wildcards, so stop proxying if there is an exact match.\n      return hostname !== parsedProxyHostname;\n    }\n\n    if (parsedProxyHostname.charAt(0) === '*') {\n      // Remove leading wildcard.\n      parsedProxyHostname = parsedProxyHostname.slice(1);\n    }\n    // Stop proxying if the hostname ends with the no_proxy host.\n    return !stringEndsWith.call(hostname, parsedProxyHostname);\n  });\n}\n\n/**\n * Get the value for an environment variable.\n *\n * @param {string} key - The name of the environment variable.\n * @return {string} The value of the environment variable.\n * @private\n */\nfunction getEnv(key) {\n  return process.env[key.toLowerCase()] || process.env[key.toUpperCase()] || '';\n}\n\nexports.getProxyForUrl = getProxyForUrl;\n","'use strict';\n\n/** @type {import('./gOPD')} */\nmodule.exports = Object.getOwnPropertyDescriptor;\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","module.exports = require(\"path\");","module.exports = require(\"crypto\");","module.exports = require(\"url\");","'use strict';\n\n/** @type {import('./reflectApply')} */\nmodule.exports = typeof Reflect !== 'undefined' && Reflect && Reflect.apply;\n","'use strict';\n\nvar callBind = require('call-bind-apply-helpers');\nvar gOPD = require('gopd');\n\nvar hasProtoAccessor;\ntry {\n\t// eslint-disable-next-line no-extra-parens, no-proto\n\thasProtoAccessor = /** @type {{ __proto__?: typeof Array.prototype }} */ ([]).__proto__ === Array.prototype;\n} catch (e) {\n\tif (!e || typeof e !== 'object' || !('code' in e) || e.code !== 'ERR_PROTO_ACCESS') {\n\t\tthrow e;\n\t}\n}\n\n// eslint-disable-next-line no-extra-parens\nvar desc = !!hasProtoAccessor && gOPD && gOPD(Object.prototype, /** @type {keyof typeof Object.prototype} */ ('__proto__'));\n\nvar $Object = Object;\nvar $getPrototypeOf = $Object.getPrototypeOf;\n\n/** @type {import('./get')} */\nmodule.exports = desc && typeof desc.get === 'function'\n\t? callBind([desc.get])\n\t: typeof $getPrototypeOf === 'function'\n\t\t? /** @type {import('./get')} */ function getDunder(value) {\n\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\treturn $getPrototypeOf(value == null ? value : $Object(value));\n\t\t}\n\t\t: false;\n","import * as vscode from 'vscode';\r\nimport { AuraApiService, Workflow } from '../services/auraApiService';\r\n\r\nexport class WorkflowTreeProvider implements vscode.TreeDataProvider<WorkflowTreeItem> {\r\n    private _onDidChangeTreeData: vscode.EventEmitter<WorkflowTreeItem | undefined | null | void> = new vscode.EventEmitter<WorkflowTreeItem | undefined | null | void>();\r\n    readonly onDidChangeTreeData: vscode.Event<WorkflowTreeItem | undefined | null | void> = this._onDidChangeTreeData.event;\r\n\r\n    constructor(private apiService: AuraApiService) {}\r\n\r\n    refresh(): void {\r\n        this._onDidChangeTreeData.fire();\r\n    }\r\n\r\n    getTreeItem(element: WorkflowTreeItem): vscode.TreeItem {\r\n        return element;\r\n    }\r\n\r\n    async getChildren(element?: WorkflowTreeItem): Promise<WorkflowTreeItem[]> {\r\n        try {\r\n            if (!element) {\r\n                // Root level: show workflows\r\n                return this.getRootItems();\r\n            }\r\n\r\n            if (element.contextValue === 'workflow' && element.workflow) {\r\n                // Show steps under workflow\r\n                return this.getWorkflowChildren(element.workflow);\r\n            }\r\n\r\n            return [];\r\n        } catch (error) {\r\n            console.error('Error getting workflow tree children:', error);\r\n            return [new WorkflowTreeItem('Error loading data', vscode.TreeItemCollapsibleState.None, 'error')];\r\n        }\r\n    }\r\n\r\n    private async getRootItems(): Promise<WorkflowTreeItem[]> {\r\n        const items: WorkflowTreeItem[] = [];\r\n\r\n        try {\r\n            // Get all workflows\r\n            const baseUrl = this.apiService.getBaseUrl();\r\n            console.log(`[Aura] Fetching workflows from ${baseUrl}`);\r\n\r\n            // Filter workflows by current workspace\r\n            const workspacePath = vscode.workspace.workspaceFolders?.[0]?.uri.fsPath;\r\n            const workflows = await this.apiService.getWorkflows(undefined, workspacePath);            if (workflows.length === 0) {\r\n                items.push(new WorkflowTreeItem(\r\n                    'No workflows yet',\r\n                    vscode.TreeItemCollapsibleState.None,\r\n                    'empty'\r\n                ));\r\n                items[0].description = 'Create one with Aura: Create Workflow';\r\n            } else {\r\n                for (const workflow of workflows) {\r\n                    const item = this.createWorkflowItem(workflow);\r\n                    items.push(item);\r\n                }\r\n            }\r\n        } catch (error) {\r\n            const baseUrl = this.apiService.getBaseUrl();\r\n            console.error(`[Aura] Failed to fetch workflows from ${baseUrl}:`, error);\r\n            \r\n            const errorMessage = error instanceof Error ? error.message : String(error);\r\n            const item = new WorkflowTreeItem(\r\n                'Unable to connect to Aura API',\r\n                vscode.TreeItemCollapsibleState.None,\r\n                'offline'\r\n            );\r\n            item.tooltip = `Failed to connect to ${baseUrl}\\n\\nError: ${errorMessage}\\n\\nCheck that Aura is running and the aura.apiUrl setting is correct.`;\r\n            items.push(item);\r\n        }\r\n\r\n        return items;\r\n    }\r\n\r\n    private createWorkflowItem(workflow: Workflow): WorkflowTreeItem {\r\n        const hasSteps = workflow.steps && workflow.steps.length > 0;\r\n        const collapsible = hasSteps\r\n            ? vscode.TreeItemCollapsibleState.Expanded\r\n            : vscode.TreeItemCollapsibleState.Collapsed;\r\n\r\n        const item = new WorkflowTreeItem(\r\n            workflow.title,\r\n            collapsible,\r\n            'workflow'\r\n        );\r\n\r\n        item.workflow = workflow;\r\n        item.workflowId = workflow.id;\r\n        item.description = workflow.status;\r\n        item.iconPath = this.getStatusIcon(workflow.status);\r\n        item.tooltip = this.getWorkflowTooltip(workflow);\r\n\r\n        // Click opens worktree in new window\r\n        item.command = {\r\n            command: 'aura.openStoryWorktree',\r\n            title: 'Open Worktree',\r\n            arguments: [workflow.worktreePath]\r\n        };\r\n\r\n        return item;\r\n    }\r\n\r\n    private getWorkflowChildren(workflow: Workflow): WorkflowTreeItem[] {\r\n        const items: WorkflowTreeItem[] = [];\r\n\r\n        // Add issue link if exists\r\n        if (workflow.issueUrl && workflow.issueNumber) {\r\n            const issueItem = new WorkflowTreeItem(\r\n                `Issue #${workflow.issueNumber}`,\r\n                vscode.TreeItemCollapsibleState.None,\r\n                'issue'\r\n            );\r\n            issueItem.iconPath = new vscode.ThemeIcon('github');\r\n            issueItem.tooltip = workflow.issueUrl;\r\n            issueItem.command = {\r\n                command: 'vscode.open',\r\n                title: 'Open Issue',\r\n                arguments: [vscode.Uri.parse(workflow.issueUrl)]\r\n            };\r\n            items.push(issueItem);\r\n        }\r\n\r\n        // Add branch if exists\r\n        if (workflow.gitBranch) {\r\n            const branchItem = new WorkflowTreeItem(\r\n                `Branch: ${workflow.gitBranch}`,\r\n                vscode.TreeItemCollapsibleState.None,\r\n                'info'\r\n            );\r\n            branchItem.iconPath = new vscode.ThemeIcon('git-branch');\r\n            items.push(branchItem);\r\n        }\r\n\r\n        // Add worktree path if exists (with action to open)\r\n        if (workflow.worktreePath) {\r\n            const worktreeItem = new WorkflowTreeItem(\r\n                `Worktree`,\r\n                vscode.TreeItemCollapsibleState.None,\r\n                'worktree'\r\n            );\r\n            worktreeItem.iconPath = new vscode.ThemeIcon('folder-opened');\r\n            worktreeItem.tooltip = `Open in new window: ${workflow.worktreePath}`;\r\n            worktreeItem.workflowId = workflow.id;\r\n            worktreeItem.command = {\r\n                command: 'aura.openStoryWorktree',\r\n                title: 'Open Worktree',\r\n                arguments: [workflow.worktreePath]\r\n            };\r\n            items.push(worktreeItem);\r\n        }\r\n\r\n        // Add steps\r\n        if (workflow.steps && workflow.steps.length > 0) {\r\n            for (const step of workflow.steps) {\r\n                const stepItem = new WorkflowTreeItem(\r\n                    `${step.order}. ${step.name}`,\r\n                    vscode.TreeItemCollapsibleState.None,\r\n                    'step'\r\n                );\r\n                stepItem.step = step;\r\n                stepItem.workflowId = workflow.id;\r\n                stepItem.description = step.capability;\r\n                stepItem.iconPath = this.getStepIcon(step.status);\r\n                stepItem.tooltip = `${step.name}\\nCapability: ${step.capability}\\nStatus: ${step.status}`;\r\n\r\n                // Allow executing pending steps\r\n                if (step.status === 'Pending') {\r\n                    stepItem.command = {\r\n                        command: 'aura.executeStep',\r\n                        title: 'Execute Step',\r\n                        arguments: [workflow.id, step.id]\r\n                    };\r\n                }\r\n\r\n                items.push(stepItem);\r\n            }\r\n        }\r\n\r\n        return items;\r\n    }\r\n\r\n    private getStatusIcon(status: string): vscode.ThemeIcon {\r\n        switch (status) {\r\n            case 'Created':\r\n                return new vscode.ThemeIcon('circle-outline');\r\n            case 'Analyzing':\r\n            case 'Planning':\r\n                return new vscode.ThemeIcon('sync~spin');\r\n            case 'Analyzed':\r\n            case 'Planned':\r\n                return new vscode.ThemeIcon('checklist');\r\n            case 'Executing':\r\n                return new vscode.ThemeIcon('play-circle');\r\n            case 'Completed':\r\n                return new vscode.ThemeIcon('check', new vscode.ThemeColor('charts.green'));\r\n            case 'Failed':\r\n                return new vscode.ThemeIcon('error', new vscode.ThemeColor('charts.red'));\r\n            case 'Cancelled':\r\n                return new vscode.ThemeIcon('circle-slash');\r\n            default:\r\n                return new vscode.ThemeIcon('circle-outline');\r\n        }\r\n    }\r\n\r\n    private getStepIcon(status: string): vscode.ThemeIcon {\r\n        switch (status) {\r\n            case 'Pending':\r\n                return new vscode.ThemeIcon('circle-outline');\r\n            case 'Running':\r\n                return new vscode.ThemeIcon('sync~spin');\r\n            case 'Completed':\r\n                return new vscode.ThemeIcon('check', new vscode.ThemeColor('charts.green'));\r\n            case 'Failed':\r\n                return new vscode.ThemeIcon('error', new vscode.ThemeColor('charts.red'));\r\n            case 'Skipped':\r\n                return new vscode.ThemeIcon('debug-step-over');\r\n            default:\r\n                return new vscode.ThemeIcon('circle-outline');\r\n        }\r\n    }\r\n\r\n    private getWorkflowTooltip(workflow: Workflow): string {\r\n        let tooltip = `${workflow.title}\\n`;\r\n        if (workflow.description) {\r\n            tooltip += `\\n${workflow.description}\\n`;\r\n        }\r\n        tooltip += `\\nStatus: ${workflow.status}`;\r\n        if (workflow.issueUrl) {\r\n            tooltip += `\\nIssue: ${workflow.issueUrl}`;\r\n        }\r\n        if (workflow.repositoryPath) {\r\n            tooltip += `\\nRepository: ${workflow.repositoryPath}`;\r\n        }\r\n        if (workflow.gitBranch) {\r\n            tooltip += `\\nBranch: ${workflow.gitBranch}`;\r\n        }\r\n        if (workflow.worktreePath) {\r\n            tooltip += `\\nWorktree: ${workflow.worktreePath}`;\r\n        }\r\n        return tooltip;\r\n    }\r\n}\r\n\r\nexport class WorkflowTreeItem extends vscode.TreeItem {\r\n    workflow?: Workflow;\r\n    step?: { id: string; order: number; name: string; capability: string; status: string };\r\n    workflowId?: string;\r\n\r\n    constructor(\r\n        public readonly label: string,\r\n        public readonly collapsibleState: vscode.TreeItemCollapsibleState,\r\n        public readonly contextValue: string\r\n    ) {\r\n        super(label, collapsibleState);\r\n    }\r\n}\r\n","import * as vscode from 'vscode';\r\nimport { HealthCheckService, ServiceStatus, OllamaStatus, RagStatus, McpStatus, OllamaModelInfo } from '../services/healthCheckService';\r\n\r\nexport class StatusTreeProvider implements vscode.TreeDataProvider<StatusItem> {\r\n    private _onDidChangeTreeData = new vscode.EventEmitter<StatusItem | undefined | null | void>();\r\n    readonly onDidChangeTreeData = this._onDidChangeTreeData.event;\r\n\r\n    constructor(private healthCheckService: HealthCheckService) {}\r\n\r\n    refresh(): void {\r\n        this._onDidChangeTreeData.fire();\r\n    }\r\n\r\n    getTreeItem(element: StatusItem): vscode.TreeItem {\r\n        return element;\r\n    }\r\n\r\n    getChildren(element?: StatusItem): Thenable<StatusItem[]> {\r\n        if (!element) {\r\n            // Root level - show main status items\r\n            const statuses = this.healthCheckService.getStatuses();\r\n            return Promise.resolve([\r\n                this.createStatusItem('Aura API', statuses.api),\r\n                this.createOllamaItem(statuses.ollama),\r\n                this.createStatusItem('Database', statuses.database),\r\n                this.createRagItem(statuses.rag),\r\n                this.createMcpItem(statuses.mcp)\r\n            ]);\r\n        }\r\n\r\n        // Children for expandable items\r\n        if (element.itemType === 'ollama' && element.ollamaStatus) {\r\n            return Promise.resolve(this.getOllamaChildren(element.ollamaStatus));\r\n        }\r\n\r\n        if (element.itemType === 'rag' && element.ragStatus) {\r\n            return Promise.resolve(this.getRagChildren(element.ragStatus));\r\n        }\r\n\r\n        if (element.itemType === 'ollama-models' && element.ollamaStatus) {\r\n            return Promise.resolve(this.getModelChildren(element.ollamaStatus));\r\n        }\r\n\r\n        if (element.itemType === 'mcp' && element.mcpStatus) {\r\n            return Promise.resolve(this.getMcpChildren(element.mcpStatus));\r\n        }\r\n\r\n        return Promise.resolve([]);\r\n    }\r\n\r\n    private createStatusItem(name: string, status: ServiceStatus): StatusItem {\r\n        return new StatusItem(name, status, 'service');\r\n    }\r\n\r\n    private createOllamaItem(status: OllamaStatus): StatusItem {\r\n        const hasDetails = status.status === 'healthy' && (status.models?.length || 0) > 0;\r\n        return new StatusItem(\r\n            'Ollama',\r\n            status,\r\n            'ollama',\r\n            hasDetails ? vscode.TreeItemCollapsibleState.Collapsed : vscode.TreeItemCollapsibleState.None,\r\n            status\r\n        );\r\n    }\r\n\r\n    private createRagItem(status: RagStatus): StatusItem {\r\n        const hasDetails = status.status === 'healthy' && (status.totalDocuments || 0) > 0;\r\n        const item = new StatusItem(\r\n            'RAG Index',\r\n            status,\r\n            'rag',\r\n            hasDetails ? vscode.TreeItemCollapsibleState.Collapsed : vscode.TreeItemCollapsibleState.None,\r\n            undefined,\r\n            status\r\n        );\r\n        item.contextValue = 'rag';\r\n        return item;\r\n    }\r\n\r\n    private createMcpItem(status: McpStatus): StatusItem {\r\n        const hasDetails = status.status === 'healthy' && (status.mcpTools?.length || 0) > 0;\r\n        const item = new StatusItem(\r\n            'MCP Server',\r\n            status,\r\n            'mcp',\r\n            hasDetails ? vscode.TreeItemCollapsibleState.Collapsed : vscode.TreeItemCollapsibleState.None,\r\n            undefined,\r\n            undefined,\r\n            status\r\n        );\r\n        item.contextValue = 'mcp';\r\n        return item;\r\n    }\r\n\r\n    private getOllamaChildren(status: OllamaStatus): StatusItem[] {\r\n        const children: StatusItem[] = [];\r\n\r\n        // Running models section\r\n        if (status.runningModels && status.runningModels.length > 0) {\r\n            const totalVram = status.runningModels.reduce((sum, m) => sum + m.sizeVram, 0);\r\n            const runningItem = new StatusItem(\r\n                `Loaded in VRAM`,\r\n                { status: 'healthy', details: `${status.runningModels.length} model(s), ${this.formatBytes(totalVram)}` },\r\n                'info'\r\n            );\r\n            runningItem.iconPath = new vscode.ThemeIcon('pulse', new vscode.ThemeColor('charts.green'));\r\n            children.push(runningItem);\r\n\r\n            // List each running model\r\n            for (const model of status.runningModels) {\r\n                const modelItem = new StatusItem(\r\n                    model.name,\r\n                    { status: 'healthy', details: this.formatBytes(model.sizeVram) },\r\n                    'running-model'\r\n                );\r\n                modelItem.iconPath = new vscode.ThemeIcon('vm-running', new vscode.ThemeColor('charts.green'));\r\n                children.push(modelItem);\r\n            }\r\n        } else {\r\n            const noLoadedItem = new StatusItem(\r\n                'No models loaded',\r\n                { status: 'unknown', details: 'Models load on first use' },\r\n                'info'\r\n            );\r\n            noLoadedItem.iconPath = new vscode.ThemeIcon('circle-outline');\r\n            children.push(noLoadedItem);\r\n        }\r\n\r\n        // Available models section\r\n        if (status.models && status.models.length > 0) {\r\n            const totalSize = status.totalModelSize || 0;\r\n            const modelsItem = new StatusItem(\r\n                `Available Models`,\r\n                { status: 'healthy', details: `${status.models.length} models, ${this.formatBytes(totalSize)} on disk` },\r\n                'ollama-models',\r\n                vscode.TreeItemCollapsibleState.Collapsed,\r\n                status\r\n            );\r\n            modelsItem.iconPath = new vscode.ThemeIcon('database');\r\n            children.push(modelsItem);\r\n        }\r\n\r\n        return children;\r\n    }\r\n\r\n    private getModelChildren(status: OllamaStatus): StatusItem[] {\r\n        if (!status.models) return [];\r\n\r\n        return status.models.map(model => {\r\n            const item = new StatusItem(\r\n                model.name,\r\n                { \r\n                    status: 'healthy', \r\n                    details: `${model.parameterSize}  ${model.quantization}  ${this.formatBytes(model.size)}` \r\n                },\r\n                'model'\r\n            );\r\n            item.iconPath = new vscode.ThemeIcon('symbol-misc');\r\n            item.tooltip = new vscode.MarkdownString(\r\n                `### ${model.name}\\n\\n` +\r\n                `- **Parameters:** ${model.parameterSize}\\n` +\r\n                `- **Quantization:** ${model.quantization}\\n` +\r\n                `- **Family:** ${model.family}\\n` +\r\n                `- **Size:** ${this.formatBytes(model.size)}`\r\n            );\r\n            return item;\r\n        });\r\n    }\r\n\r\n    private getRagChildren(status: RagStatus): StatusItem[] {\r\n        const children: StatusItem[] = [];\r\n\r\n        // Index Health indicator (freshness)\r\n        if (status.indexHealth) {\r\n            const healthItem = this.createHealthItem(status);\r\n            children.push(healthItem);\r\n        }\r\n\r\n        // Code Graph stats (Roslyn semantic index) - current workspace only\r\n        if (status.graphNodes !== undefined && status.graphNodes > 0) {\r\n            const graphItem = new StatusItem(\r\n                'Code Graph',\r\n                { status: 'healthy', details: `${status.graphNodes} nodes, ${status.graphEdges || 0} edges` },\r\n                'info'\r\n            );\r\n            graphItem.iconPath = new vscode.ThemeIcon('type-hierarchy', new vscode.ThemeColor('charts.blue'));\r\n            children.push(graphItem);\r\n        } else {\r\n            const noGraphItem = new StatusItem(\r\n                'Code Graph',\r\n                { status: 'unknown', details: 'Not indexed' },\r\n                'info'\r\n            );\r\n            noGraphItem.iconPath = new vscode.ThemeIcon('type-hierarchy');\r\n            children.push(noGraphItem);\r\n        }\r\n\r\n        // Current workspace stats (use repo-filtered counts, fall back to totals if not available)\r\n        const docCount = status.repoDocuments ?? status.totalDocuments ?? 0;\r\n        const chunkCount = status.repoChunks ?? status.totalChunks ?? 0;\r\n\r\n        // Symbols count (each class, method, section is a \"document\" in RAG terms)\r\n        const docItem = new StatusItem(\r\n            'Symbols',\r\n            { status: 'healthy', details: `${docCount}` },\r\n            'info'\r\n        );\r\n        docItem.iconPath = new vscode.ThemeIcon('symbol-class');\r\n        children.push(docItem);\r\n\r\n        // Embeddings count (vector representations for similarity search)\r\n        const chunkItem = new StatusItem(\r\n            'Embeddings',\r\n            { status: 'healthy', details: `${chunkCount}` },\r\n            'info'\r\n        );\r\n        chunkItem.iconPath = new vscode.ThemeIcon('symbol-array');\r\n        children.push(chunkItem);\r\n\r\n        // Breakdown by type\r\n        if (status.chunksByType && Object.keys(status.chunksByType).length > 0) {\r\n            for (const [type, count] of Object.entries(status.chunksByType)) {\r\n                const typeItem = new StatusItem(\r\n                    type,\r\n                    { status: 'healthy', details: `${count} chunks` },\r\n                    'info'\r\n                );\r\n                typeItem.iconPath = this.getIconForContentType(type);\r\n                children.push(typeItem);\r\n            }\r\n        }\r\n\r\n        return children;\r\n    }\r\n\r\n    private createHealthItem(status: RagStatus): StatusItem {\r\n        const health = status.indexHealth || 'not-indexed';\r\n        let label: string;\r\n        let icon: vscode.ThemeIcon;\r\n        let details: string;\r\n\r\n        // Check if indexing is in progress first\r\n        if (status.isIndexing) {\r\n            label = 'Indexing...';\r\n            icon = new vscode.ThemeIcon('sync~spin', new vscode.ThemeColor('charts.blue'));\r\n            details = `${status.indexingProgress || 0}% complete`;\r\n            const item = new StatusItem(label, { status: 'healthy', details }, 'health');\r\n            item.iconPath = icon;\r\n            item.contextValue = 'indexHealth';\r\n            return item;\r\n        }\r\n\r\n        switch (health) {\r\n            case 'fresh':\r\n                label = 'Index Fresh';\r\n                icon = new vscode.ThemeIcon('check', new vscode.ThemeColor('charts.green'));\r\n                details = 'Up to date with latest commit';\r\n                break;\r\n            case 'stale':\r\n                label = 'Index Stale';\r\n                icon = new vscode.ThemeIcon('warning', new vscode.ThemeColor('charts.yellow'));\r\n                details = `${status.commitsBehind || 0} commit(s) behind`;\r\n                break;\r\n            case 'outdated':\r\n                label = 'Index Outdated';\r\n                icon = new vscode.ThemeIcon('error', new vscode.ThemeColor('charts.orange'));\r\n                details = `${status.commitsBehind || 0} commit(s) behind - consider reindexing`;\r\n                break;\r\n            default:\r\n                label = 'Not Indexed';\r\n                icon = new vscode.ThemeIcon('circle-outline');\r\n                details = 'Run indexing to enable RAG';\r\n        }\r\n\r\n        const item = new StatusItem(label, { status: 'healthy', details }, 'health');\r\n        item.iconPath = icon;\r\n        item.contextValue = 'indexHealth';\r\n        return item;\r\n    }\r\n\r\n    private getIconForContentType(type: string): vscode.ThemeIcon {\r\n        const iconMap: Record<string, string> = {\r\n            'Markdown': 'markdown',\r\n            'CSharp': 'file-code',\r\n            'TypeScript': 'file-code',\r\n            'JavaScript': 'file-code',\r\n            'Python': 'file-code',\r\n            'PlainText': 'file-text',\r\n            'Json': 'json',\r\n            'Yaml': 'file-code',\r\n        };\r\n        return new vscode.ThemeIcon(iconMap[type] || 'file');\r\n    }\r\n\r\n    private formatBytes(bytes: number): string {\r\n        if (bytes === 0) return '0 B';\r\n        const k = 1024;\r\n        const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\r\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\r\n    }\r\n\r\n    private getMcpChildren(status: McpStatus): StatusItem[] {\r\n        const children: StatusItem[] = [];\r\n\r\n        // Show tool count summary\r\n        if (status.mcpTools && status.mcpTools.length > 0) {\r\n            const toolsItem = new StatusItem(\r\n                'MCP Tools',\r\n                { status: 'healthy', details: `${status.mcpTools.length} available` },\r\n                'info'\r\n            );\r\n            toolsItem.iconPath = new vscode.ThemeIcon('tools', new vscode.ThemeColor('charts.blue'));\r\n            children.push(toolsItem);\r\n\r\n            // List each tool\r\n            for (const tool of status.mcpTools) {\r\n                const toolItem = new StatusItem(\r\n                    tool,\r\n                    { status: 'healthy' },\r\n                    'info'\r\n                );\r\n                toolItem.iconPath = new vscode.ThemeIcon('symbol-method');\r\n                children.push(toolItem);\r\n            }\r\n        }\r\n\r\n        // Agent tools count\r\n        if (status.agentToolCount !== undefined && status.agentToolCount > 0) {\r\n            const agentItem = new StatusItem(\r\n                'Agent Tools',\r\n                { status: 'healthy', details: `${status.agentToolCount} registered` },\r\n                'info'\r\n            );\r\n            agentItem.iconPath = new vscode.ThemeIcon('hubot', new vscode.ThemeColor('charts.green'));\r\n            children.push(agentItem);\r\n        }\r\n\r\n        return children;\r\n    }\r\n}\r\n\r\nexport type StatusItemType = 'service' | 'ollama' | 'rag' | 'mcp' | 'ollama-models' | 'model' | 'running-model' | 'info' | 'health';\r\n\r\nexport class StatusItem extends vscode.TreeItem {\r\n    constructor(\r\n        public readonly name: string,\r\n        public readonly status: ServiceStatus,\r\n        public readonly itemType: StatusItemType = 'service',\r\n        collapsibleState: vscode.TreeItemCollapsibleState = vscode.TreeItemCollapsibleState.None,\r\n        public readonly ollamaStatus?: OllamaStatus,\r\n        public readonly ragStatus?: RagStatus,\r\n        public readonly mcpStatus?: McpStatus\r\n    ) {\r\n        super(name, collapsibleState);\r\n\r\n        this.description = this.getDescription();\r\n        if (!this.iconPath) {\r\n            this.iconPath = this.getIcon();\r\n        }\r\n        if (!this.tooltip) {\r\n            this.tooltip = this.getTooltip();\r\n        }\r\n    }\r\n\r\n    private getDescription(): string {\r\n        switch (this.status.status) {\r\n            case 'healthy':\r\n                return this.status.details || 'Connected';\r\n            case 'unhealthy':\r\n                return this.status.error || 'Not connected';\r\n            case 'checking':\r\n                return 'Checking...';\r\n            case 'unknown':\r\n            default:\r\n                return this.status.details || 'Unknown';\r\n        }\r\n    }\r\n\r\n    private getIcon(): vscode.ThemeIcon {\r\n        switch (this.status.status) {\r\n            case 'healthy':\r\n                return new vscode.ThemeIcon('pass', new vscode.ThemeColor('testing.iconPassed'));\r\n            case 'unhealthy':\r\n                return new vscode.ThemeIcon('error', new vscode.ThemeColor('testing.iconFailed'));\r\n            case 'checking':\r\n                return new vscode.ThemeIcon('sync~spin');\r\n            case 'unknown':\r\n            default:\r\n                return new vscode.ThemeIcon('question', new vscode.ThemeColor('testing.iconSkipped'));\r\n        }\r\n    }\r\n\r\n    private getTooltip(): vscode.MarkdownString {\r\n        const md = new vscode.MarkdownString();\r\n        md.appendMarkdown(`### ${this.name}\\n\\n`);\r\n        md.appendMarkdown(`**Status:** ${this.status.status}\\n\\n`);\r\n\r\n        if (this.status.url) {\r\n            md.appendMarkdown(`**URL:** ${this.status.url}\\n\\n`);\r\n        }\r\n\r\n        if (this.status.responseTime) {\r\n            md.appendMarkdown(`**Response Time:** ${this.status.responseTime}ms\\n\\n`);\r\n        }\r\n\r\n        if (this.status.details) {\r\n            md.appendMarkdown(`**Details:** ${this.status.details}\\n\\n`);\r\n        }\r\n\r\n        if (this.status.error) {\r\n            md.appendMarkdown(`**Error:** ${this.status.error}\\n\\n`);\r\n        }\r\n\r\n        if (this.status.lastChecked) {\r\n            md.appendMarkdown(`*Last checked: ${this.status.lastChecked.toLocaleTimeString()}*`);\r\n        }\r\n\r\n        return md;\r\n    }\r\n}","var debug;\n\nmodule.exports = function () {\n  if (!debug) {\n    try {\n      /* eslint global-require: off */\n      debug = require(\"debug\")(\"follow-redirects\");\n    }\n    catch (error) { /* */ }\n    if (typeof debug !== \"function\") {\n      debug = function () { /* */ };\n    }\n  }\n  debug.apply(null, arguments);\n};\n","/*!\n * mime-db\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2015-2022 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n/**\n * Module exports.\n */\n\nmodule.exports = require('./db.json')\n","'use strict';\nconst os = require('os');\nconst tty = require('tty');\nconst hasFlag = require('has-flag');\n\nconst {env} = process;\n\nlet forceColor;\nif (hasFlag('no-color') ||\n\thasFlag('no-colors') ||\n\thasFlag('color=false') ||\n\thasFlag('color=never')) {\n\tforceColor = 0;\n} else if (hasFlag('color') ||\n\thasFlag('colors') ||\n\thasFlag('color=true') ||\n\thasFlag('color=always')) {\n\tforceColor = 1;\n}\n\nif ('FORCE_COLOR' in env) {\n\tif (env.FORCE_COLOR === 'true') {\n\t\tforceColor = 1;\n\t} else if (env.FORCE_COLOR === 'false') {\n\t\tforceColor = 0;\n\t} else {\n\t\tforceColor = env.FORCE_COLOR.length === 0 ? 1 : Math.min(parseInt(env.FORCE_COLOR, 10), 3);\n\t}\n}\n\nfunction translateLevel(level) {\n\tif (level === 0) {\n\t\treturn false;\n\t}\n\n\treturn {\n\t\tlevel,\n\t\thasBasic: true,\n\t\thas256: level >= 2,\n\t\thas16m: level >= 3\n\t};\n}\n\nfunction supportsColor(haveStream, streamIsTTY) {\n\tif (forceColor === 0) {\n\t\treturn 0;\n\t}\n\n\tif (hasFlag('color=16m') ||\n\t\thasFlag('color=full') ||\n\t\thasFlag('color=truecolor')) {\n\t\treturn 3;\n\t}\n\n\tif (hasFlag('color=256')) {\n\t\treturn 2;\n\t}\n\n\tif (haveStream && !streamIsTTY && forceColor === undefined) {\n\t\treturn 0;\n\t}\n\n\tconst min = forceColor || 0;\n\n\tif (env.TERM === 'dumb') {\n\t\treturn min;\n\t}\n\n\tif (process.platform === 'win32') {\n\t\t// Windows 10 build 10586 is the first Windows release that supports 256 colors.\n\t\t// Windows 10 build 14931 is the first release that supports 16m/TrueColor.\n\t\tconst osRelease = os.release().split('.');\n\t\tif (\n\t\t\tNumber(osRelease[0]) >= 10 &&\n\t\t\tNumber(osRelease[2]) >= 10586\n\t\t) {\n\t\t\treturn Number(osRelease[2]) >= 14931 ? 3 : 2;\n\t\t}\n\n\t\treturn 1;\n\t}\n\n\tif ('CI' in env) {\n\t\tif (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI', 'GITHUB_ACTIONS', 'BUILDKITE'].some(sign => sign in env) || env.CI_NAME === 'codeship') {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn min;\n\t}\n\n\tif ('TEAMCITY_VERSION' in env) {\n\t\treturn /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;\n\t}\n\n\tif (env.COLORTERM === 'truecolor') {\n\t\treturn 3;\n\t}\n\n\tif ('TERM_PROGRAM' in env) {\n\t\tconst version = parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);\n\n\t\tswitch (env.TERM_PROGRAM) {\n\t\t\tcase 'iTerm.app':\n\t\t\t\treturn version >= 3 ? 3 : 2;\n\t\t\tcase 'Apple_Terminal':\n\t\t\t\treturn 2;\n\t\t\t// No default\n\t\t}\n\t}\n\n\tif (/-256(color)?$/i.test(env.TERM)) {\n\t\treturn 2;\n\t}\n\n\tif (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {\n\t\treturn 1;\n\t}\n\n\tif ('COLORTERM' in env) {\n\t\treturn 1;\n\t}\n\n\treturn min;\n}\n\nfunction getSupportLevel(stream) {\n\tconst level = supportsColor(stream, stream && stream.isTTY);\n\treturn translateLevel(level);\n}\n\nmodule.exports = {\n\tsupportsColor: getSupportLevel,\n\tstdout: translateLevel(supportsColor(true, tty.isatty(1))),\n\tstderr: translateLevel(supportsColor(true, tty.isatty(2)))\n};\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\tlet m;\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\t// eslint-disable-next-line no-return-assign\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && (m = navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)) && parseInt(m[1], 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug') || exports.storage.getItem('DEBUG') ;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","'use strict';\n\n/** @type {import('./min')} */\nmodule.exports = Math.min;\n","var async = require('./async.js')\n  , abort = require('./abort.js')\n  ;\n\n// API\nmodule.exports = iterate;\n\n/**\n * Iterates over each job object\n *\n * @param {array|object} list - array or object (named list) to iterate over\n * @param {function} iterator - iterator to run\n * @param {object} state - current job status\n * @param {function} callback - invoked when all elements processed\n */\nfunction iterate(list, iterator, state, callback)\n{\n  // store current index\n  var key = state['keyedList'] ? state['keyedList'][state.index] : state.index;\n\n  state.jobs[key] = runJob(iterator, key, list[key], function(error, output)\n  {\n    // don't repeat yourself\n    // skip secondary callbacks\n    if (!(key in state.jobs))\n    {\n      return;\n    }\n\n    // clean up jobs\n    delete state.jobs[key];\n\n    if (error)\n    {\n      // don't process rest of the results\n      // stop still active jobs\n      // and reset the list\n      abort(state);\n    }\n    else\n    {\n      state.results[key] = output;\n    }\n\n    // return salvaged results\n    callback(error, state.results);\n  });\n}\n\n/**\n * Runs iterator over provided job element\n *\n * @param   {function} iterator - iterator to invoke\n * @param   {string|number} key - key/index of the element in the list of jobs\n * @param   {mixed} item - job description\n * @param   {function} callback - invoked after iterator is done with the job\n * @returns {function|mixed} - job abort function or something else\n */\nfunction runJob(iterator, key, item, callback)\n{\n  var aborter;\n\n  // allow shortcut if iterator expects only two arguments\n  if (iterator.length == 2)\n  {\n    aborter = iterator(item, async(callback));\n  }\n  // otherwise go with full three arguments\n  else\n  {\n    aborter = iterator(item, key, async(callback));\n  }\n\n  return aborter;\n}\n","'use strict';\n\n/** @type {import('./syntax')} */\nmodule.exports = SyntaxError;\n","var Stream = require('stream').Stream;\nvar util = require('util');\n\nmodule.exports = DelayedStream;\nfunction DelayedStream() {\n  this.source = null;\n  this.dataSize = 0;\n  this.maxDataSize = 1024 * 1024;\n  this.pauseStream = true;\n\n  this._maxDataSizeExceeded = false;\n  this._released = false;\n  this._bufferedEvents = [];\n}\nutil.inherits(DelayedStream, Stream);\n\nDelayedStream.create = function(source, options) {\n  var delayedStream = new this();\n\n  options = options || {};\n  for (var option in options) {\n    delayedStream[option] = options[option];\n  }\n\n  delayedStream.source = source;\n\n  var realEmit = source.emit;\n  source.emit = function() {\n    delayedStream._handleEmit(arguments);\n    return realEmit.apply(source, arguments);\n  };\n\n  source.on('error', function() {});\n  if (delayedStream.pauseStream) {\n    source.pause();\n  }\n\n  return delayedStream;\n};\n\nObject.defineProperty(DelayedStream.prototype, 'readable', {\n  configurable: true,\n  enumerable: true,\n  get: function() {\n    return this.source.readable;\n  }\n});\n\nDelayedStream.prototype.setEncoding = function() {\n  return this.source.setEncoding.apply(this.source, arguments);\n};\n\nDelayedStream.prototype.resume = function() {\n  if (!this._released) {\n    this.release();\n  }\n\n  this.source.resume();\n};\n\nDelayedStream.prototype.pause = function() {\n  this.source.pause();\n};\n\nDelayedStream.prototype.release = function() {\n  this._released = true;\n\n  this._bufferedEvents.forEach(function(args) {\n    this.emit.apply(this, args);\n  }.bind(this));\n  this._bufferedEvents = [];\n};\n\nDelayedStream.prototype.pipe = function() {\n  var r = Stream.prototype.pipe.apply(this, arguments);\n  this.resume();\n  return r;\n};\n\nDelayedStream.prototype._handleEmit = function(args) {\n  if (this._released) {\n    this.emit.apply(this, args);\n    return;\n  }\n\n  if (args[0] === 'data') {\n    this.dataSize += args[1].length;\n    this._checkIfMaxDataSizeExceeded();\n  }\n\n  this._bufferedEvents.push(args);\n};\n\nDelayedStream.prototype._checkIfMaxDataSizeExceeded = function() {\n  if (this._maxDataSizeExceeded) {\n    return;\n  }\n\n  if (this.dataSize <= this.maxDataSize) {\n    return;\n  }\n\n  this._maxDataSizeExceeded = true;\n  var message =\n    'DelayedStream#maxDataSize of ' + this.maxDataSize + ' bytes exceeded.'\n  this.emit('error', new Error(message));\n};\n","module.exports = require(\"http\");","'use strict';\n\n/** @type {import('./Reflect.getPrototypeOf')} */\nmodule.exports = (typeof Reflect !== 'undefined' && Reflect.getPrototypeOf) || null;\n","var iterate    = require('./lib/iterate.js')\n  , initState  = require('./lib/state.js')\n  , terminator = require('./lib/terminator.js')\n  ;\n\n// Public API\nmodule.exports = parallel;\n\n/**\n * Runs iterator over provided array elements in parallel\n *\n * @param   {array|object} list - array or object (named list) to iterate over\n * @param   {function} iterator - iterator to run\n * @param   {function} callback - invoked when all elements processed\n * @returns {function} - jobs terminator\n */\nfunction parallel(list, iterator, callback)\n{\n  var state = initState(list);\n\n  while (state.index < (state['keyedList'] || list).length)\n  {\n    iterate(list, iterator, state, function(error, result)\n    {\n      if (error)\n      {\n        callback(error, result);\n        return;\n      }\n\n      // looks like it's the last one\n      if (Object.keys(state.jobs).length === 0)\n      {\n        callback(null, state.results);\n        return;\n      }\n    });\n\n    state.index++;\n  }\n\n  return terminator.bind(state, callback);\n}\n","'use strict';\n\n/** @type {import('./floor')} */\nmodule.exports = Math.floor;\n","module.exports = require(\"util\");","'use strict';\n\nvar hasSymbols = require('has-symbols/shams');\n\n/** @type {import('.')} */\nmodule.exports = function hasToStringTagShams() {\n\treturn hasSymbols() && !!Symbol.toStringTag;\n};\n","'use strict';\n\n/** @type {import('./range')} */\nmodule.exports = RangeError;\n","/*! Axios v1.13.2 Copyright (c) 2025 Matt Zabriskie and contributors */\n'use strict';\n\nconst FormData$1 = require('form-data');\nconst crypto = require('crypto');\nconst url = require('url');\nconst proxyFromEnv = require('proxy-from-env');\nconst http = require('http');\nconst https = require('https');\nconst http2 = require('http2');\nconst util = require('util');\nconst followRedirects = require('follow-redirects');\nconst zlib = require('zlib');\nconst stream = require('stream');\nconst events = require('events');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nconst FormData__default = /*#__PURE__*/_interopDefaultLegacy(FormData$1);\nconst crypto__default = /*#__PURE__*/_interopDefaultLegacy(crypto);\nconst url__default = /*#__PURE__*/_interopDefaultLegacy(url);\nconst proxyFromEnv__default = /*#__PURE__*/_interopDefaultLegacy(proxyFromEnv);\nconst http__default = /*#__PURE__*/_interopDefaultLegacy(http);\nconst https__default = /*#__PURE__*/_interopDefaultLegacy(https);\nconst http2__default = /*#__PURE__*/_interopDefaultLegacy(http2);\nconst util__default = /*#__PURE__*/_interopDefaultLegacy(util);\nconst followRedirects__default = /*#__PURE__*/_interopDefaultLegacy(followRedirects);\nconst zlib__default = /*#__PURE__*/_interopDefaultLegacy(zlib);\nconst stream__default = /*#__PURE__*/_interopDefaultLegacy(stream);\n\n/**\n * Create a bound version of a function with a specified `this` context\n *\n * @param {Function} fn - The function to bind\n * @param {*} thisArg - The value to be passed as the `this` parameter\n * @returns {Function} A new function that will call the original function with the specified `this` context\n */\nfunction bind(fn, thisArg) {\n  return function wrap() {\n    return fn.apply(thisArg, arguments);\n  };\n}\n\n// utils is a library of generic helper functions non-specific to axios\n\nconst {toString} = Object.prototype;\nconst {getPrototypeOf} = Object;\nconst {iterator, toStringTag} = Symbol;\n\nconst kindOf = (cache => thing => {\n    const str = toString.call(thing);\n    return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());\n})(Object.create(null));\n\nconst kindOfTest = (type) => {\n  type = type.toLowerCase();\n  return (thing) => kindOf(thing) === type\n};\n\nconst typeOfTest = type => thing => typeof thing === type;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n *\n * @returns {boolean} True if value is an Array, otherwise false\n */\nconst {isArray} = Array;\n\n/**\n * Determine if a value is undefined\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nconst isUndefined = typeOfTest('undefined');\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && isFunction$1(val.constructor.isBuffer) && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nconst isArrayBuffer = kindOfTest('ArrayBuffer');\n\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  let result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (isArrayBuffer(val.buffer));\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a String, otherwise false\n */\nconst isString = typeOfTest('string');\n\n/**\n * Determine if a value is a Function\n *\n * @param {*} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nconst isFunction$1 = typeOfTest('function');\n\n/**\n * Determine if a value is a Number\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Number, otherwise false\n */\nconst isNumber = typeOfTest('number');\n\n/**\n * Determine if a value is an Object\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an Object, otherwise false\n */\nconst isObject = (thing) => thing !== null && typeof thing === 'object';\n\n/**\n * Determine if a value is a Boolean\n *\n * @param {*} thing The value to test\n * @returns {boolean} True if value is a Boolean, otherwise false\n */\nconst isBoolean = thing => thing === true || thing === false;\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a plain Object, otherwise false\n */\nconst isPlainObject = (val) => {\n  if (kindOf(val) !== 'object') {\n    return false;\n  }\n\n  const prototype = getPrototypeOf(val);\n  return (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(toStringTag in val) && !(iterator in val);\n};\n\n/**\n * Determine if a value is an empty object (safely handles Buffers)\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an empty object, otherwise false\n */\nconst isEmptyObject = (val) => {\n  // Early return for non-objects or Buffers to prevent RangeError\n  if (!isObject(val) || isBuffer(val)) {\n    return false;\n  }\n\n  try {\n    return Object.keys(val).length === 0 && Object.getPrototypeOf(val) === Object.prototype;\n  } catch (e) {\n    // Fallback for any other objects that might cause RangeError with Object.keys()\n    return false;\n  }\n};\n\n/**\n * Determine if a value is a Date\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Date, otherwise false\n */\nconst isDate = kindOfTest('Date');\n\n/**\n * Determine if a value is a File\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFile = kindOfTest('File');\n\n/**\n * Determine if a value is a Blob\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nconst isBlob = kindOfTest('Blob');\n\n/**\n * Determine if a value is a FileList\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFileList = kindOfTest('FileList');\n\n/**\n * Determine if a value is a Stream\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nconst isStream = (val) => isObject(val) && isFunction$1(val.pipe);\n\n/**\n * Determine if a value is a FormData\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nconst isFormData = (thing) => {\n  let kind;\n  return thing && (\n    (typeof FormData === 'function' && thing instanceof FormData) || (\n      isFunction$1(thing.append) && (\n        (kind = kindOf(thing)) === 'formdata' ||\n        // detect form-data instance\n        (kind === 'object' && isFunction$1(thing.toString) && thing.toString() === '[object FormData]')\n      )\n    )\n  )\n};\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nconst isURLSearchParams = kindOfTest('URLSearchParams');\n\nconst [isReadableStream, isRequest, isResponse, isHeaders] = ['ReadableStream', 'Request', 'Response', 'Headers'].map(kindOfTest);\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n *\n * @returns {String} The String freed of excess whitespace\n */\nconst trim = (str) => str.trim ?\n  str.trim() : str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n *\n * @param {Boolean} [allOwnKeys = false]\n * @returns {any}\n */\nfunction forEach(obj, fn, {allOwnKeys = false} = {}) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  let i;\n  let l;\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Buffer check\n    if (isBuffer(obj)) {\n      return;\n    }\n\n    // Iterate over object keys\n    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);\n    const len = keys.length;\n    let key;\n\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      fn.call(null, obj[key], key, obj);\n    }\n  }\n}\n\nfunction findKey(obj, key) {\n  if (isBuffer(obj)){\n    return null;\n  }\n\n  key = key.toLowerCase();\n  const keys = Object.keys(obj);\n  let i = keys.length;\n  let _key;\n  while (i-- > 0) {\n    _key = keys[i];\n    if (key === _key.toLowerCase()) {\n      return _key;\n    }\n  }\n  return null;\n}\n\nconst _global = (() => {\n  /*eslint no-undef:0*/\n  if (typeof globalThis !== \"undefined\") return globalThis;\n  return typeof self !== \"undefined\" ? self : (typeof window !== 'undefined' ? window : global)\n})();\n\nconst isContextDefined = (context) => !isUndefined(context) && context !== _global;\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n *\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  const {caseless, skipUndefined} = isContextDefined(this) && this || {};\n  const result = {};\n  const assignValue = (val, key) => {\n    const targetKey = caseless && findKey(result, key) || key;\n    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {\n      result[targetKey] = merge(result[targetKey], val);\n    } else if (isPlainObject(val)) {\n      result[targetKey] = merge({}, val);\n    } else if (isArray(val)) {\n      result[targetKey] = val.slice();\n    } else if (!skipUndefined || !isUndefined(val)) {\n      result[targetKey] = val;\n    }\n  };\n\n  for (let i = 0, l = arguments.length; i < l; i++) {\n    arguments[i] && forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n *\n * @param {Boolean} [allOwnKeys]\n * @returns {Object} The resulting value of object a\n */\nconst extend = (a, b, thisArg, {allOwnKeys}= {}) => {\n  forEach(b, (val, key) => {\n    if (thisArg && isFunction$1(val)) {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  }, {allOwnKeys});\n  return a;\n};\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n *\n * @returns {string} content value without BOM\n */\nconst stripBOM = (content) => {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n};\n\n/**\n * Inherit the prototype methods from one constructor into another\n * @param {function} constructor\n * @param {function} superConstructor\n * @param {object} [props]\n * @param {object} [descriptors]\n *\n * @returns {void}\n */\nconst inherits = (constructor, superConstructor, props, descriptors) => {\n  constructor.prototype = Object.create(superConstructor.prototype, descriptors);\n  constructor.prototype.constructor = constructor;\n  Object.defineProperty(constructor, 'super', {\n    value: superConstructor.prototype\n  });\n  props && Object.assign(constructor.prototype, props);\n};\n\n/**\n * Resolve object with deep prototype chain to a flat object\n * @param {Object} sourceObj source object\n * @param {Object} [destObj]\n * @param {Function|Boolean} [filter]\n * @param {Function} [propFilter]\n *\n * @returns {Object}\n */\nconst toFlatObject = (sourceObj, destObj, filter, propFilter) => {\n  let props;\n  let i;\n  let prop;\n  const merged = {};\n\n  destObj = destObj || {};\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  if (sourceObj == null) return destObj;\n\n  do {\n    props = Object.getOwnPropertyNames(sourceObj);\n    i = props.length;\n    while (i-- > 0) {\n      prop = props[i];\n      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {\n        destObj[prop] = sourceObj[prop];\n        merged[prop] = true;\n      }\n    }\n    sourceObj = filter !== false && getPrototypeOf(sourceObj);\n  } while (sourceObj && (!filter || filter(sourceObj, destObj)) && sourceObj !== Object.prototype);\n\n  return destObj;\n};\n\n/**\n * Determines whether a string ends with the characters of a specified string\n *\n * @param {String} str\n * @param {String} searchString\n * @param {Number} [position= 0]\n *\n * @returns {boolean}\n */\nconst endsWith = (str, searchString, position) => {\n  str = String(str);\n  if (position === undefined || position > str.length) {\n    position = str.length;\n  }\n  position -= searchString.length;\n  const lastIndex = str.indexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n};\n\n\n/**\n * Returns new array from array like object or null if failed\n *\n * @param {*} [thing]\n *\n * @returns {?Array}\n */\nconst toArray = (thing) => {\n  if (!thing) return null;\n  if (isArray(thing)) return thing;\n  let i = thing.length;\n  if (!isNumber(i)) return null;\n  const arr = new Array(i);\n  while (i-- > 0) {\n    arr[i] = thing[i];\n  }\n  return arr;\n};\n\n/**\n * Checking if the Uint8Array exists and if it does, it returns a function that checks if the\n * thing passed in is an instance of Uint8Array\n *\n * @param {TypedArray}\n *\n * @returns {Array}\n */\n// eslint-disable-next-line func-names\nconst isTypedArray = (TypedArray => {\n  // eslint-disable-next-line func-names\n  return thing => {\n    return TypedArray && thing instanceof TypedArray;\n  };\n})(typeof Uint8Array !== 'undefined' && getPrototypeOf(Uint8Array));\n\n/**\n * For each entry in the object, call the function with the key and value.\n *\n * @param {Object<any, any>} obj - The object to iterate over.\n * @param {Function} fn - The function to call for each entry.\n *\n * @returns {void}\n */\nconst forEachEntry = (obj, fn) => {\n  const generator = obj && obj[iterator];\n\n  const _iterator = generator.call(obj);\n\n  let result;\n\n  while ((result = _iterator.next()) && !result.done) {\n    const pair = result.value;\n    fn.call(obj, pair[0], pair[1]);\n  }\n};\n\n/**\n * It takes a regular expression and a string, and returns an array of all the matches\n *\n * @param {string} regExp - The regular expression to match against.\n * @param {string} str - The string to search.\n *\n * @returns {Array<boolean>}\n */\nconst matchAll = (regExp, str) => {\n  let matches;\n  const arr = [];\n\n  while ((matches = regExp.exec(str)) !== null) {\n    arr.push(matches);\n  }\n\n  return arr;\n};\n\n/* Checking if the kindOfTest function returns true when passed an HTMLFormElement. */\nconst isHTMLForm = kindOfTest('HTMLFormElement');\n\nconst toCamelCase = str => {\n  return str.toLowerCase().replace(/[-_\\s]([a-z\\d])(\\w*)/g,\n    function replacer(m, p1, p2) {\n      return p1.toUpperCase() + p2;\n    }\n  );\n};\n\n/* Creating a function that will check if an object has a property. */\nconst hasOwnProperty = (({hasOwnProperty}) => (obj, prop) => hasOwnProperty.call(obj, prop))(Object.prototype);\n\n/**\n * Determine if a value is a RegExp object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a RegExp object, otherwise false\n */\nconst isRegExp = kindOfTest('RegExp');\n\nconst reduceDescriptors = (obj, reducer) => {\n  const descriptors = Object.getOwnPropertyDescriptors(obj);\n  const reducedDescriptors = {};\n\n  forEach(descriptors, (descriptor, name) => {\n    let ret;\n    if ((ret = reducer(descriptor, name, obj)) !== false) {\n      reducedDescriptors[name] = ret || descriptor;\n    }\n  });\n\n  Object.defineProperties(obj, reducedDescriptors);\n};\n\n/**\n * Makes all methods read-only\n * @param {Object} obj\n */\n\nconst freezeMethods = (obj) => {\n  reduceDescriptors(obj, (descriptor, name) => {\n    // skip restricted props in strict mode\n    if (isFunction$1(obj) && ['arguments', 'caller', 'callee'].indexOf(name) !== -1) {\n      return false;\n    }\n\n    const value = obj[name];\n\n    if (!isFunction$1(value)) return;\n\n    descriptor.enumerable = false;\n\n    if ('writable' in descriptor) {\n      descriptor.writable = false;\n      return;\n    }\n\n    if (!descriptor.set) {\n      descriptor.set = () => {\n        throw Error('Can not rewrite read-only method \\'' + name + '\\'');\n      };\n    }\n  });\n};\n\nconst toObjectSet = (arrayOrString, delimiter) => {\n  const obj = {};\n\n  const define = (arr) => {\n    arr.forEach(value => {\n      obj[value] = true;\n    });\n  };\n\n  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));\n\n  return obj;\n};\n\nconst noop = () => {};\n\nconst toFiniteNumber = (value, defaultValue) => {\n  return value != null && Number.isFinite(value = +value) ? value : defaultValue;\n};\n\n\n\n/**\n * If the thing is a FormData object, return true, otherwise return false.\n *\n * @param {unknown} thing - The thing to check.\n *\n * @returns {boolean}\n */\nfunction isSpecCompliantForm(thing) {\n  return !!(thing && isFunction$1(thing.append) && thing[toStringTag] === 'FormData' && thing[iterator]);\n}\n\nconst toJSONObject = (obj) => {\n  const stack = new Array(10);\n\n  const visit = (source, i) => {\n\n    if (isObject(source)) {\n      if (stack.indexOf(source) >= 0) {\n        return;\n      }\n\n      //Buffer check\n      if (isBuffer(source)) {\n        return source;\n      }\n\n      if(!('toJSON' in source)) {\n        stack[i] = source;\n        const target = isArray(source) ? [] : {};\n\n        forEach(source, (value, key) => {\n          const reducedValue = visit(value, i + 1);\n          !isUndefined(reducedValue) && (target[key] = reducedValue);\n        });\n\n        stack[i] = undefined;\n\n        return target;\n      }\n    }\n\n    return source;\n  };\n\n  return visit(obj, 0);\n};\n\nconst isAsyncFn = kindOfTest('AsyncFunction');\n\nconst isThenable = (thing) =>\n  thing && (isObject(thing) || isFunction$1(thing)) && isFunction$1(thing.then) && isFunction$1(thing.catch);\n\n// original code\n// https://github.com/DigitalBrainJS/AxiosPromise/blob/16deab13710ec09779922131f3fa5954320f83ab/lib/utils.js#L11-L34\n\nconst _setImmediate = ((setImmediateSupported, postMessageSupported) => {\n  if (setImmediateSupported) {\n    return setImmediate;\n  }\n\n  return postMessageSupported ? ((token, callbacks) => {\n    _global.addEventListener(\"message\", ({source, data}) => {\n      if (source === _global && data === token) {\n        callbacks.length && callbacks.shift()();\n      }\n    }, false);\n\n    return (cb) => {\n      callbacks.push(cb);\n      _global.postMessage(token, \"*\");\n    }\n  })(`axios@${Math.random()}`, []) : (cb) => setTimeout(cb);\n})(\n  typeof setImmediate === 'function',\n  isFunction$1(_global.postMessage)\n);\n\nconst asap = typeof queueMicrotask !== 'undefined' ?\n  queueMicrotask.bind(_global) : ( typeof process !== 'undefined' && process.nextTick || _setImmediate);\n\n// *********************\n\n\nconst isIterable = (thing) => thing != null && isFunction$1(thing[iterator]);\n\n\nconst utils$1 = {\n  isArray,\n  isArrayBuffer,\n  isBuffer,\n  isFormData,\n  isArrayBufferView,\n  isString,\n  isNumber,\n  isBoolean,\n  isObject,\n  isPlainObject,\n  isEmptyObject,\n  isReadableStream,\n  isRequest,\n  isResponse,\n  isHeaders,\n  isUndefined,\n  isDate,\n  isFile,\n  isBlob,\n  isRegExp,\n  isFunction: isFunction$1,\n  isStream,\n  isURLSearchParams,\n  isTypedArray,\n  isFileList,\n  forEach,\n  merge,\n  extend,\n  trim,\n  stripBOM,\n  inherits,\n  toFlatObject,\n  kindOf,\n  kindOfTest,\n  endsWith,\n  toArray,\n  forEachEntry,\n  matchAll,\n  isHTMLForm,\n  hasOwnProperty,\n  hasOwnProp: hasOwnProperty, // an alias to avoid ESLint no-prototype-builtins detection\n  reduceDescriptors,\n  freezeMethods,\n  toObjectSet,\n  toCamelCase,\n  noop,\n  toFiniteNumber,\n  findKey,\n  global: _global,\n  isContextDefined,\n  isSpecCompliantForm,\n  toJSONObject,\n  isAsyncFn,\n  isThenable,\n  setImmediate: _setImmediate,\n  asap,\n  isIterable\n};\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [config] The config.\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n *\n * @returns {Error} The created error.\n */\nfunction AxiosError(message, code, config, request, response) {\n  Error.call(this);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n\n  this.message = message;\n  this.name = 'AxiosError';\n  code && (this.code = code);\n  config && (this.config = config);\n  request && (this.request = request);\n  if (response) {\n    this.response = response;\n    this.status = response.status ? response.status : null;\n  }\n}\n\nutils$1.inherits(AxiosError, Error, {\n  toJSON: function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: utils$1.toJSONObject(this.config),\n      code: this.code,\n      status: this.status\n    };\n  }\n});\n\nconst prototype$1 = AxiosError.prototype;\nconst descriptors = {};\n\n[\n  'ERR_BAD_OPTION_VALUE',\n  'ERR_BAD_OPTION',\n  'ECONNABORTED',\n  'ETIMEDOUT',\n  'ERR_NETWORK',\n  'ERR_FR_TOO_MANY_REDIRECTS',\n  'ERR_DEPRECATED',\n  'ERR_BAD_RESPONSE',\n  'ERR_BAD_REQUEST',\n  'ERR_CANCELED',\n  'ERR_NOT_SUPPORT',\n  'ERR_INVALID_URL'\n// eslint-disable-next-line func-names\n].forEach(code => {\n  descriptors[code] = {value: code};\n});\n\nObject.defineProperties(AxiosError, descriptors);\nObject.defineProperty(prototype$1, 'isAxiosError', {value: true});\n\n// eslint-disable-next-line func-names\nAxiosError.from = (error, code, config, request, response, customProps) => {\n  const axiosError = Object.create(prototype$1);\n\n  utils$1.toFlatObject(error, axiosError, function filter(obj) {\n    return obj !== Error.prototype;\n  }, prop => {\n    return prop !== 'isAxiosError';\n  });\n\n  const msg = error && error.message ? error.message : 'Error';\n\n  // Prefer explicit code; otherwise copy the low-level error's code (e.g. ECONNREFUSED)\n  const errCode = code == null && error ? error.code : code;\n  AxiosError.call(axiosError, msg, errCode, config, request, response);\n\n  // Chain the original error on the standard field; non-enumerable to avoid JSON noise\n  if (error && axiosError.cause == null) {\n    Object.defineProperty(axiosError, 'cause', { value: error, configurable: true });\n  }\n\n  axiosError.name = (error && error.name) || 'Error';\n\n  customProps && Object.assign(axiosError, customProps);\n\n  return axiosError;\n};\n\n/**\n * Determines if the given thing is a array or js object.\n *\n * @param {string} thing - The object or array to be visited.\n *\n * @returns {boolean}\n */\nfunction isVisitable(thing) {\n  return utils$1.isPlainObject(thing) || utils$1.isArray(thing);\n}\n\n/**\n * It removes the brackets from the end of a string\n *\n * @param {string} key - The key of the parameter.\n *\n * @returns {string} the key without the brackets.\n */\nfunction removeBrackets(key) {\n  return utils$1.endsWith(key, '[]') ? key.slice(0, -2) : key;\n}\n\n/**\n * It takes a path, a key, and a boolean, and returns a string\n *\n * @param {string} path - The path to the current key.\n * @param {string} key - The key of the current object being iterated over.\n * @param {string} dots - If true, the key will be rendered with dots instead of brackets.\n *\n * @returns {string} The path to the current key.\n */\nfunction renderKey(path, key, dots) {\n  if (!path) return key;\n  return path.concat(key).map(function each(token, i) {\n    // eslint-disable-next-line no-param-reassign\n    token = removeBrackets(token);\n    return !dots && i ? '[' + token + ']' : token;\n  }).join(dots ? '.' : '');\n}\n\n/**\n * If the array is an array and none of its elements are visitable, then it's a flat array.\n *\n * @param {Array<any>} arr - The array to check\n *\n * @returns {boolean}\n */\nfunction isFlatArray(arr) {\n  return utils$1.isArray(arr) && !arr.some(isVisitable);\n}\n\nconst predicates = utils$1.toFlatObject(utils$1, {}, null, function filter(prop) {\n  return /^is[A-Z]/.test(prop);\n});\n\n/**\n * Convert a data object to FormData\n *\n * @param {Object} obj\n * @param {?Object} [formData]\n * @param {?Object} [options]\n * @param {Function} [options.visitor]\n * @param {Boolean} [options.metaTokens = true]\n * @param {Boolean} [options.dots = false]\n * @param {?Boolean} [options.indexes = false]\n *\n * @returns {Object}\n **/\n\n/**\n * It converts an object into a FormData object\n *\n * @param {Object<any, any>} obj - The object to convert to form data.\n * @param {string} formData - The FormData object to append to.\n * @param {Object<string, any>} options\n *\n * @returns\n */\nfunction toFormData(obj, formData, options) {\n  if (!utils$1.isObject(obj)) {\n    throw new TypeError('target must be an object');\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  formData = formData || new (FormData__default[\"default\"] || FormData)();\n\n  // eslint-disable-next-line no-param-reassign\n  options = utils$1.toFlatObject(options, {\n    metaTokens: true,\n    dots: false,\n    indexes: false\n  }, false, function defined(option, source) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    return !utils$1.isUndefined(source[option]);\n  });\n\n  const metaTokens = options.metaTokens;\n  // eslint-disable-next-line no-use-before-define\n  const visitor = options.visitor || defaultVisitor;\n  const dots = options.dots;\n  const indexes = options.indexes;\n  const _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n  const useBlob = _Blob && utils$1.isSpecCompliantForm(formData);\n\n  if (!utils$1.isFunction(visitor)) {\n    throw new TypeError('visitor must be a function');\n  }\n\n  function convertValue(value) {\n    if (value === null) return '';\n\n    if (utils$1.isDate(value)) {\n      return value.toISOString();\n    }\n\n    if (utils$1.isBoolean(value)) {\n      return value.toString();\n    }\n\n    if (!useBlob && utils$1.isBlob(value)) {\n      throw new AxiosError('Blob is not supported. Use a Buffer instead.');\n    }\n\n    if (utils$1.isArrayBuffer(value) || utils$1.isTypedArray(value)) {\n      return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n    }\n\n    return value;\n  }\n\n  /**\n   * Default visitor.\n   *\n   * @param {*} value\n   * @param {String|Number} key\n   * @param {Array<String|Number>} path\n   * @this {FormData}\n   *\n   * @returns {boolean} return true to visit the each prop of the value recursively\n   */\n  function defaultVisitor(value, key, path) {\n    let arr = value;\n\n    if (value && !path && typeof value === 'object') {\n      if (utils$1.endsWith(key, '{}')) {\n        // eslint-disable-next-line no-param-reassign\n        key = metaTokens ? key : key.slice(0, -2);\n        // eslint-disable-next-line no-param-reassign\n        value = JSON.stringify(value);\n      } else if (\n        (utils$1.isArray(value) && isFlatArray(value)) ||\n        ((utils$1.isFileList(value) || utils$1.endsWith(key, '[]')) && (arr = utils$1.toArray(value))\n        )) {\n        // eslint-disable-next-line no-param-reassign\n        key = removeBrackets(key);\n\n        arr.forEach(function each(el, index) {\n          !(utils$1.isUndefined(el) || el === null) && formData.append(\n            // eslint-disable-next-line no-nested-ternary\n            indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n            convertValue(el)\n          );\n        });\n        return false;\n      }\n    }\n\n    if (isVisitable(value)) {\n      return true;\n    }\n\n    formData.append(renderKey(path, key, dots), convertValue(value));\n\n    return false;\n  }\n\n  const stack = [];\n\n  const exposedHelpers = Object.assign(predicates, {\n    defaultVisitor,\n    convertValue,\n    isVisitable\n  });\n\n  function build(value, path) {\n    if (utils$1.isUndefined(value)) return;\n\n    if (stack.indexOf(value) !== -1) {\n      throw Error('Circular reference detected in ' + path.join('.'));\n    }\n\n    stack.push(value);\n\n    utils$1.forEach(value, function each(el, key) {\n      const result = !(utils$1.isUndefined(el) || el === null) && visitor.call(\n        formData, el, utils$1.isString(key) ? key.trim() : key, path, exposedHelpers\n      );\n\n      if (result === true) {\n        build(el, path ? path.concat(key) : [key]);\n      }\n    });\n\n    stack.pop();\n  }\n\n  if (!utils$1.isObject(obj)) {\n    throw new TypeError('data must be an object');\n  }\n\n  build(obj);\n\n  return formData;\n}\n\n/**\n * It encodes a string by replacing all characters that are not in the unreserved set with\n * their percent-encoded equivalents\n *\n * @param {string} str - The string to encode.\n *\n * @returns {string} The encoded string.\n */\nfunction encode$1(str) {\n  const charMap = {\n    '!': '%21',\n    \"'\": '%27',\n    '(': '%28',\n    ')': '%29',\n    '~': '%7E',\n    '%20': '+',\n    '%00': '\\x00'\n  };\n  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {\n    return charMap[match];\n  });\n}\n\n/**\n * It takes a params object and converts it to a FormData object\n *\n * @param {Object<string, any>} params - The parameters to be converted to a FormData object.\n * @param {Object<string, any>} options - The options object passed to the Axios constructor.\n *\n * @returns {void}\n */\nfunction AxiosURLSearchParams(params, options) {\n  this._pairs = [];\n\n  params && toFormData(params, this, options);\n}\n\nconst prototype = AxiosURLSearchParams.prototype;\n\nprototype.append = function append(name, value) {\n  this._pairs.push([name, value]);\n};\n\nprototype.toString = function toString(encoder) {\n  const _encode = encoder ? function(value) {\n    return encoder.call(this, value, encode$1);\n  } : encode$1;\n\n  return this._pairs.map(function each(pair) {\n    return _encode(pair[0]) + '=' + _encode(pair[1]);\n  }, '').join('&');\n};\n\n/**\n * It replaces all instances of the characters `:`, `$`, `,`, `+`, `[`, and `]` with their\n * URI encoded counterparts\n *\n * @param {string} val The value to be encoded.\n *\n * @returns {string} The encoded value.\n */\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @param {?(object|Function)} options\n *\n * @returns {string} The formatted url\n */\nfunction buildURL(url, params, options) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n  \n  const _encode = options && options.encode || encode;\n\n  if (utils$1.isFunction(options)) {\n    options = {\n      serialize: options\n    };\n  } \n\n  const serializeFn = options && options.serialize;\n\n  let serializedParams;\n\n  if (serializeFn) {\n    serializedParams = serializeFn(params, options);\n  } else {\n    serializedParams = utils$1.isURLSearchParams(params) ?\n      params.toString() :\n      new AxiosURLSearchParams(params, options).toString(_encode);\n  }\n\n  if (serializedParams) {\n    const hashmarkIndex = url.indexOf(\"#\");\n\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n}\n\nclass InterceptorManager {\n  constructor() {\n    this.handlers = [];\n  }\n\n  /**\n   * Add a new interceptor to the stack\n   *\n   * @param {Function} fulfilled The function to handle `then` for a `Promise`\n   * @param {Function} rejected The function to handle `reject` for a `Promise`\n   *\n   * @return {Number} An ID used to remove interceptor later\n   */\n  use(fulfilled, rejected, options) {\n    this.handlers.push({\n      fulfilled,\n      rejected,\n      synchronous: options ? options.synchronous : false,\n      runWhen: options ? options.runWhen : null\n    });\n    return this.handlers.length - 1;\n  }\n\n  /**\n   * Remove an interceptor from the stack\n   *\n   * @param {Number} id The ID that was returned by `use`\n   *\n   * @returns {void}\n   */\n  eject(id) {\n    if (this.handlers[id]) {\n      this.handlers[id] = null;\n    }\n  }\n\n  /**\n   * Clear all interceptors from the stack\n   *\n   * @returns {void}\n   */\n  clear() {\n    if (this.handlers) {\n      this.handlers = [];\n    }\n  }\n\n  /**\n   * Iterate over all the registered interceptors\n   *\n   * This method is particularly useful for skipping over any\n   * interceptors that may have become `null` calling `eject`.\n   *\n   * @param {Function} fn The function to call for each interceptor\n   *\n   * @returns {void}\n   */\n  forEach(fn) {\n    utils$1.forEach(this.handlers, function forEachHandler(h) {\n      if (h !== null) {\n        fn(h);\n      }\n    });\n  }\n}\n\nconst InterceptorManager$1 = InterceptorManager;\n\nconst transitionalDefaults = {\n  silentJSONParsing: true,\n  forcedJSONParsing: true,\n  clarifyTimeoutError: false\n};\n\nconst URLSearchParams = url__default[\"default\"].URLSearchParams;\n\nconst ALPHA = 'abcdefghijklmnopqrstuvwxyz';\n\nconst DIGIT = '0123456789';\n\nconst ALPHABET = {\n  DIGIT,\n  ALPHA,\n  ALPHA_DIGIT: ALPHA + ALPHA.toUpperCase() + DIGIT\n};\n\nconst generateString = (size = 16, alphabet = ALPHABET.ALPHA_DIGIT) => {\n  let str = '';\n  const {length} = alphabet;\n  const randomValues = new Uint32Array(size);\n  crypto__default[\"default\"].randomFillSync(randomValues);\n  for (let i = 0; i < size; i++) {\n    str += alphabet[randomValues[i] % length];\n  }\n\n  return str;\n};\n\n\nconst platform$1 = {\n  isNode: true,\n  classes: {\n    URLSearchParams,\n    FormData: FormData__default[\"default\"],\n    Blob: typeof Blob !== 'undefined' && Blob || null\n  },\n  ALPHABET,\n  generateString,\n  protocols: [ 'http', 'https', 'file', 'data' ]\n};\n\nconst hasBrowserEnv = typeof window !== 'undefined' && typeof document !== 'undefined';\n\nconst _navigator = typeof navigator === 'object' && navigator || undefined;\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n *\n * @returns {boolean}\n */\nconst hasStandardBrowserEnv = hasBrowserEnv &&\n  (!_navigator || ['ReactNative', 'NativeScript', 'NS'].indexOf(_navigator.product) < 0);\n\n/**\n * Determine if we're running in a standard browser webWorker environment\n *\n * Although the `isStandardBrowserEnv` method indicates that\n * `allows axios to run in a web worker`, the WebWorker will still be\n * filtered out due to its judgment standard\n * `typeof window !== 'undefined' && typeof document !== 'undefined'`.\n * This leads to a problem when axios post `FormData` in webWorker\n */\nconst hasStandardBrowserWebWorkerEnv = (() => {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    // eslint-disable-next-line no-undef\n    self instanceof WorkerGlobalScope &&\n    typeof self.importScripts === 'function'\n  );\n})();\n\nconst origin = hasBrowserEnv && window.location.href || 'http://localhost';\n\nconst utils = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  hasBrowserEnv: hasBrowserEnv,\n  hasStandardBrowserWebWorkerEnv: hasStandardBrowserWebWorkerEnv,\n  hasStandardBrowserEnv: hasStandardBrowserEnv,\n  navigator: _navigator,\n  origin: origin\n});\n\nconst platform = {\n  ...utils,\n  ...platform$1\n};\n\nfunction toURLEncodedForm(data, options) {\n  return toFormData(data, new platform.classes.URLSearchParams(), {\n    visitor: function(value, key, path, helpers) {\n      if (platform.isNode && utils$1.isBuffer(value)) {\n        this.append(key, value.toString('base64'));\n        return false;\n      }\n\n      return helpers.defaultVisitor.apply(this, arguments);\n    },\n    ...options\n  });\n}\n\n/**\n * It takes a string like `foo[x][y][z]` and returns an array like `['foo', 'x', 'y', 'z']\n *\n * @param {string} name - The name of the property to get.\n *\n * @returns An array of strings.\n */\nfunction parsePropPath(name) {\n  // foo[x][y][z]\n  // foo.x.y.z\n  // foo-x-y-z\n  // foo x y z\n  return utils$1.matchAll(/\\w+|\\[(\\w*)]/g, name).map(match => {\n    return match[0] === '[]' ? '' : match[1] || match[0];\n  });\n}\n\n/**\n * Convert an array to an object.\n *\n * @param {Array<any>} arr - The array to convert to an object.\n *\n * @returns An object with the same keys and values as the array.\n */\nfunction arrayToObject(arr) {\n  const obj = {};\n  const keys = Object.keys(arr);\n  let i;\n  const len = keys.length;\n  let key;\n  for (i = 0; i < len; i++) {\n    key = keys[i];\n    obj[key] = arr[key];\n  }\n  return obj;\n}\n\n/**\n * It takes a FormData object and returns a JavaScript object\n *\n * @param {string} formData The FormData object to convert to JSON.\n *\n * @returns {Object<string, any> | null} The converted object.\n */\nfunction formDataToJSON(formData) {\n  function buildPath(path, value, target, index) {\n    let name = path[index++];\n\n    if (name === '__proto__') return true;\n\n    const isNumericKey = Number.isFinite(+name);\n    const isLast = index >= path.length;\n    name = !name && utils$1.isArray(target) ? target.length : name;\n\n    if (isLast) {\n      if (utils$1.hasOwnProp(target, name)) {\n        target[name] = [target[name], value];\n      } else {\n        target[name] = value;\n      }\n\n      return !isNumericKey;\n    }\n\n    if (!target[name] || !utils$1.isObject(target[name])) {\n      target[name] = [];\n    }\n\n    const result = buildPath(path, value, target[name], index);\n\n    if (result && utils$1.isArray(target[name])) {\n      target[name] = arrayToObject(target[name]);\n    }\n\n    return !isNumericKey;\n  }\n\n  if (utils$1.isFormData(formData) && utils$1.isFunction(formData.entries)) {\n    const obj = {};\n\n    utils$1.forEachEntry(formData, (name, value) => {\n      buildPath(parsePropPath(name), value, obj, 0);\n    });\n\n    return obj;\n  }\n\n  return null;\n}\n\n/**\n * It takes a string, tries to parse it, and if it fails, it returns the stringified version\n * of the input\n *\n * @param {any} rawValue - The value to be stringified.\n * @param {Function} parser - A function that parses a string into a JavaScript object.\n * @param {Function} encoder - A function that takes a value and returns a string.\n *\n * @returns {string} A stringified version of the rawValue.\n */\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils$1.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils$1.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nconst defaults = {\n\n  transitional: transitionalDefaults,\n\n  adapter: ['xhr', 'http', 'fetch'],\n\n  transformRequest: [function transformRequest(data, headers) {\n    const contentType = headers.getContentType() || '';\n    const hasJSONContentType = contentType.indexOf('application/json') > -1;\n    const isObjectPayload = utils$1.isObject(data);\n\n    if (isObjectPayload && utils$1.isHTMLForm(data)) {\n      data = new FormData(data);\n    }\n\n    const isFormData = utils$1.isFormData(data);\n\n    if (isFormData) {\n      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;\n    }\n\n    if (utils$1.isArrayBuffer(data) ||\n      utils$1.isBuffer(data) ||\n      utils$1.isStream(data) ||\n      utils$1.isFile(data) ||\n      utils$1.isBlob(data) ||\n      utils$1.isReadableStream(data)\n    ) {\n      return data;\n    }\n    if (utils$1.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils$1.isURLSearchParams(data)) {\n      headers.setContentType('application/x-www-form-urlencoded;charset=utf-8', false);\n      return data.toString();\n    }\n\n    let isFileList;\n\n    if (isObjectPayload) {\n      if (contentType.indexOf('application/x-www-form-urlencoded') > -1) {\n        return toURLEncodedForm(data, this.formSerializer).toString();\n      }\n\n      if ((isFileList = utils$1.isFileList(data)) || contentType.indexOf('multipart/form-data') > -1) {\n        const _FormData = this.env && this.env.FormData;\n\n        return toFormData(\n          isFileList ? {'files[]': data} : data,\n          _FormData && new _FormData(),\n          this.formSerializer\n        );\n      }\n    }\n\n    if (isObjectPayload || hasJSONContentType ) {\n      headers.setContentType('application/json', false);\n      return stringifySafely(data);\n    }\n\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    const transitional = this.transitional || defaults.transitional;\n    const forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    const JSONRequested = this.responseType === 'json';\n\n    if (utils$1.isResponse(data) || utils$1.isReadableStream(data)) {\n      return data;\n    }\n\n    if (data && utils$1.isString(data) && ((forcedJSONParsing && !this.responseType) || JSONRequested)) {\n      const silentJSONParsing = transitional && transitional.silentJSONParsing;\n      const strictJSONParsing = !silentJSONParsing && JSONRequested;\n\n      try {\n        return JSON.parse(data, this.parseReviver);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  env: {\n    FormData: platform.classes.FormData,\n    Blob: platform.classes.Blob\n  },\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n\n  headers: {\n    common: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': undefined\n    }\n  }\n};\n\nutils$1.forEach(['delete', 'get', 'head', 'post', 'put', 'patch'], (method) => {\n  defaults.headers[method] = {};\n});\n\nconst defaults$1 = defaults;\n\n// RawAxiosHeaders whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nconst ignoreDuplicateOf = utils$1.toObjectSet([\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n]);\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} rawHeaders Headers needing to be parsed\n *\n * @returns {Object} Headers parsed into an object\n */\nconst parseHeaders = rawHeaders => {\n  const parsed = {};\n  let key;\n  let val;\n  let i;\n\n  rawHeaders && rawHeaders.split('\\n').forEach(function parser(line) {\n    i = line.indexOf(':');\n    key = line.substring(0, i).trim().toLowerCase();\n    val = line.substring(i + 1).trim();\n\n    if (!key || (parsed[key] && ignoreDuplicateOf[key])) {\n      return;\n    }\n\n    if (key === 'set-cookie') {\n      if (parsed[key]) {\n        parsed[key].push(val);\n      } else {\n        parsed[key] = [val];\n      }\n    } else {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n\nconst $internals = Symbol('internals');\n\nfunction normalizeHeader(header) {\n  return header && String(header).trim().toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (value === false || value == null) {\n    return value;\n  }\n\n  return utils$1.isArray(value) ? value.map(normalizeValue) : String(value);\n}\n\nfunction parseTokens(str) {\n  const tokens = Object.create(null);\n  const tokensRE = /([^\\s,;=]+)\\s*(?:=\\s*([^,;]+))?/g;\n  let match;\n\n  while ((match = tokensRE.exec(str))) {\n    tokens[match[1]] = match[2];\n  }\n\n  return tokens;\n}\n\nconst isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());\n\nfunction matchHeaderValue(context, value, header, filter, isHeaderNameFilter) {\n  if (utils$1.isFunction(filter)) {\n    return filter.call(this, value, header);\n  }\n\n  if (isHeaderNameFilter) {\n    value = header;\n  }\n\n  if (!utils$1.isString(value)) return;\n\n  if (utils$1.isString(filter)) {\n    return value.indexOf(filter) !== -1;\n  }\n\n  if (utils$1.isRegExp(filter)) {\n    return filter.test(value);\n  }\n}\n\nfunction formatHeader(header) {\n  return header.trim()\n    .toLowerCase().replace(/([a-z\\d])(\\w*)/g, (w, char, str) => {\n      return char.toUpperCase() + str;\n    });\n}\n\nfunction buildAccessors(obj, header) {\n  const accessorName = utils$1.toCamelCase(' ' + header);\n\n  ['get', 'set', 'has'].forEach(methodName => {\n    Object.defineProperty(obj, methodName + accessorName, {\n      value: function(arg1, arg2, arg3) {\n        return this[methodName].call(this, header, arg1, arg2, arg3);\n      },\n      configurable: true\n    });\n  });\n}\n\nclass AxiosHeaders {\n  constructor(headers) {\n    headers && this.set(headers);\n  }\n\n  set(header, valueOrRewrite, rewrite) {\n    const self = this;\n\n    function setHeader(_value, _header, _rewrite) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!lHeader) {\n        throw new Error('header name must be a non-empty string');\n      }\n\n      const key = utils$1.findKey(self, lHeader);\n\n      if(!key || self[key] === undefined || _rewrite === true || (_rewrite === undefined && self[key] !== false)) {\n        self[key || _header] = normalizeValue(_value);\n      }\n    }\n\n    const setHeaders = (headers, _rewrite) =>\n      utils$1.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));\n\n    if (utils$1.isPlainObject(header) || header instanceof this.constructor) {\n      setHeaders(header, valueOrRewrite);\n    } else if(utils$1.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {\n      setHeaders(parseHeaders(header), valueOrRewrite);\n    } else if (utils$1.isObject(header) && utils$1.isIterable(header)) {\n      let obj = {}, dest, key;\n      for (const entry of header) {\n        if (!utils$1.isArray(entry)) {\n          throw TypeError('Object iterator must return a key-value pair');\n        }\n\n        obj[key = entry[0]] = (dest = obj[key]) ?\n          (utils$1.isArray(dest) ? [...dest, entry[1]] : [dest, entry[1]]) : entry[1];\n      }\n\n      setHeaders(obj, valueOrRewrite);\n    } else {\n      header != null && setHeader(valueOrRewrite, header, rewrite);\n    }\n\n    return this;\n  }\n\n  get(header, parser) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils$1.findKey(this, header);\n\n      if (key) {\n        const value = this[key];\n\n        if (!parser) {\n          return value;\n        }\n\n        if (parser === true) {\n          return parseTokens(value);\n        }\n\n        if (utils$1.isFunction(parser)) {\n          return parser.call(this, value, key);\n        }\n\n        if (utils$1.isRegExp(parser)) {\n          return parser.exec(value);\n        }\n\n        throw new TypeError('parser must be boolean|regexp|function');\n      }\n    }\n  }\n\n  has(header, matcher) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils$1.findKey(this, header);\n\n      return !!(key && this[key] !== undefined && (!matcher || matchHeaderValue(this, this[key], key, matcher)));\n    }\n\n    return false;\n  }\n\n  delete(header, matcher) {\n    const self = this;\n    let deleted = false;\n\n    function deleteHeader(_header) {\n      _header = normalizeHeader(_header);\n\n      if (_header) {\n        const key = utils$1.findKey(self, _header);\n\n        if (key && (!matcher || matchHeaderValue(self, self[key], key, matcher))) {\n          delete self[key];\n\n          deleted = true;\n        }\n      }\n    }\n\n    if (utils$1.isArray(header)) {\n      header.forEach(deleteHeader);\n    } else {\n      deleteHeader(header);\n    }\n\n    return deleted;\n  }\n\n  clear(matcher) {\n    const keys = Object.keys(this);\n    let i = keys.length;\n    let deleted = false;\n\n    while (i--) {\n      const key = keys[i];\n      if(!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {\n        delete this[key];\n        deleted = true;\n      }\n    }\n\n    return deleted;\n  }\n\n  normalize(format) {\n    const self = this;\n    const headers = {};\n\n    utils$1.forEach(this, (value, header) => {\n      const key = utils$1.findKey(headers, header);\n\n      if (key) {\n        self[key] = normalizeValue(value);\n        delete self[header];\n        return;\n      }\n\n      const normalized = format ? formatHeader(header) : String(header).trim();\n\n      if (normalized !== header) {\n        delete self[header];\n      }\n\n      self[normalized] = normalizeValue(value);\n\n      headers[normalized] = true;\n    });\n\n    return this;\n  }\n\n  concat(...targets) {\n    return this.constructor.concat(this, ...targets);\n  }\n\n  toJSON(asStrings) {\n    const obj = Object.create(null);\n\n    utils$1.forEach(this, (value, header) => {\n      value != null && value !== false && (obj[header] = asStrings && utils$1.isArray(value) ? value.join(', ') : value);\n    });\n\n    return obj;\n  }\n\n  [Symbol.iterator]() {\n    return Object.entries(this.toJSON())[Symbol.iterator]();\n  }\n\n  toString() {\n    return Object.entries(this.toJSON()).map(([header, value]) => header + ': ' + value).join('\\n');\n  }\n\n  getSetCookie() {\n    return this.get(\"set-cookie\") || [];\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'AxiosHeaders';\n  }\n\n  static from(thing) {\n    return thing instanceof this ? thing : new this(thing);\n  }\n\n  static concat(first, ...targets) {\n    const computed = new this(first);\n\n    targets.forEach((target) => computed.set(target));\n\n    return computed;\n  }\n\n  static accessor(header) {\n    const internals = this[$internals] = (this[$internals] = {\n      accessors: {}\n    });\n\n    const accessors = internals.accessors;\n    const prototype = this.prototype;\n\n    function defineAccessor(_header) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!accessors[lHeader]) {\n        buildAccessors(prototype, _header);\n        accessors[lHeader] = true;\n      }\n    }\n\n    utils$1.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);\n\n    return this;\n  }\n}\n\nAxiosHeaders.accessor(['Content-Type', 'Content-Length', 'Accept', 'Accept-Encoding', 'User-Agent', 'Authorization']);\n\n// reserved names hotfix\nutils$1.reduceDescriptors(AxiosHeaders.prototype, ({value}, key) => {\n  let mapped = key[0].toUpperCase() + key.slice(1); // map `set` => `Set`\n  return {\n    get: () => value,\n    set(headerValue) {\n      this[mapped] = headerValue;\n    }\n  }\n});\n\nutils$1.freezeMethods(AxiosHeaders);\n\nconst AxiosHeaders$1 = AxiosHeaders;\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Array|Function} fns A single function or Array of functions\n * @param {?Object} response The response object\n *\n * @returns {*} The resulting transformed data\n */\nfunction transformData(fns, response) {\n  const config = this || defaults$1;\n  const context = response || config;\n  const headers = AxiosHeaders$1.from(context.headers);\n  let data = context.data;\n\n  utils$1.forEach(fns, function transform(fn) {\n    data = fn.call(config, data, headers.normalize(), response ? response.status : undefined);\n  });\n\n  headers.normalize();\n\n  return data;\n}\n\nfunction isCancel(value) {\n  return !!(value && value.__CANCEL__);\n}\n\n/**\n * A `CanceledError` is an object that is thrown when an operation is canceled.\n *\n * @param {string=} message The message.\n * @param {Object=} config The config.\n * @param {Object=} request The request.\n *\n * @returns {CanceledError} The created error.\n */\nfunction CanceledError(message, config, request) {\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  AxiosError.call(this, message == null ? 'canceled' : message, AxiosError.ERR_CANCELED, config, request);\n  this.name = 'CanceledError';\n}\n\nutils$1.inherits(CanceledError, AxiosError, {\n  __CANCEL__: true\n});\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n *\n * @returns {object} The response.\n */\nfunction settle(resolve, reject, response) {\n  const validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(new AxiosError(\n      'Request failed with status code ' + response.status,\n      [AxiosError.ERR_BAD_REQUEST, AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],\n      response.config,\n      response.request,\n      response\n    ));\n  }\n}\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n *\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nfunction isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(url);\n}\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n *\n * @returns {string} The combined URL\n */\nfunction combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/?\\/$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n}\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n *\n * @returns {string} The combined full path\n */\nfunction buildFullPath(baseURL, requestedURL, allowAbsoluteUrls) {\n  let isRelativeUrl = !isAbsoluteURL(requestedURL);\n  if (baseURL && (isRelativeUrl || allowAbsoluteUrls == false)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n}\n\nconst VERSION = \"1.13.2\";\n\nfunction parseProtocol(url) {\n  const match = /^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(url);\n  return match && match[1] || '';\n}\n\nconst DATA_URL_PATTERN = /^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\\s\\S]*)$/;\n\n/**\n * Parse data uri to a Buffer or Blob\n *\n * @param {String} uri\n * @param {?Boolean} asBlob\n * @param {?Object} options\n * @param {?Function} options.Blob\n *\n * @returns {Buffer|Blob}\n */\nfunction fromDataURI(uri, asBlob, options) {\n  const _Blob = options && options.Blob || platform.classes.Blob;\n  const protocol = parseProtocol(uri);\n\n  if (asBlob === undefined && _Blob) {\n    asBlob = true;\n  }\n\n  if (protocol === 'data') {\n    uri = protocol.length ? uri.slice(protocol.length + 1) : uri;\n\n    const match = DATA_URL_PATTERN.exec(uri);\n\n    if (!match) {\n      throw new AxiosError('Invalid URL', AxiosError.ERR_INVALID_URL);\n    }\n\n    const mime = match[1];\n    const isBase64 = match[2];\n    const body = match[3];\n    const buffer = Buffer.from(decodeURIComponent(body), isBase64 ? 'base64' : 'utf8');\n\n    if (asBlob) {\n      if (!_Blob) {\n        throw new AxiosError('Blob is not supported', AxiosError.ERR_NOT_SUPPORT);\n      }\n\n      return new _Blob([buffer], {type: mime});\n    }\n\n    return buffer;\n  }\n\n  throw new AxiosError('Unsupported protocol ' + protocol, AxiosError.ERR_NOT_SUPPORT);\n}\n\nconst kInternals = Symbol('internals');\n\nclass AxiosTransformStream extends stream__default[\"default\"].Transform{\n  constructor(options) {\n    options = utils$1.toFlatObject(options, {\n      maxRate: 0,\n      chunkSize: 64 * 1024,\n      minChunkSize: 100,\n      timeWindow: 500,\n      ticksRate: 2,\n      samplesCount: 15\n    }, null, (prop, source) => {\n      return !utils$1.isUndefined(source[prop]);\n    });\n\n    super({\n      readableHighWaterMark: options.chunkSize\n    });\n\n    const internals = this[kInternals] = {\n      timeWindow: options.timeWindow,\n      chunkSize: options.chunkSize,\n      maxRate: options.maxRate,\n      minChunkSize: options.minChunkSize,\n      bytesSeen: 0,\n      isCaptured: false,\n      notifiedBytesLoaded: 0,\n      ts: Date.now(),\n      bytes: 0,\n      onReadCallback: null\n    };\n\n    this.on('newListener', event => {\n      if (event === 'progress') {\n        if (!internals.isCaptured) {\n          internals.isCaptured = true;\n        }\n      }\n    });\n  }\n\n  _read(size) {\n    const internals = this[kInternals];\n\n    if (internals.onReadCallback) {\n      internals.onReadCallback();\n    }\n\n    return super._read(size);\n  }\n\n  _transform(chunk, encoding, callback) {\n    const internals = this[kInternals];\n    const maxRate = internals.maxRate;\n\n    const readableHighWaterMark = this.readableHighWaterMark;\n\n    const timeWindow = internals.timeWindow;\n\n    const divider = 1000 / timeWindow;\n    const bytesThreshold = (maxRate / divider);\n    const minChunkSize = internals.minChunkSize !== false ? Math.max(internals.minChunkSize, bytesThreshold * 0.01) : 0;\n\n    const pushChunk = (_chunk, _callback) => {\n      const bytes = Buffer.byteLength(_chunk);\n      internals.bytesSeen += bytes;\n      internals.bytes += bytes;\n\n      internals.isCaptured && this.emit('progress', internals.bytesSeen);\n\n      if (this.push(_chunk)) {\n        process.nextTick(_callback);\n      } else {\n        internals.onReadCallback = () => {\n          internals.onReadCallback = null;\n          process.nextTick(_callback);\n        };\n      }\n    };\n\n    const transformChunk = (_chunk, _callback) => {\n      const chunkSize = Buffer.byteLength(_chunk);\n      let chunkRemainder = null;\n      let maxChunkSize = readableHighWaterMark;\n      let bytesLeft;\n      let passed = 0;\n\n      if (maxRate) {\n        const now = Date.now();\n\n        if (!internals.ts || (passed = (now - internals.ts)) >= timeWindow) {\n          internals.ts = now;\n          bytesLeft = bytesThreshold - internals.bytes;\n          internals.bytes = bytesLeft < 0 ? -bytesLeft : 0;\n          passed = 0;\n        }\n\n        bytesLeft = bytesThreshold - internals.bytes;\n      }\n\n      if (maxRate) {\n        if (bytesLeft <= 0) {\n          // next time window\n          return setTimeout(() => {\n            _callback(null, _chunk);\n          }, timeWindow - passed);\n        }\n\n        if (bytesLeft < maxChunkSize) {\n          maxChunkSize = bytesLeft;\n        }\n      }\n\n      if (maxChunkSize && chunkSize > maxChunkSize && (chunkSize - maxChunkSize) > minChunkSize) {\n        chunkRemainder = _chunk.subarray(maxChunkSize);\n        _chunk = _chunk.subarray(0, maxChunkSize);\n      }\n\n      pushChunk(_chunk, chunkRemainder ? () => {\n        process.nextTick(_callback, null, chunkRemainder);\n      } : _callback);\n    };\n\n    transformChunk(chunk, function transformNextChunk(err, _chunk) {\n      if (err) {\n        return callback(err);\n      }\n\n      if (_chunk) {\n        transformChunk(_chunk, transformNextChunk);\n      } else {\n        callback(null);\n      }\n    });\n  }\n}\n\nconst AxiosTransformStream$1 = AxiosTransformStream;\n\nconst {asyncIterator} = Symbol;\n\nconst readBlob = async function* (blob) {\n  if (blob.stream) {\n    yield* blob.stream();\n  } else if (blob.arrayBuffer) {\n    yield await blob.arrayBuffer();\n  } else if (blob[asyncIterator]) {\n    yield* blob[asyncIterator]();\n  } else {\n    yield blob;\n  }\n};\n\nconst readBlob$1 = readBlob;\n\nconst BOUNDARY_ALPHABET = platform.ALPHABET.ALPHA_DIGIT + '-_';\n\nconst textEncoder = typeof TextEncoder === 'function' ? new TextEncoder() : new util__default[\"default\"].TextEncoder();\n\nconst CRLF = '\\r\\n';\nconst CRLF_BYTES = textEncoder.encode(CRLF);\nconst CRLF_BYTES_COUNT = 2;\n\nclass FormDataPart {\n  constructor(name, value) {\n    const {escapeName} = this.constructor;\n    const isStringValue = utils$1.isString(value);\n\n    let headers = `Content-Disposition: form-data; name=\"${escapeName(name)}\"${\n      !isStringValue && value.name ? `; filename=\"${escapeName(value.name)}\"` : ''\n    }${CRLF}`;\n\n    if (isStringValue) {\n      value = textEncoder.encode(String(value).replace(/\\r?\\n|\\r\\n?/g, CRLF));\n    } else {\n      headers += `Content-Type: ${value.type || \"application/octet-stream\"}${CRLF}`;\n    }\n\n    this.headers = textEncoder.encode(headers + CRLF);\n\n    this.contentLength = isStringValue ? value.byteLength : value.size;\n\n    this.size = this.headers.byteLength + this.contentLength + CRLF_BYTES_COUNT;\n\n    this.name = name;\n    this.value = value;\n  }\n\n  async *encode(){\n    yield this.headers;\n\n    const {value} = this;\n\n    if(utils$1.isTypedArray(value)) {\n      yield value;\n    } else {\n      yield* readBlob$1(value);\n    }\n\n    yield CRLF_BYTES;\n  }\n\n  static escapeName(name) {\n      return String(name).replace(/[\\r\\n\"]/g, (match) => ({\n        '\\r' : '%0D',\n        '\\n' : '%0A',\n        '\"' : '%22',\n      }[match]));\n  }\n}\n\nconst formDataToStream = (form, headersHandler, options) => {\n  const {\n    tag = 'form-data-boundary',\n    size = 25,\n    boundary = tag + '-' + platform.generateString(size, BOUNDARY_ALPHABET)\n  } = options || {};\n\n  if(!utils$1.isFormData(form)) {\n    throw TypeError('FormData instance required');\n  }\n\n  if (boundary.length < 1 || boundary.length > 70) {\n    throw Error('boundary must be 10-70 characters long')\n  }\n\n  const boundaryBytes = textEncoder.encode('--' + boundary + CRLF);\n  const footerBytes = textEncoder.encode('--' + boundary + '--' + CRLF);\n  let contentLength = footerBytes.byteLength;\n\n  const parts = Array.from(form.entries()).map(([name, value]) => {\n    const part = new FormDataPart(name, value);\n    contentLength += part.size;\n    return part;\n  });\n\n  contentLength += boundaryBytes.byteLength * parts.length;\n\n  contentLength = utils$1.toFiniteNumber(contentLength);\n\n  const computedHeaders = {\n    'Content-Type': `multipart/form-data; boundary=${boundary}`\n  };\n\n  if (Number.isFinite(contentLength)) {\n    computedHeaders['Content-Length'] = contentLength;\n  }\n\n  headersHandler && headersHandler(computedHeaders);\n\n  return stream.Readable.from((async function *() {\n    for(const part of parts) {\n      yield boundaryBytes;\n      yield* part.encode();\n    }\n\n    yield footerBytes;\n  })());\n};\n\nconst formDataToStream$1 = formDataToStream;\n\nclass ZlibHeaderTransformStream extends stream__default[\"default\"].Transform {\n  __transform(chunk, encoding, callback) {\n    this.push(chunk);\n    callback();\n  }\n\n  _transform(chunk, encoding, callback) {\n    if (chunk.length !== 0) {\n      this._transform = this.__transform;\n\n      // Add Default Compression headers if no zlib headers are present\n      if (chunk[0] !== 120) { // Hex: 78\n        const header = Buffer.alloc(2);\n        header[0] = 120; // Hex: 78\n        header[1] = 156; // Hex: 9C \n        this.push(header, encoding);\n      }\n    }\n\n    this.__transform(chunk, encoding, callback);\n  }\n}\n\nconst ZlibHeaderTransformStream$1 = ZlibHeaderTransformStream;\n\nconst callbackify = (fn, reducer) => {\n  return utils$1.isAsyncFn(fn) ? function (...args) {\n    const cb = args.pop();\n    fn.apply(this, args).then((value) => {\n      try {\n        reducer ? cb(null, ...reducer(value)) : cb(null, value);\n      } catch (err) {\n        cb(err);\n      }\n    }, cb);\n  } : fn;\n};\n\nconst callbackify$1 = callbackify;\n\n/**\n * Calculate data maxRate\n * @param {Number} [samplesCount= 10]\n * @param {Number} [min= 1000]\n * @returns {Function}\n */\nfunction speedometer(samplesCount, min) {\n  samplesCount = samplesCount || 10;\n  const bytes = new Array(samplesCount);\n  const timestamps = new Array(samplesCount);\n  let head = 0;\n  let tail = 0;\n  let firstSampleTS;\n\n  min = min !== undefined ? min : 1000;\n\n  return function push(chunkLength) {\n    const now = Date.now();\n\n    const startedAt = timestamps[tail];\n\n    if (!firstSampleTS) {\n      firstSampleTS = now;\n    }\n\n    bytes[head] = chunkLength;\n    timestamps[head] = now;\n\n    let i = tail;\n    let bytesCount = 0;\n\n    while (i !== head) {\n      bytesCount += bytes[i++];\n      i = i % samplesCount;\n    }\n\n    head = (head + 1) % samplesCount;\n\n    if (head === tail) {\n      tail = (tail + 1) % samplesCount;\n    }\n\n    if (now - firstSampleTS < min) {\n      return;\n    }\n\n    const passed = startedAt && now - startedAt;\n\n    return passed ? Math.round(bytesCount * 1000 / passed) : undefined;\n  };\n}\n\n/**\n * Throttle decorator\n * @param {Function} fn\n * @param {Number} freq\n * @return {Function}\n */\nfunction throttle(fn, freq) {\n  let timestamp = 0;\n  let threshold = 1000 / freq;\n  let lastArgs;\n  let timer;\n\n  const invoke = (args, now = Date.now()) => {\n    timestamp = now;\n    lastArgs = null;\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n    fn(...args);\n  };\n\n  const throttled = (...args) => {\n    const now = Date.now();\n    const passed = now - timestamp;\n    if ( passed >= threshold) {\n      invoke(args, now);\n    } else {\n      lastArgs = args;\n      if (!timer) {\n        timer = setTimeout(() => {\n          timer = null;\n          invoke(lastArgs);\n        }, threshold - passed);\n      }\n    }\n  };\n\n  const flush = () => lastArgs && invoke(lastArgs);\n\n  return [throttled, flush];\n}\n\nconst progressEventReducer = (listener, isDownloadStream, freq = 3) => {\n  let bytesNotified = 0;\n  const _speedometer = speedometer(50, 250);\n\n  return throttle(e => {\n    const loaded = e.loaded;\n    const total = e.lengthComputable ? e.total : undefined;\n    const progressBytes = loaded - bytesNotified;\n    const rate = _speedometer(progressBytes);\n    const inRange = loaded <= total;\n\n    bytesNotified = loaded;\n\n    const data = {\n      loaded,\n      total,\n      progress: total ? (loaded / total) : undefined,\n      bytes: progressBytes,\n      rate: rate ? rate : undefined,\n      estimated: rate && total && inRange ? (total - loaded) / rate : undefined,\n      event: e,\n      lengthComputable: total != null,\n      [isDownloadStream ? 'download' : 'upload']: true\n    };\n\n    listener(data);\n  }, freq);\n};\n\nconst progressEventDecorator = (total, throttled) => {\n  const lengthComputable = total != null;\n\n  return [(loaded) => throttled[0]({\n    lengthComputable,\n    total,\n    loaded\n  }), throttled[1]];\n};\n\nconst asyncDecorator = (fn) => (...args) => utils$1.asap(() => fn(...args));\n\n/**\n * Estimate decoded byte length of a data:// URL *without* allocating large buffers.\n * - For base64: compute exact decoded size using length and padding;\n *               handle %XX at the character-count level (no string allocation).\n * - For non-base64: use UTF-8 byteLength of the encoded body as a safe upper bound.\n *\n * @param {string} url\n * @returns {number}\n */\nfunction estimateDataURLDecodedBytes(url) {\n  if (!url || typeof url !== 'string') return 0;\n  if (!url.startsWith('data:')) return 0;\n\n  const comma = url.indexOf(',');\n  if (comma < 0) return 0;\n\n  const meta = url.slice(5, comma);\n  const body = url.slice(comma + 1);\n  const isBase64 = /;base64/i.test(meta);\n\n  if (isBase64) {\n    let effectiveLen = body.length;\n    const len = body.length; // cache length\n\n    for (let i = 0; i < len; i++) {\n      if (body.charCodeAt(i) === 37 /* '%' */ && i + 2 < len) {\n        const a = body.charCodeAt(i + 1);\n        const b = body.charCodeAt(i + 2);\n        const isHex =\n          ((a >= 48 && a <= 57) || (a >= 65 && a <= 70) || (a >= 97 && a <= 102)) &&\n          ((b >= 48 && b <= 57) || (b >= 65 && b <= 70) || (b >= 97 && b <= 102));\n\n        if (isHex) {\n          effectiveLen -= 2;\n          i += 2;\n        }\n      }\n    }\n\n    let pad = 0;\n    let idx = len - 1;\n\n    const tailIsPct3D = (j) =>\n      j >= 2 &&\n      body.charCodeAt(j - 2) === 37 && // '%'\n      body.charCodeAt(j - 1) === 51 && // '3'\n      (body.charCodeAt(j) === 68 || body.charCodeAt(j) === 100); // 'D' or 'd'\n\n    if (idx >= 0) {\n      if (body.charCodeAt(idx) === 61 /* '=' */) {\n        pad++;\n        idx--;\n      } else if (tailIsPct3D(idx)) {\n        pad++;\n        idx -= 3;\n      }\n    }\n\n    if (pad === 1 && idx >= 0) {\n      if (body.charCodeAt(idx) === 61 /* '=' */) {\n        pad++;\n      } else if (tailIsPct3D(idx)) {\n        pad++;\n      }\n    }\n\n    const groups = Math.floor(effectiveLen / 4);\n    const bytes = groups * 3 - (pad || 0);\n    return bytes > 0 ? bytes : 0;\n  }\n\n  return Buffer.byteLength(body, 'utf8');\n}\n\nconst zlibOptions = {\n  flush: zlib__default[\"default\"].constants.Z_SYNC_FLUSH,\n  finishFlush: zlib__default[\"default\"].constants.Z_SYNC_FLUSH\n};\n\nconst brotliOptions = {\n  flush: zlib__default[\"default\"].constants.BROTLI_OPERATION_FLUSH,\n  finishFlush: zlib__default[\"default\"].constants.BROTLI_OPERATION_FLUSH\n};\n\nconst isBrotliSupported = utils$1.isFunction(zlib__default[\"default\"].createBrotliDecompress);\n\nconst {http: httpFollow, https: httpsFollow} = followRedirects__default[\"default\"];\n\nconst isHttps = /https:?/;\n\nconst supportedProtocols = platform.protocols.map(protocol => {\n  return protocol + ':';\n});\n\n\nconst flushOnFinish = (stream, [throttled, flush]) => {\n  stream\n    .on('end', flush)\n    .on('error', flush);\n\n  return throttled;\n};\n\nclass Http2Sessions {\n  constructor() {\n    this.sessions = Object.create(null);\n  }\n\n  getSession(authority, options) {\n    options = Object.assign({\n      sessionTimeout: 1000\n    }, options);\n\n    let authoritySessions = this.sessions[authority];\n\n    if (authoritySessions) {\n      let len = authoritySessions.length;\n\n      for (let i = 0; i < len; i++) {\n        const [sessionHandle, sessionOptions] = authoritySessions[i];\n        if (!sessionHandle.destroyed && !sessionHandle.closed && util__default[\"default\"].isDeepStrictEqual(sessionOptions, options)) {\n          return sessionHandle;\n        }\n      }\n    }\n\n    const session = http2__default[\"default\"].connect(authority, options);\n\n    let removed;\n\n    const removeSession = () => {\n      if (removed) {\n        return;\n      }\n\n      removed = true;\n\n      let entries = authoritySessions, len = entries.length, i = len;\n\n      while (i--) {\n        if (entries[i][0] === session) {\n          if (len === 1) {\n            delete this.sessions[authority];\n          } else {\n            entries.splice(i, 1);\n          }\n          return;\n        }\n      }\n    };\n\n    const originalRequestFn = session.request;\n\n    const {sessionTimeout} = options;\n\n    if(sessionTimeout != null) {\n\n      let timer;\n      let streamsCount = 0;\n\n      session.request = function () {\n        const stream = originalRequestFn.apply(this, arguments);\n\n        streamsCount++;\n\n        if (timer) {\n          clearTimeout(timer);\n          timer = null;\n        }\n\n        stream.once('close', () => {\n          if (!--streamsCount) {\n            timer = setTimeout(() => {\n              timer = null;\n              removeSession();\n            }, sessionTimeout);\n          }\n        });\n\n        return stream;\n      };\n    }\n\n    session.once('close', removeSession);\n\n    let entry = [\n        session,\n        options\n      ];\n\n    authoritySessions ? authoritySessions.push(entry) : authoritySessions =  this.sessions[authority] = [entry];\n\n    return session;\n  }\n}\n\nconst http2Sessions = new Http2Sessions();\n\n\n/**\n * If the proxy or config beforeRedirects functions are defined, call them with the options\n * object.\n *\n * @param {Object<string, any>} options - The options object that was passed to the request.\n *\n * @returns {Object<string, any>}\n */\nfunction dispatchBeforeRedirect(options, responseDetails) {\n  if (options.beforeRedirects.proxy) {\n    options.beforeRedirects.proxy(options);\n  }\n  if (options.beforeRedirects.config) {\n    options.beforeRedirects.config(options, responseDetails);\n  }\n}\n\n/**\n * If the proxy or config afterRedirects functions are defined, call them with the options\n *\n * @param {http.ClientRequestArgs} options\n * @param {AxiosProxyConfig} configProxy configuration from Axios options object\n * @param {string} location\n *\n * @returns {http.ClientRequestArgs}\n */\nfunction setProxy(options, configProxy, location) {\n  let proxy = configProxy;\n  if (!proxy && proxy !== false) {\n    const proxyUrl = proxyFromEnv__default[\"default\"].getProxyForUrl(location);\n    if (proxyUrl) {\n      proxy = new URL(proxyUrl);\n    }\n  }\n  if (proxy) {\n    // Basic proxy authorization\n    if (proxy.username) {\n      proxy.auth = (proxy.username || '') + ':' + (proxy.password || '');\n    }\n\n    if (proxy.auth) {\n      // Support proxy auth object form\n      if (proxy.auth.username || proxy.auth.password) {\n        proxy.auth = (proxy.auth.username || '') + ':' + (proxy.auth.password || '');\n      }\n      const base64 = Buffer\n        .from(proxy.auth, 'utf8')\n        .toString('base64');\n      options.headers['Proxy-Authorization'] = 'Basic ' + base64;\n    }\n\n    options.headers.host = options.hostname + (options.port ? ':' + options.port : '');\n    const proxyHost = proxy.hostname || proxy.host;\n    options.hostname = proxyHost;\n    // Replace 'host' since options is not a URL object\n    options.host = proxyHost;\n    options.port = proxy.port;\n    options.path = location;\n    if (proxy.protocol) {\n      options.protocol = proxy.protocol.includes(':') ? proxy.protocol : `${proxy.protocol}:`;\n    }\n  }\n\n  options.beforeRedirects.proxy = function beforeRedirect(redirectOptions) {\n    // Configure proxy for redirected request, passing the original config proxy to apply\n    // the exact same logic as if the redirected request was performed by axios directly.\n    setProxy(redirectOptions, configProxy, redirectOptions.href);\n  };\n}\n\nconst isHttpAdapterSupported = typeof process !== 'undefined' && utils$1.kindOf(process) === 'process';\n\n// temporary hotfix\n\nconst wrapAsync = (asyncExecutor) => {\n  return new Promise((resolve, reject) => {\n    let onDone;\n    let isDone;\n\n    const done = (value, isRejected) => {\n      if (isDone) return;\n      isDone = true;\n      onDone && onDone(value, isRejected);\n    };\n\n    const _resolve = (value) => {\n      done(value);\n      resolve(value);\n    };\n\n    const _reject = (reason) => {\n      done(reason, true);\n      reject(reason);\n    };\n\n    asyncExecutor(_resolve, _reject, (onDoneHandler) => (onDone = onDoneHandler)).catch(_reject);\n  })\n};\n\nconst resolveFamily = ({address, family}) => {\n  if (!utils$1.isString(address)) {\n    throw TypeError('address must be a string');\n  }\n  return ({\n    address,\n    family: family || (address.indexOf('.') < 0 ? 6 : 4)\n  });\n};\n\nconst buildAddressEntry = (address, family) => resolveFamily(utils$1.isObject(address) ? address : {address, family});\n\nconst http2Transport = {\n  request(options, cb) {\n      const authority = options.protocol + '//' + options.hostname + ':' + (options.port || 80);\n\n      const {http2Options, headers} = options;\n\n      const session = http2Sessions.getSession(authority, http2Options);\n\n      const {\n        HTTP2_HEADER_SCHEME,\n        HTTP2_HEADER_METHOD,\n        HTTP2_HEADER_PATH,\n        HTTP2_HEADER_STATUS\n      } = http2__default[\"default\"].constants;\n\n      const http2Headers = {\n        [HTTP2_HEADER_SCHEME]: options.protocol.replace(':', ''),\n        [HTTP2_HEADER_METHOD]: options.method,\n        [HTTP2_HEADER_PATH]: options.path,\n      };\n\n      utils$1.forEach(headers, (header, name) => {\n        name.charAt(0) !== ':' && (http2Headers[name] = header);\n      });\n\n      const req = session.request(http2Headers);\n\n      req.once('response', (responseHeaders) => {\n        const response = req; //duplex\n\n        responseHeaders = Object.assign({}, responseHeaders);\n\n        const status = responseHeaders[HTTP2_HEADER_STATUS];\n\n        delete responseHeaders[HTTP2_HEADER_STATUS];\n\n        response.headers = responseHeaders;\n\n        response.statusCode = +status;\n\n        cb(response);\n      });\n\n      return req;\n  }\n};\n\n/*eslint consistent-return:0*/\nconst httpAdapter = isHttpAdapterSupported && function httpAdapter(config) {\n  return wrapAsync(async function dispatchHttpRequest(resolve, reject, onDone) {\n    let {data, lookup, family, httpVersion = 1, http2Options} = config;\n    const {responseType, responseEncoding} = config;\n    const method = config.method.toUpperCase();\n    let isDone;\n    let rejected = false;\n    let req;\n\n    httpVersion = +httpVersion;\n\n    if (Number.isNaN(httpVersion)) {\n      throw TypeError(`Invalid protocol version: '${config.httpVersion}' is not a number`);\n    }\n\n    if (httpVersion !== 1 && httpVersion !== 2) {\n      throw TypeError(`Unsupported protocol version '${httpVersion}'`);\n    }\n\n    const isHttp2 = httpVersion === 2;\n\n    if (lookup) {\n      const _lookup = callbackify$1(lookup, (value) => utils$1.isArray(value) ? value : [value]);\n      // hotfix to support opt.all option which is required for node 20.x\n      lookup = (hostname, opt, cb) => {\n        _lookup(hostname, opt, (err, arg0, arg1) => {\n          if (err) {\n            return cb(err);\n          }\n\n          const addresses = utils$1.isArray(arg0) ? arg0.map(addr => buildAddressEntry(addr)) : [buildAddressEntry(arg0, arg1)];\n\n          opt.all ? cb(err, addresses) : cb(err, addresses[0].address, addresses[0].family);\n        });\n      };\n    }\n\n    const abortEmitter = new events.EventEmitter();\n\n    function abort(reason) {\n      try {\n        abortEmitter.emit('abort', !reason || reason.type ? new CanceledError(null, config, req) : reason);\n      } catch(err) {\n        console.warn('emit error', err);\n      }\n    }\n\n    abortEmitter.once('abort', reject);\n\n    const onFinished = () => {\n      if (config.cancelToken) {\n        config.cancelToken.unsubscribe(abort);\n      }\n\n      if (config.signal) {\n        config.signal.removeEventListener('abort', abort);\n      }\n\n      abortEmitter.removeAllListeners();\n    };\n\n    if (config.cancelToken || config.signal) {\n      config.cancelToken && config.cancelToken.subscribe(abort);\n      if (config.signal) {\n        config.signal.aborted ? abort() : config.signal.addEventListener('abort', abort);\n      }\n    }\n\n    onDone((response, isRejected) => {\n      isDone = true;\n\n      if (isRejected) {\n        rejected = true;\n        onFinished();\n        return;\n      }\n\n      const {data} = response;\n\n      if (data instanceof stream__default[\"default\"].Readable || data instanceof stream__default[\"default\"].Duplex) {\n        const offListeners = stream__default[\"default\"].finished(data, () => {\n          offListeners();\n          onFinished();\n        });\n      } else {\n        onFinished();\n      }\n    });\n\n\n\n\n\n    // Parse url\n    const fullPath = buildFullPath(config.baseURL, config.url, config.allowAbsoluteUrls);\n    const parsed = new URL(fullPath, platform.hasBrowserEnv ? platform.origin : undefined);\n    const protocol = parsed.protocol || supportedProtocols[0];\n\n    if (protocol === 'data:') {\n      // Apply the same semantics as HTTP: only enforce if a finite, non-negative cap is set.\n      if (config.maxContentLength > -1) {\n        // Use the exact string passed to fromDataURI (config.url); fall back to fullPath if needed.\n        const dataUrl = String(config.url || fullPath || '');\n        const estimated = estimateDataURLDecodedBytes(dataUrl);\n\n        if (estimated > config.maxContentLength) {\n          return reject(new AxiosError(\n            'maxContentLength size of ' + config.maxContentLength + ' exceeded',\n            AxiosError.ERR_BAD_RESPONSE,\n            config\n          ));\n        }\n      }\n\n      let convertedData;\n\n      if (method !== 'GET') {\n        return settle(resolve, reject, {\n          status: 405,\n          statusText: 'method not allowed',\n          headers: {},\n          config\n        });\n      }\n\n      try {\n        convertedData = fromDataURI(config.url, responseType === 'blob', {\n          Blob: config.env && config.env.Blob\n        });\n      } catch (err) {\n        throw AxiosError.from(err, AxiosError.ERR_BAD_REQUEST, config);\n      }\n\n      if (responseType === 'text') {\n        convertedData = convertedData.toString(responseEncoding);\n\n        if (!responseEncoding || responseEncoding === 'utf8') {\n          convertedData = utils$1.stripBOM(convertedData);\n        }\n      } else if (responseType === 'stream') {\n        convertedData = stream__default[\"default\"].Readable.from(convertedData);\n      }\n\n      return settle(resolve, reject, {\n        data: convertedData,\n        status: 200,\n        statusText: 'OK',\n        headers: new AxiosHeaders$1(),\n        config\n      });\n    }\n\n    if (supportedProtocols.indexOf(protocol) === -1) {\n      return reject(new AxiosError(\n        'Unsupported protocol ' + protocol,\n        AxiosError.ERR_BAD_REQUEST,\n        config\n      ));\n    }\n\n    const headers = AxiosHeaders$1.from(config.headers).normalize();\n\n    // Set User-Agent (required by some servers)\n    // See https://github.com/axios/axios/issues/69\n    // User-Agent is specified; handle case where no UA header is desired\n    // Only set header if it hasn't been set in config\n    headers.set('User-Agent', 'axios/' + VERSION, false);\n\n    const {onUploadProgress, onDownloadProgress} = config;\n    const maxRate = config.maxRate;\n    let maxUploadRate = undefined;\n    let maxDownloadRate = undefined;\n\n    // support for spec compliant FormData objects\n    if (utils$1.isSpecCompliantForm(data)) {\n      const userBoundary = headers.getContentType(/boundary=([-_\\w\\d]{10,70})/i);\n\n      data = formDataToStream$1(data, (formHeaders) => {\n        headers.set(formHeaders);\n      }, {\n        tag: `axios-${VERSION}-boundary`,\n        boundary: userBoundary && userBoundary[1] || undefined\n      });\n      // support for https://www.npmjs.com/package/form-data api\n    } else if (utils$1.isFormData(data) && utils$1.isFunction(data.getHeaders)) {\n      headers.set(data.getHeaders());\n\n      if (!headers.hasContentLength()) {\n        try {\n          const knownLength = await util__default[\"default\"].promisify(data.getLength).call(data);\n          Number.isFinite(knownLength) && knownLength >= 0 && headers.setContentLength(knownLength);\n          /*eslint no-empty:0*/\n        } catch (e) {\n        }\n      }\n    } else if (utils$1.isBlob(data) || utils$1.isFile(data)) {\n      data.size && headers.setContentType(data.type || 'application/octet-stream');\n      headers.setContentLength(data.size || 0);\n      data = stream__default[\"default\"].Readable.from(readBlob$1(data));\n    } else if (data && !utils$1.isStream(data)) {\n      if (Buffer.isBuffer(data)) ; else if (utils$1.isArrayBuffer(data)) {\n        data = Buffer.from(new Uint8Array(data));\n      } else if (utils$1.isString(data)) {\n        data = Buffer.from(data, 'utf-8');\n      } else {\n        return reject(new AxiosError(\n          'Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream',\n          AxiosError.ERR_BAD_REQUEST,\n          config\n        ));\n      }\n\n      // Add Content-Length header if data exists\n      headers.setContentLength(data.length, false);\n\n      if (config.maxBodyLength > -1 && data.length > config.maxBodyLength) {\n        return reject(new AxiosError(\n          'Request body larger than maxBodyLength limit',\n          AxiosError.ERR_BAD_REQUEST,\n          config\n        ));\n      }\n    }\n\n    const contentLength = utils$1.toFiniteNumber(headers.getContentLength());\n\n    if (utils$1.isArray(maxRate)) {\n      maxUploadRate = maxRate[0];\n      maxDownloadRate = maxRate[1];\n    } else {\n      maxUploadRate = maxDownloadRate = maxRate;\n    }\n\n    if (data && (onUploadProgress || maxUploadRate)) {\n      if (!utils$1.isStream(data)) {\n        data = stream__default[\"default\"].Readable.from(data, {objectMode: false});\n      }\n\n      data = stream__default[\"default\"].pipeline([data, new AxiosTransformStream$1({\n        maxRate: utils$1.toFiniteNumber(maxUploadRate)\n      })], utils$1.noop);\n\n      onUploadProgress && data.on('progress', flushOnFinish(\n        data,\n        progressEventDecorator(\n          contentLength,\n          progressEventReducer(asyncDecorator(onUploadProgress), false, 3)\n        )\n      ));\n    }\n\n    // HTTP basic authentication\n    let auth = undefined;\n    if (config.auth) {\n      const username = config.auth.username || '';\n      const password = config.auth.password || '';\n      auth = username + ':' + password;\n    }\n\n    if (!auth && parsed.username) {\n      const urlUsername = parsed.username;\n      const urlPassword = parsed.password;\n      auth = urlUsername + ':' + urlPassword;\n    }\n\n    auth && headers.delete('authorization');\n\n    let path;\n\n    try {\n      path = buildURL(\n        parsed.pathname + parsed.search,\n        config.params,\n        config.paramsSerializer\n      ).replace(/^\\?/, '');\n    } catch (err) {\n      const customErr = new Error(err.message);\n      customErr.config = config;\n      customErr.url = config.url;\n      customErr.exists = true;\n      return reject(customErr);\n    }\n\n    headers.set(\n      'Accept-Encoding',\n      'gzip, compress, deflate' + (isBrotliSupported ? ', br' : ''), false\n      );\n\n    const options = {\n      path,\n      method: method,\n      headers: headers.toJSON(),\n      agents: { http: config.httpAgent, https: config.httpsAgent },\n      auth,\n      protocol,\n      family,\n      beforeRedirect: dispatchBeforeRedirect,\n      beforeRedirects: {},\n      http2Options\n    };\n\n    // cacheable-lookup integration hotfix\n    !utils$1.isUndefined(lookup) && (options.lookup = lookup);\n\n    if (config.socketPath) {\n      options.socketPath = config.socketPath;\n    } else {\n      options.hostname = parsed.hostname.startsWith(\"[\") ? parsed.hostname.slice(1, -1) : parsed.hostname;\n      options.port = parsed.port;\n      setProxy(options, config.proxy, protocol + '//' + parsed.hostname + (parsed.port ? ':' + parsed.port : '') + options.path);\n    }\n\n    let transport;\n    const isHttpsRequest = isHttps.test(options.protocol);\n    options.agent = isHttpsRequest ? config.httpsAgent : config.httpAgent;\n\n    if (isHttp2) {\n       transport = http2Transport;\n    } else {\n      if (config.transport) {\n        transport = config.transport;\n      } else if (config.maxRedirects === 0) {\n        transport = isHttpsRequest ? https__default[\"default\"] : http__default[\"default\"];\n      } else {\n        if (config.maxRedirects) {\n          options.maxRedirects = config.maxRedirects;\n        }\n        if (config.beforeRedirect) {\n          options.beforeRedirects.config = config.beforeRedirect;\n        }\n        transport = isHttpsRequest ? httpsFollow : httpFollow;\n      }\n    }\n\n    if (config.maxBodyLength > -1) {\n      options.maxBodyLength = config.maxBodyLength;\n    } else {\n      // follow-redirects does not skip comparison, so it should always succeed for axios -1 unlimited\n      options.maxBodyLength = Infinity;\n    }\n\n    if (config.insecureHTTPParser) {\n      options.insecureHTTPParser = config.insecureHTTPParser;\n    }\n\n    // Create the request\n    req = transport.request(options, function handleResponse(res) {\n      if (req.destroyed) return;\n\n      const streams = [res];\n\n      const responseLength = utils$1.toFiniteNumber(res.headers['content-length']);\n\n      if (onDownloadProgress || maxDownloadRate) {\n        const transformStream = new AxiosTransformStream$1({\n          maxRate: utils$1.toFiniteNumber(maxDownloadRate)\n        });\n\n        onDownloadProgress && transformStream.on('progress', flushOnFinish(\n          transformStream,\n          progressEventDecorator(\n            responseLength,\n            progressEventReducer(asyncDecorator(onDownloadProgress), true, 3)\n          )\n        ));\n\n        streams.push(transformStream);\n      }\n\n      // decompress the response body transparently if required\n      let responseStream = res;\n\n      // return the last request in case of redirects\n      const lastRequest = res.req || req;\n\n      // if decompress disabled we should not decompress\n      if (config.decompress !== false && res.headers['content-encoding']) {\n        // if no content, but headers still say that it is encoded,\n        // remove the header not confuse downstream operations\n        if (method === 'HEAD' || res.statusCode === 204) {\n          delete res.headers['content-encoding'];\n        }\n\n        switch ((res.headers['content-encoding'] || '').toLowerCase()) {\n        /*eslint default-case:0*/\n        case 'gzip':\n        case 'x-gzip':\n        case 'compress':\n        case 'x-compress':\n          // add the unzipper to the body stream processing pipeline\n          streams.push(zlib__default[\"default\"].createUnzip(zlibOptions));\n\n          // remove the content-encoding in order to not confuse downstream operations\n          delete res.headers['content-encoding'];\n          break;\n        case 'deflate':\n          streams.push(new ZlibHeaderTransformStream$1());\n\n          // add the unzipper to the body stream processing pipeline\n          streams.push(zlib__default[\"default\"].createUnzip(zlibOptions));\n\n          // remove the content-encoding in order to not confuse downstream operations\n          delete res.headers['content-encoding'];\n          break;\n        case 'br':\n          if (isBrotliSupported) {\n            streams.push(zlib__default[\"default\"].createBrotliDecompress(brotliOptions));\n            delete res.headers['content-encoding'];\n          }\n        }\n      }\n\n      responseStream = streams.length > 1 ? stream__default[\"default\"].pipeline(streams, utils$1.noop) : streams[0];\n\n\n\n      const response = {\n        status: res.statusCode,\n        statusText: res.statusMessage,\n        headers: new AxiosHeaders$1(res.headers),\n        config,\n        request: lastRequest\n      };\n\n      if (responseType === 'stream') {\n        response.data = responseStream;\n        settle(resolve, reject, response);\n      } else {\n        const responseBuffer = [];\n        let totalResponseBytes = 0;\n\n        responseStream.on('data', function handleStreamData(chunk) {\n          responseBuffer.push(chunk);\n          totalResponseBytes += chunk.length;\n\n          // make sure the content length is not over the maxContentLength if specified\n          if (config.maxContentLength > -1 && totalResponseBytes > config.maxContentLength) {\n            // stream.destroy() emit aborted event before calling reject() on Node.js v16\n            rejected = true;\n            responseStream.destroy();\n            abort(new AxiosError('maxContentLength size of ' + config.maxContentLength + ' exceeded',\n              AxiosError.ERR_BAD_RESPONSE, config, lastRequest));\n          }\n        });\n\n        responseStream.on('aborted', function handlerStreamAborted() {\n          if (rejected) {\n            return;\n          }\n\n          const err = new AxiosError(\n            'stream has been aborted',\n            AxiosError.ERR_BAD_RESPONSE,\n            config,\n            lastRequest\n          );\n          responseStream.destroy(err);\n          reject(err);\n        });\n\n        responseStream.on('error', function handleStreamError(err) {\n          if (req.destroyed) return;\n          reject(AxiosError.from(err, null, config, lastRequest));\n        });\n\n        responseStream.on('end', function handleStreamEnd() {\n          try {\n            let responseData = responseBuffer.length === 1 ? responseBuffer[0] : Buffer.concat(responseBuffer);\n            if (responseType !== 'arraybuffer') {\n              responseData = responseData.toString(responseEncoding);\n              if (!responseEncoding || responseEncoding === 'utf8') {\n                responseData = utils$1.stripBOM(responseData);\n              }\n            }\n            response.data = responseData;\n          } catch (err) {\n            return reject(AxiosError.from(err, null, config, response.request, response));\n          }\n          settle(resolve, reject, response);\n        });\n      }\n\n      abortEmitter.once('abort', err => {\n        if (!responseStream.destroyed) {\n          responseStream.emit('error', err);\n          responseStream.destroy();\n        }\n      });\n    });\n\n    abortEmitter.once('abort', err => {\n      if (req.close) {\n        req.close();\n      } else {\n        req.destroy(err);\n      }\n    });\n\n    // Handle errors\n    req.on('error', function handleRequestError(err) {\n      // @todo remove\n      // if (req.aborted && err.code !== AxiosError.ERR_FR_TOO_MANY_REDIRECTS) return;\n      reject(AxiosError.from(err, null, config, req));\n    });\n\n    // set tcp keep alive to prevent drop connection by peer\n    req.on('socket', function handleRequestSocket(socket) {\n      // default interval of sending ack packet is 1 minute\n      socket.setKeepAlive(true, 1000 * 60);\n    });\n\n    // Handle request timeout\n    if (config.timeout) {\n      // This is forcing a int timeout to avoid problems if the `req` interface doesn't handle other types.\n      const timeout = parseInt(config.timeout, 10);\n\n      if (Number.isNaN(timeout)) {\n        abort(new AxiosError(\n          'error trying to parse `config.timeout` to int',\n          AxiosError.ERR_BAD_OPTION_VALUE,\n          config,\n          req\n        ));\n\n        return;\n      }\n\n      // Sometime, the response will be very slow, and does not respond, the connect event will be block by event loop system.\n      // And timer callback will be fired, and abort() will be invoked before connection, then get \"socket hang up\" and code ECONNRESET.\n      // At this time, if we have a large number of request, nodejs will hang up some socket on background. and the number will up and up.\n      // And then these socket which be hang up will devouring CPU little by little.\n      // ClientRequest.setTimeout will be fired on the specify milliseconds, and can make sure that abort() will be fired after connect.\n      req.setTimeout(timeout, function handleRequestTimeout() {\n        if (isDone) return;\n        let timeoutErrorMessage = config.timeout ? 'timeout of ' + config.timeout + 'ms exceeded' : 'timeout exceeded';\n        const transitional = config.transitional || transitionalDefaults;\n        if (config.timeoutErrorMessage) {\n          timeoutErrorMessage = config.timeoutErrorMessage;\n        }\n        abort(new AxiosError(\n          timeoutErrorMessage,\n          transitional.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,\n          config,\n          req\n        ));\n      });\n    } else {\n      // explicitly reset the socket timeout value for a possible `keep-alive` request\n      req.setTimeout(0);\n    }\n\n\n    // Send the request\n    if (utils$1.isStream(data)) {\n      let ended = false;\n      let errored = false;\n\n      data.on('end', () => {\n        ended = true;\n      });\n\n      data.once('error', err => {\n        errored = true;\n        req.destroy(err);\n      });\n\n      data.on('close', () => {\n        if (!ended && !errored) {\n          abort(new CanceledError('Request stream has been aborted', config, req));\n        }\n      });\n\n      data.pipe(req);\n    } else {\n      data && req.write(data);\n      req.end();\n    }\n  });\n};\n\nconst isURLSameOrigin = platform.hasStandardBrowserEnv ? ((origin, isMSIE) => (url) => {\n  url = new URL(url, platform.origin);\n\n  return (\n    origin.protocol === url.protocol &&\n    origin.host === url.host &&\n    (isMSIE || origin.port === url.port)\n  );\n})(\n  new URL(platform.origin),\n  platform.navigator && /(msie|trident)/i.test(platform.navigator.userAgent)\n) : () => true;\n\nconst cookies = platform.hasStandardBrowserEnv ?\n\n  // Standard browser envs support document.cookie\n  {\n    write(name, value, expires, path, domain, secure, sameSite) {\n      if (typeof document === 'undefined') return;\n\n      const cookie = [`${name}=${encodeURIComponent(value)}`];\n\n      if (utils$1.isNumber(expires)) {\n        cookie.push(`expires=${new Date(expires).toUTCString()}`);\n      }\n      if (utils$1.isString(path)) {\n        cookie.push(`path=${path}`);\n      }\n      if (utils$1.isString(domain)) {\n        cookie.push(`domain=${domain}`);\n      }\n      if (secure === true) {\n        cookie.push('secure');\n      }\n      if (utils$1.isString(sameSite)) {\n        cookie.push(`SameSite=${sameSite}`);\n      }\n\n      document.cookie = cookie.join('; ');\n    },\n\n    read(name) {\n      if (typeof document === 'undefined') return null;\n      const match = document.cookie.match(new RegExp('(?:^|; )' + name + '=([^;]*)'));\n      return match ? decodeURIComponent(match[1]) : null;\n    },\n\n    remove(name) {\n      this.write(name, '', Date.now() - 86400000, '/');\n    }\n  }\n\n  :\n\n  // Non-standard browser env (web workers, react-native) lack needed support.\n  {\n    write() {},\n    read() {\n      return null;\n    },\n    remove() {}\n  };\n\nconst headersToObject = (thing) => thing instanceof AxiosHeaders$1 ? { ...thing } : thing;\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n *\n * @returns {Object} New object resulting from merging config2 to config1\n */\nfunction mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  const config = {};\n\n  function getMergedValue(target, source, prop, caseless) {\n    if (utils$1.isPlainObject(target) && utils$1.isPlainObject(source)) {\n      return utils$1.merge.call({caseless}, target, source);\n    } else if (utils$1.isPlainObject(source)) {\n      return utils$1.merge({}, source);\n    } else if (utils$1.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDeepProperties(a, b, prop, caseless) {\n    if (!utils$1.isUndefined(b)) {\n      return getMergedValue(a, b, prop, caseless);\n    } else if (!utils$1.isUndefined(a)) {\n      return getMergedValue(undefined, a, prop, caseless);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function valueFromConfig2(a, b) {\n    if (!utils$1.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function defaultToConfig2(a, b) {\n    if (!utils$1.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    } else if (!utils$1.isUndefined(a)) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDirectKeys(a, b, prop) {\n    if (prop in config2) {\n      return getMergedValue(a, b);\n    } else if (prop in config1) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  const mergeMap = {\n    url: valueFromConfig2,\n    method: valueFromConfig2,\n    data: valueFromConfig2,\n    baseURL: defaultToConfig2,\n    transformRequest: defaultToConfig2,\n    transformResponse: defaultToConfig2,\n    paramsSerializer: defaultToConfig2,\n    timeout: defaultToConfig2,\n    timeoutMessage: defaultToConfig2,\n    withCredentials: defaultToConfig2,\n    withXSRFToken: defaultToConfig2,\n    adapter: defaultToConfig2,\n    responseType: defaultToConfig2,\n    xsrfCookieName: defaultToConfig2,\n    xsrfHeaderName: defaultToConfig2,\n    onUploadProgress: defaultToConfig2,\n    onDownloadProgress: defaultToConfig2,\n    decompress: defaultToConfig2,\n    maxContentLength: defaultToConfig2,\n    maxBodyLength: defaultToConfig2,\n    beforeRedirect: defaultToConfig2,\n    transport: defaultToConfig2,\n    httpAgent: defaultToConfig2,\n    httpsAgent: defaultToConfig2,\n    cancelToken: defaultToConfig2,\n    socketPath: defaultToConfig2,\n    responseEncoding: defaultToConfig2,\n    validateStatus: mergeDirectKeys,\n    headers: (a, b, prop) => mergeDeepProperties(headersToObject(a), headersToObject(b), prop, true)\n  };\n\n  utils$1.forEach(Object.keys({...config1, ...config2}), function computeConfigValue(prop) {\n    const merge = mergeMap[prop] || mergeDeepProperties;\n    const configValue = merge(config1[prop], config2[prop], prop);\n    (utils$1.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);\n  });\n\n  return config;\n}\n\nconst resolveConfig = (config) => {\n  const newConfig = mergeConfig({}, config);\n\n  let { data, withXSRFToken, xsrfHeaderName, xsrfCookieName, headers, auth } = newConfig;\n\n  newConfig.headers = headers = AxiosHeaders$1.from(headers);\n\n  newConfig.url = buildURL(buildFullPath(newConfig.baseURL, newConfig.url, newConfig.allowAbsoluteUrls), config.params, config.paramsSerializer);\n\n  // HTTP basic authentication\n  if (auth) {\n    headers.set('Authorization', 'Basic ' +\n      btoa((auth.username || '') + ':' + (auth.password ? unescape(encodeURIComponent(auth.password)) : ''))\n    );\n  }\n\n  if (utils$1.isFormData(data)) {\n    if (platform.hasStandardBrowserEnv || platform.hasStandardBrowserWebWorkerEnv) {\n      headers.setContentType(undefined); // browser handles it\n    } else if (utils$1.isFunction(data.getHeaders)) {\n      // Node.js FormData (like form-data package)\n      const formHeaders = data.getHeaders();\n      // Only set safe headers to avoid overwriting security headers\n      const allowedHeaders = ['content-type', 'content-length'];\n      Object.entries(formHeaders).forEach(([key, val]) => {\n        if (allowedHeaders.includes(key.toLowerCase())) {\n          headers.set(key, val);\n        }\n      });\n    }\n  }  \n\n  // Add xsrf header\n  // This is only done if running in a standard browser environment.\n  // Specifically not if we're in a web worker, or react-native.\n\n  if (platform.hasStandardBrowserEnv) {\n    withXSRFToken && utils$1.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(newConfig));\n\n    if (withXSRFToken || (withXSRFToken !== false && isURLSameOrigin(newConfig.url))) {\n      // Add xsrf header\n      const xsrfValue = xsrfHeaderName && xsrfCookieName && cookies.read(xsrfCookieName);\n\n      if (xsrfValue) {\n        headers.set(xsrfHeaderName, xsrfValue);\n      }\n    }\n  }\n\n  return newConfig;\n};\n\nconst isXHRAdapterSupported = typeof XMLHttpRequest !== 'undefined';\n\nconst xhrAdapter = isXHRAdapterSupported && function (config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    const _config = resolveConfig(config);\n    let requestData = _config.data;\n    const requestHeaders = AxiosHeaders$1.from(_config.headers).normalize();\n    let {responseType, onUploadProgress, onDownloadProgress} = _config;\n    let onCanceled;\n    let uploadThrottled, downloadThrottled;\n    let flushUpload, flushDownload;\n\n    function done() {\n      flushUpload && flushUpload(); // flush events\n      flushDownload && flushDownload(); // flush events\n\n      _config.cancelToken && _config.cancelToken.unsubscribe(onCanceled);\n\n      _config.signal && _config.signal.removeEventListener('abort', onCanceled);\n    }\n\n    let request = new XMLHttpRequest();\n\n    request.open(_config.method.toUpperCase(), _config.url, true);\n\n    // Set the request timeout in MS\n    request.timeout = _config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      const responseHeaders = AxiosHeaders$1.from(\n        'getAllResponseHeaders' in request && request.getAllResponseHeaders()\n      );\n      const responseData = !responseType || responseType === 'text' || responseType === 'json' ?\n        request.responseText : request.response;\n      const response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config,\n        request\n      };\n\n      settle(function _resolve(value) {\n        resolve(value);\n        done();\n      }, function _reject(err) {\n        reject(err);\n        done();\n      }, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(new AxiosError('Request aborted', AxiosError.ECONNABORTED, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n  request.onerror = function handleError(event) {\n       // Browsers deliver a ProgressEvent in XHR onerror\n       // (message may be empty; when present, surface it)\n       // See https://developer.mozilla.org/docs/Web/API/XMLHttpRequest/error_event\n       const msg = event && event.message ? event.message : 'Network Error';\n       const err = new AxiosError(msg, AxiosError.ERR_NETWORK, config, request);\n       // attach the underlying event for consumers who want details\n       err.event = event || null;\n       reject(err);\n       request = null;\n    };\n    \n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      let timeoutErrorMessage = _config.timeout ? 'timeout of ' + _config.timeout + 'ms exceeded' : 'timeout exceeded';\n      const transitional = _config.transitional || transitionalDefaults;\n      if (_config.timeoutErrorMessage) {\n        timeoutErrorMessage = _config.timeoutErrorMessage;\n      }\n      reject(new AxiosError(\n        timeoutErrorMessage,\n        transitional.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,\n        config,\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Remove Content-Type if data is undefined\n    requestData === undefined && requestHeaders.setContentType(null);\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils$1.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {\n        request.setRequestHeader(key, val);\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils$1.isUndefined(_config.withCredentials)) {\n      request.withCredentials = !!_config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = _config.responseType;\n    }\n\n    // Handle progress if needed\n    if (onDownloadProgress) {\n      ([downloadThrottled, flushDownload] = progressEventReducer(onDownloadProgress, true));\n      request.addEventListener('progress', downloadThrottled);\n    }\n\n    // Not all browsers support upload events\n    if (onUploadProgress && request.upload) {\n      ([uploadThrottled, flushUpload] = progressEventReducer(onUploadProgress));\n\n      request.upload.addEventListener('progress', uploadThrottled);\n\n      request.upload.addEventListener('loadend', flushUpload);\n    }\n\n    if (_config.cancelToken || _config.signal) {\n      // Handle cancellation\n      // eslint-disable-next-line func-names\n      onCanceled = cancel => {\n        if (!request) {\n          return;\n        }\n        reject(!cancel || cancel.type ? new CanceledError(null, config, request) : cancel);\n        request.abort();\n        request = null;\n      };\n\n      _config.cancelToken && _config.cancelToken.subscribe(onCanceled);\n      if (_config.signal) {\n        _config.signal.aborted ? onCanceled() : _config.signal.addEventListener('abort', onCanceled);\n      }\n    }\n\n    const protocol = parseProtocol(_config.url);\n\n    if (protocol && platform.protocols.indexOf(protocol) === -1) {\n      reject(new AxiosError('Unsupported protocol ' + protocol + ':', AxiosError.ERR_BAD_REQUEST, config));\n      return;\n    }\n\n\n    // Send the request\n    request.send(requestData || null);\n  });\n};\n\nconst composeSignals = (signals, timeout) => {\n  const {length} = (signals = signals ? signals.filter(Boolean) : []);\n\n  if (timeout || length) {\n    let controller = new AbortController();\n\n    let aborted;\n\n    const onabort = function (reason) {\n      if (!aborted) {\n        aborted = true;\n        unsubscribe();\n        const err = reason instanceof Error ? reason : this.reason;\n        controller.abort(err instanceof AxiosError ? err : new CanceledError(err instanceof Error ? err.message : err));\n      }\n    };\n\n    let timer = timeout && setTimeout(() => {\n      timer = null;\n      onabort(new AxiosError(`timeout ${timeout} of ms exceeded`, AxiosError.ETIMEDOUT));\n    }, timeout);\n\n    const unsubscribe = () => {\n      if (signals) {\n        timer && clearTimeout(timer);\n        timer = null;\n        signals.forEach(signal => {\n          signal.unsubscribe ? signal.unsubscribe(onabort) : signal.removeEventListener('abort', onabort);\n        });\n        signals = null;\n      }\n    };\n\n    signals.forEach((signal) => signal.addEventListener('abort', onabort));\n\n    const {signal} = controller;\n\n    signal.unsubscribe = () => utils$1.asap(unsubscribe);\n\n    return signal;\n  }\n};\n\nconst composeSignals$1 = composeSignals;\n\nconst streamChunk = function* (chunk, chunkSize) {\n  let len = chunk.byteLength;\n\n  if (!chunkSize || len < chunkSize) {\n    yield chunk;\n    return;\n  }\n\n  let pos = 0;\n  let end;\n\n  while (pos < len) {\n    end = pos + chunkSize;\n    yield chunk.slice(pos, end);\n    pos = end;\n  }\n};\n\nconst readBytes = async function* (iterable, chunkSize) {\n  for await (const chunk of readStream(iterable)) {\n    yield* streamChunk(chunk, chunkSize);\n  }\n};\n\nconst readStream = async function* (stream) {\n  if (stream[Symbol.asyncIterator]) {\n    yield* stream;\n    return;\n  }\n\n  const reader = stream.getReader();\n  try {\n    for (;;) {\n      const {done, value} = await reader.read();\n      if (done) {\n        break;\n      }\n      yield value;\n    }\n  } finally {\n    await reader.cancel();\n  }\n};\n\nconst trackStream = (stream, chunkSize, onProgress, onFinish) => {\n  const iterator = readBytes(stream, chunkSize);\n\n  let bytes = 0;\n  let done;\n  let _onFinish = (e) => {\n    if (!done) {\n      done = true;\n      onFinish && onFinish(e);\n    }\n  };\n\n  return new ReadableStream({\n    async pull(controller) {\n      try {\n        const {done, value} = await iterator.next();\n\n        if (done) {\n         _onFinish();\n          controller.close();\n          return;\n        }\n\n        let len = value.byteLength;\n        if (onProgress) {\n          let loadedBytes = bytes += len;\n          onProgress(loadedBytes);\n        }\n        controller.enqueue(new Uint8Array(value));\n      } catch (err) {\n        _onFinish(err);\n        throw err;\n      }\n    },\n    cancel(reason) {\n      _onFinish(reason);\n      return iterator.return();\n    }\n  }, {\n    highWaterMark: 2\n  })\n};\n\nconst DEFAULT_CHUNK_SIZE = 64 * 1024;\n\nconst {isFunction} = utils$1;\n\nconst globalFetchAPI = (({Request, Response}) => ({\n  Request, Response\n}))(utils$1.global);\n\nconst {\n  ReadableStream: ReadableStream$1, TextEncoder: TextEncoder$1\n} = utils$1.global;\n\n\nconst test = (fn, ...args) => {\n  try {\n    return !!fn(...args);\n  } catch (e) {\n    return false\n  }\n};\n\nconst factory = (env) => {\n  env = utils$1.merge.call({\n    skipUndefined: true\n  }, globalFetchAPI, env);\n\n  const {fetch: envFetch, Request, Response} = env;\n  const isFetchSupported = envFetch ? isFunction(envFetch) : typeof fetch === 'function';\n  const isRequestSupported = isFunction(Request);\n  const isResponseSupported = isFunction(Response);\n\n  if (!isFetchSupported) {\n    return false;\n  }\n\n  const isReadableStreamSupported = isFetchSupported && isFunction(ReadableStream$1);\n\n  const encodeText = isFetchSupported && (typeof TextEncoder$1 === 'function' ?\n      ((encoder) => (str) => encoder.encode(str))(new TextEncoder$1()) :\n      async (str) => new Uint8Array(await new Request(str).arrayBuffer())\n  );\n\n  const supportsRequestStream = isRequestSupported && isReadableStreamSupported && test(() => {\n    let duplexAccessed = false;\n\n    const hasContentType = new Request(platform.origin, {\n      body: new ReadableStream$1(),\n      method: 'POST',\n      get duplex() {\n        duplexAccessed = true;\n        return 'half';\n      },\n    }).headers.has('Content-Type');\n\n    return duplexAccessed && !hasContentType;\n  });\n\n  const supportsResponseStream = isResponseSupported && isReadableStreamSupported &&\n    test(() => utils$1.isReadableStream(new Response('').body));\n\n  const resolvers = {\n    stream: supportsResponseStream && ((res) => res.body)\n  };\n\n  isFetchSupported && ((() => {\n    ['text', 'arrayBuffer', 'blob', 'formData', 'stream'].forEach(type => {\n      !resolvers[type] && (resolvers[type] = (res, config) => {\n        let method = res && res[type];\n\n        if (method) {\n          return method.call(res);\n        }\n\n        throw new AxiosError(`Response type '${type}' is not supported`, AxiosError.ERR_NOT_SUPPORT, config);\n      });\n    });\n  })());\n\n  const getBodyLength = async (body) => {\n    if (body == null) {\n      return 0;\n    }\n\n    if (utils$1.isBlob(body)) {\n      return body.size;\n    }\n\n    if (utils$1.isSpecCompliantForm(body)) {\n      const _request = new Request(platform.origin, {\n        method: 'POST',\n        body,\n      });\n      return (await _request.arrayBuffer()).byteLength;\n    }\n\n    if (utils$1.isArrayBufferView(body) || utils$1.isArrayBuffer(body)) {\n      return body.byteLength;\n    }\n\n    if (utils$1.isURLSearchParams(body)) {\n      body = body + '';\n    }\n\n    if (utils$1.isString(body)) {\n      return (await encodeText(body)).byteLength;\n    }\n  };\n\n  const resolveBodyLength = async (headers, body) => {\n    const length = utils$1.toFiniteNumber(headers.getContentLength());\n\n    return length == null ? getBodyLength(body) : length;\n  };\n\n  return async (config) => {\n    let {\n      url,\n      method,\n      data,\n      signal,\n      cancelToken,\n      timeout,\n      onDownloadProgress,\n      onUploadProgress,\n      responseType,\n      headers,\n      withCredentials = 'same-origin',\n      fetchOptions\n    } = resolveConfig(config);\n\n    let _fetch = envFetch || fetch;\n\n    responseType = responseType ? (responseType + '').toLowerCase() : 'text';\n\n    let composedSignal = composeSignals$1([signal, cancelToken && cancelToken.toAbortSignal()], timeout);\n\n    let request = null;\n\n    const unsubscribe = composedSignal && composedSignal.unsubscribe && (() => {\n      composedSignal.unsubscribe();\n    });\n\n    let requestContentLength;\n\n    try {\n      if (\n        onUploadProgress && supportsRequestStream && method !== 'get' && method !== 'head' &&\n        (requestContentLength = await resolveBodyLength(headers, data)) !== 0\n      ) {\n        let _request = new Request(url, {\n          method: 'POST',\n          body: data,\n          duplex: \"half\"\n        });\n\n        let contentTypeHeader;\n\n        if (utils$1.isFormData(data) && (contentTypeHeader = _request.headers.get('content-type'))) {\n          headers.setContentType(contentTypeHeader);\n        }\n\n        if (_request.body) {\n          const [onProgress, flush] = progressEventDecorator(\n            requestContentLength,\n            progressEventReducer(asyncDecorator(onUploadProgress))\n          );\n\n          data = trackStream(_request.body, DEFAULT_CHUNK_SIZE, onProgress, flush);\n        }\n      }\n\n      if (!utils$1.isString(withCredentials)) {\n        withCredentials = withCredentials ? 'include' : 'omit';\n      }\n\n      // Cloudflare Workers throws when credentials are defined\n      // see https://github.com/cloudflare/workerd/issues/902\n      const isCredentialsSupported = isRequestSupported && \"credentials\" in Request.prototype;\n\n      const resolvedOptions = {\n        ...fetchOptions,\n        signal: composedSignal,\n        method: method.toUpperCase(),\n        headers: headers.normalize().toJSON(),\n        body: data,\n        duplex: \"half\",\n        credentials: isCredentialsSupported ? withCredentials : undefined\n      };\n\n      request = isRequestSupported && new Request(url, resolvedOptions);\n\n      let response = await (isRequestSupported ? _fetch(request, fetchOptions) : _fetch(url, resolvedOptions));\n\n      const isStreamResponse = supportsResponseStream && (responseType === 'stream' || responseType === 'response');\n\n      if (supportsResponseStream && (onDownloadProgress || (isStreamResponse && unsubscribe))) {\n        const options = {};\n\n        ['status', 'statusText', 'headers'].forEach(prop => {\n          options[prop] = response[prop];\n        });\n\n        const responseContentLength = utils$1.toFiniteNumber(response.headers.get('content-length'));\n\n        const [onProgress, flush] = onDownloadProgress && progressEventDecorator(\n          responseContentLength,\n          progressEventReducer(asyncDecorator(onDownloadProgress), true)\n        ) || [];\n\n        response = new Response(\n          trackStream(response.body, DEFAULT_CHUNK_SIZE, onProgress, () => {\n            flush && flush();\n            unsubscribe && unsubscribe();\n          }),\n          options\n        );\n      }\n\n      responseType = responseType || 'text';\n\n      let responseData = await resolvers[utils$1.findKey(resolvers, responseType) || 'text'](response, config);\n\n      !isStreamResponse && unsubscribe && unsubscribe();\n\n      return await new Promise((resolve, reject) => {\n        settle(resolve, reject, {\n          data: responseData,\n          headers: AxiosHeaders$1.from(response.headers),\n          status: response.status,\n          statusText: response.statusText,\n          config,\n          request\n        });\n      })\n    } catch (err) {\n      unsubscribe && unsubscribe();\n\n      if (err && err.name === 'TypeError' && /Load failed|fetch/i.test(err.message)) {\n        throw Object.assign(\n          new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request),\n          {\n            cause: err.cause || err\n          }\n        )\n      }\n\n      throw AxiosError.from(err, err && err.code, config, request);\n    }\n  }\n};\n\nconst seedCache = new Map();\n\nconst getFetch = (config) => {\n  let env = (config && config.env) || {};\n  const {fetch, Request, Response} = env;\n  const seeds = [\n    Request, Response, fetch\n  ];\n\n  let len = seeds.length, i = len,\n    seed, target, map = seedCache;\n\n  while (i--) {\n    seed = seeds[i];\n    target = map.get(seed);\n\n    target === undefined && map.set(seed, target = (i ? new Map() : factory(env)));\n\n    map = target;\n  }\n\n  return target;\n};\n\ngetFetch();\n\n/**\n * Known adapters mapping.\n * Provides environment-specific adapters for Axios:\n * - `http` for Node.js\n * - `xhr` for browsers\n * - `fetch` for fetch API-based requests\n * \n * @type {Object<string, Function|Object>}\n */\nconst knownAdapters = {\n  http: httpAdapter,\n  xhr: xhrAdapter,\n  fetch: {\n    get: getFetch,\n  }\n};\n\n// Assign adapter names for easier debugging and identification\nutils$1.forEach(knownAdapters, (fn, value) => {\n  if (fn) {\n    try {\n      Object.defineProperty(fn, 'name', { value });\n    } catch (e) {\n      // eslint-disable-next-line no-empty\n    }\n    Object.defineProperty(fn, 'adapterName', { value });\n  }\n});\n\n/**\n * Render a rejection reason string for unknown or unsupported adapters\n * \n * @param {string} reason\n * @returns {string}\n */\nconst renderReason = (reason) => `- ${reason}`;\n\n/**\n * Check if the adapter is resolved (function, null, or false)\n * \n * @param {Function|null|false} adapter\n * @returns {boolean}\n */\nconst isResolvedHandle = (adapter) => utils$1.isFunction(adapter) || adapter === null || adapter === false;\n\n/**\n * Get the first suitable adapter from the provided list.\n * Tries each adapter in order until a supported one is found.\n * Throws an AxiosError if no adapter is suitable.\n * \n * @param {Array<string|Function>|string|Function} adapters - Adapter(s) by name or function.\n * @param {Object} config - Axios request configuration\n * @throws {AxiosError} If no suitable adapter is available\n * @returns {Function} The resolved adapter function\n */\nfunction getAdapter(adapters, config) {\n  adapters = utils$1.isArray(adapters) ? adapters : [adapters];\n\n  const { length } = adapters;\n  let nameOrAdapter;\n  let adapter;\n\n  const rejectedReasons = {};\n\n  for (let i = 0; i < length; i++) {\n    nameOrAdapter = adapters[i];\n    let id;\n\n    adapter = nameOrAdapter;\n\n    if (!isResolvedHandle(nameOrAdapter)) {\n      adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];\n\n      if (adapter === undefined) {\n        throw new AxiosError(`Unknown adapter '${id}'`);\n      }\n    }\n\n    if (adapter && (utils$1.isFunction(adapter) || (adapter = adapter.get(config)))) {\n      break;\n    }\n\n    rejectedReasons[id || '#' + i] = adapter;\n  }\n\n  if (!adapter) {\n    const reasons = Object.entries(rejectedReasons)\n      .map(([id, state]) => `adapter ${id} ` +\n        (state === false ? 'is not supported by the environment' : 'is not available in the build')\n      );\n\n    let s = length ?\n      (reasons.length > 1 ? 'since :\\n' + reasons.map(renderReason).join('\\n') : ' ' + renderReason(reasons[0])) :\n      'as no adapter specified';\n\n    throw new AxiosError(\n      `There is no suitable adapter to dispatch the request ` + s,\n      'ERR_NOT_SUPPORT'\n    );\n  }\n\n  return adapter;\n}\n\n/**\n * Exports Axios adapters and utility to resolve an adapter\n */\nconst adapters = {\n  /**\n   * Resolve an adapter from a list of adapter names or functions.\n   * @type {Function}\n   */\n  getAdapter,\n\n  /**\n   * Exposes all known adapters\n   * @type {Object<string, Function|Object>}\n   */\n  adapters: knownAdapters\n};\n\n/**\n * Throws a `CanceledError` if cancellation has been requested.\n *\n * @param {Object} config The config that is to be used for the request\n *\n * @returns {void}\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n\n  if (config.signal && config.signal.aborted) {\n    throw new CanceledError(null, config);\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n *\n * @returns {Promise} The Promise to be fulfilled\n */\nfunction dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  config.headers = AxiosHeaders$1.from(config.headers);\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.transformRequest\n  );\n\n  if (['post', 'put', 'patch'].indexOf(config.method) !== -1) {\n    config.headers.setContentType('application/x-www-form-urlencoded', false);\n  }\n\n  const adapter = adapters.getAdapter(config.adapter || defaults$1.adapter, config);\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      config.transformResponse,\n      response\n    );\n\n    response.headers = AxiosHeaders$1.from(response.headers);\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          config.transformResponse,\n          reason.response\n        );\n        reason.response.headers = AxiosHeaders$1.from(reason.response.headers);\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n}\n\nconst validators$1 = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach((type, i) => {\n  validators$1[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nconst deprecatedWarnings = {};\n\n/**\n * Transitional option validator\n *\n * @param {function|boolean?} validator - set to false if the transitional option has been removed\n * @param {string?} version - deprecated version / removed since version\n * @param {string?} message - some message with additional info\n *\n * @returns {function}\n */\nvalidators$1.transitional = function transitional(validator, version, message) {\n  function formatMessage(opt, desc) {\n    return '[Axios v' + VERSION + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return (value, opt, opts) => {\n    if (validator === false) {\n      throw new AxiosError(\n        formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')),\n        AxiosError.ERR_DEPRECATED\n      );\n    }\n\n    if (version && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\nvalidators$1.spelling = function spelling(correctSpelling) {\n  return (value, opt) => {\n    // eslint-disable-next-line no-console\n    console.warn(`${opt} is likely a misspelling of ${correctSpelling}`);\n    return true;\n  }\n};\n\n/**\n * Assert object's properties type\n *\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n *\n * @returns {object}\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new AxiosError('options must be an object', AxiosError.ERR_BAD_OPTION_VALUE);\n  }\n  const keys = Object.keys(options);\n  let i = keys.length;\n  while (i-- > 0) {\n    const opt = keys[i];\n    const validator = schema[opt];\n    if (validator) {\n      const value = options[opt];\n      const result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new AxiosError('option ' + opt + ' must be ' + result, AxiosError.ERR_BAD_OPTION_VALUE);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw new AxiosError('Unknown option ' + opt, AxiosError.ERR_BAD_OPTION);\n    }\n  }\n}\n\nconst validator = {\n  assertOptions,\n  validators: validators$1\n};\n\nconst validators = validator.validators;\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n *\n * @return {Axios} A new instance of Axios\n */\nclass Axios {\n  constructor(instanceConfig) {\n    this.defaults = instanceConfig || {};\n    this.interceptors = {\n      request: new InterceptorManager$1(),\n      response: new InterceptorManager$1()\n    };\n  }\n\n  /**\n   * Dispatch a request\n   *\n   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)\n   * @param {?Object} config\n   *\n   * @returns {Promise} The Promise to be fulfilled\n   */\n  async request(configOrUrl, config) {\n    try {\n      return await this._request(configOrUrl, config);\n    } catch (err) {\n      if (err instanceof Error) {\n        let dummy = {};\n\n        Error.captureStackTrace ? Error.captureStackTrace(dummy) : (dummy = new Error());\n\n        // slice off the Error: ... line\n        const stack = dummy.stack ? dummy.stack.replace(/^.+\\n/, '') : '';\n        try {\n          if (!err.stack) {\n            err.stack = stack;\n            // match without the 2 top stack lines\n          } else if (stack && !String(err.stack).endsWith(stack.replace(/^.+\\n.+\\n/, ''))) {\n            err.stack += '\\n' + stack;\n          }\n        } catch (e) {\n          // ignore the case where \"stack\" is an un-writable property\n        }\n      }\n\n      throw err;\n    }\n  }\n\n  _request(configOrUrl, config) {\n    /*eslint no-param-reassign:0*/\n    // Allow for axios('example/url'[, config]) a la fetch API\n    if (typeof configOrUrl === 'string') {\n      config = config || {};\n      config.url = configOrUrl;\n    } else {\n      config = configOrUrl || {};\n    }\n\n    config = mergeConfig(this.defaults, config);\n\n    const {transitional, paramsSerializer, headers} = config;\n\n    if (transitional !== undefined) {\n      validator.assertOptions(transitional, {\n        silentJSONParsing: validators.transitional(validators.boolean),\n        forcedJSONParsing: validators.transitional(validators.boolean),\n        clarifyTimeoutError: validators.transitional(validators.boolean)\n      }, false);\n    }\n\n    if (paramsSerializer != null) {\n      if (utils$1.isFunction(paramsSerializer)) {\n        config.paramsSerializer = {\n          serialize: paramsSerializer\n        };\n      } else {\n        validator.assertOptions(paramsSerializer, {\n          encode: validators.function,\n          serialize: validators.function\n        }, true);\n      }\n    }\n\n    // Set config.allowAbsoluteUrls\n    if (config.allowAbsoluteUrls !== undefined) ; else if (this.defaults.allowAbsoluteUrls !== undefined) {\n      config.allowAbsoluteUrls = this.defaults.allowAbsoluteUrls;\n    } else {\n      config.allowAbsoluteUrls = true;\n    }\n\n    validator.assertOptions(config, {\n      baseUrl: validators.spelling('baseURL'),\n      withXsrfToken: validators.spelling('withXSRFToken')\n    }, true);\n\n    // Set config.method\n    config.method = (config.method || this.defaults.method || 'get').toLowerCase();\n\n    // Flatten headers\n    let contextHeaders = headers && utils$1.merge(\n      headers.common,\n      headers[config.method]\n    );\n\n    headers && utils$1.forEach(\n      ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n      (method) => {\n        delete headers[method];\n      }\n    );\n\n    config.headers = AxiosHeaders$1.concat(contextHeaders, headers);\n\n    // filter out skipped interceptors\n    const requestInterceptorChain = [];\n    let synchronousRequestInterceptors = true;\n    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n      if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n        return;\n      }\n\n      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    const responseInterceptorChain = [];\n    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    let promise;\n    let i = 0;\n    let len;\n\n    if (!synchronousRequestInterceptors) {\n      const chain = [dispatchRequest.bind(this), undefined];\n      chain.unshift(...requestInterceptorChain);\n      chain.push(...responseInterceptorChain);\n      len = chain.length;\n\n      promise = Promise.resolve(config);\n\n      while (i < len) {\n        promise = promise.then(chain[i++], chain[i++]);\n      }\n\n      return promise;\n    }\n\n    len = requestInterceptorChain.length;\n\n    let newConfig = config;\n\n    while (i < len) {\n      const onFulfilled = requestInterceptorChain[i++];\n      const onRejected = requestInterceptorChain[i++];\n      try {\n        newConfig = onFulfilled(newConfig);\n      } catch (error) {\n        onRejected.call(this, error);\n        break;\n      }\n    }\n\n    try {\n      promise = dispatchRequest.call(this, newConfig);\n    } catch (error) {\n      return Promise.reject(error);\n    }\n\n    i = 0;\n    len = responseInterceptorChain.length;\n\n    while (i < len) {\n      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);\n    }\n\n    return promise;\n  }\n\n  getUri(config) {\n    config = mergeConfig(this.defaults, config);\n    const fullPath = buildFullPath(config.baseURL, config.url, config.allowAbsoluteUrls);\n    return buildURL(fullPath, config.params, config.paramsSerializer);\n  }\n}\n\n// Provide aliases for supported request methods\nutils$1.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method,\n      url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils$1.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n\n  function generateHTTPMethod(isForm) {\n    return function httpMethod(url, data, config) {\n      return this.request(mergeConfig(config || {}, {\n        method,\n        headers: isForm ? {\n          'Content-Type': 'multipart/form-data'\n        } : {},\n        url,\n        data\n      }));\n    };\n  }\n\n  Axios.prototype[method] = generateHTTPMethod();\n\n  Axios.prototype[method + 'Form'] = generateHTTPMethod(true);\n});\n\nconst Axios$1 = Axios;\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @param {Function} executor The executor function.\n *\n * @returns {CancelToken}\n */\nclass CancelToken {\n  constructor(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('executor must be a function.');\n    }\n\n    let resolvePromise;\n\n    this.promise = new Promise(function promiseExecutor(resolve) {\n      resolvePromise = resolve;\n    });\n\n    const token = this;\n\n    // eslint-disable-next-line func-names\n    this.promise.then(cancel => {\n      if (!token._listeners) return;\n\n      let i = token._listeners.length;\n\n      while (i-- > 0) {\n        token._listeners[i](cancel);\n      }\n      token._listeners = null;\n    });\n\n    // eslint-disable-next-line func-names\n    this.promise.then = onfulfilled => {\n      let _resolve;\n      // eslint-disable-next-line func-names\n      const promise = new Promise(resolve => {\n        token.subscribe(resolve);\n        _resolve = resolve;\n      }).then(onfulfilled);\n\n      promise.cancel = function reject() {\n        token.unsubscribe(_resolve);\n      };\n\n      return promise;\n    };\n\n    executor(function cancel(message, config, request) {\n      if (token.reason) {\n        // Cancellation has already been requested\n        return;\n      }\n\n      token.reason = new CanceledError(message, config, request);\n      resolvePromise(token.reason);\n    });\n  }\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  throwIfRequested() {\n    if (this.reason) {\n      throw this.reason;\n    }\n  }\n\n  /**\n   * Subscribe to the cancel signal\n   */\n\n  subscribe(listener) {\n    if (this.reason) {\n      listener(this.reason);\n      return;\n    }\n\n    if (this._listeners) {\n      this._listeners.push(listener);\n    } else {\n      this._listeners = [listener];\n    }\n  }\n\n  /**\n   * Unsubscribe from the cancel signal\n   */\n\n  unsubscribe(listener) {\n    if (!this._listeners) {\n      return;\n    }\n    const index = this._listeners.indexOf(listener);\n    if (index !== -1) {\n      this._listeners.splice(index, 1);\n    }\n  }\n\n  toAbortSignal() {\n    const controller = new AbortController();\n\n    const abort = (err) => {\n      controller.abort(err);\n    };\n\n    this.subscribe(abort);\n\n    controller.signal.unsubscribe = () => this.unsubscribe(abort);\n\n    return controller.signal;\n  }\n\n  /**\n   * Returns an object that contains a new `CancelToken` and a function that, when called,\n   * cancels the `CancelToken`.\n   */\n  static source() {\n    let cancel;\n    const token = new CancelToken(function executor(c) {\n      cancel = c;\n    });\n    return {\n      token,\n      cancel\n    };\n  }\n}\n\nconst CancelToken$1 = CancelToken;\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n *\n * @returns {Function}\n */\nfunction spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n}\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n *\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nfunction isAxiosError(payload) {\n  return utils$1.isObject(payload) && (payload.isAxiosError === true);\n}\n\nconst HttpStatusCode = {\n  Continue: 100,\n  SwitchingProtocols: 101,\n  Processing: 102,\n  EarlyHints: 103,\n  Ok: 200,\n  Created: 201,\n  Accepted: 202,\n  NonAuthoritativeInformation: 203,\n  NoContent: 204,\n  ResetContent: 205,\n  PartialContent: 206,\n  MultiStatus: 207,\n  AlreadyReported: 208,\n  ImUsed: 226,\n  MultipleChoices: 300,\n  MovedPermanently: 301,\n  Found: 302,\n  SeeOther: 303,\n  NotModified: 304,\n  UseProxy: 305,\n  Unused: 306,\n  TemporaryRedirect: 307,\n  PermanentRedirect: 308,\n  BadRequest: 400,\n  Unauthorized: 401,\n  PaymentRequired: 402,\n  Forbidden: 403,\n  NotFound: 404,\n  MethodNotAllowed: 405,\n  NotAcceptable: 406,\n  ProxyAuthenticationRequired: 407,\n  RequestTimeout: 408,\n  Conflict: 409,\n  Gone: 410,\n  LengthRequired: 411,\n  PreconditionFailed: 412,\n  PayloadTooLarge: 413,\n  UriTooLong: 414,\n  UnsupportedMediaType: 415,\n  RangeNotSatisfiable: 416,\n  ExpectationFailed: 417,\n  ImATeapot: 418,\n  MisdirectedRequest: 421,\n  UnprocessableEntity: 422,\n  Locked: 423,\n  FailedDependency: 424,\n  TooEarly: 425,\n  UpgradeRequired: 426,\n  PreconditionRequired: 428,\n  TooManyRequests: 429,\n  RequestHeaderFieldsTooLarge: 431,\n  UnavailableForLegalReasons: 451,\n  InternalServerError: 500,\n  NotImplemented: 501,\n  BadGateway: 502,\n  ServiceUnavailable: 503,\n  GatewayTimeout: 504,\n  HttpVersionNotSupported: 505,\n  VariantAlsoNegotiates: 506,\n  InsufficientStorage: 507,\n  LoopDetected: 508,\n  NotExtended: 510,\n  NetworkAuthenticationRequired: 511,\n  WebServerIsDown: 521,\n  ConnectionTimedOut: 522,\n  OriginIsUnreachable: 523,\n  TimeoutOccurred: 524,\n  SslHandshakeFailed: 525,\n  InvalidSslCertificate: 526,\n};\n\nObject.entries(HttpStatusCode).forEach(([key, value]) => {\n  HttpStatusCode[value] = key;\n});\n\nconst HttpStatusCode$1 = HttpStatusCode;\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n *\n * @returns {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  const context = new Axios$1(defaultConfig);\n  const instance = bind(Axios$1.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils$1.extend(instance, Axios$1.prototype, context, {allOwnKeys: true});\n\n  // Copy context to instance\n  utils$1.extend(instance, context, null, {allOwnKeys: true});\n\n  // Factory for creating new instances\n  instance.create = function create(instanceConfig) {\n    return createInstance(mergeConfig(defaultConfig, instanceConfig));\n  };\n\n  return instance;\n}\n\n// Create the default instance to be exported\nconst axios = createInstance(defaults$1);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios$1;\n\n// Expose Cancel & CancelToken\naxios.CanceledError = CanceledError;\naxios.CancelToken = CancelToken$1;\naxios.isCancel = isCancel;\naxios.VERSION = VERSION;\naxios.toFormData = toFormData;\n\n// Expose AxiosError class\naxios.AxiosError = AxiosError;\n\n// alias for CanceledError for backward compatibility\naxios.Cancel = axios.CanceledError;\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\n\naxios.spread = spread;\n\n// Expose isAxiosError\naxios.isAxiosError = isAxiosError;\n\n// Expose mergeConfig\naxios.mergeConfig = mergeConfig;\n\naxios.AxiosHeaders = AxiosHeaders$1;\n\naxios.formToJSON = thing => formDataToJSON(utils$1.isHTMLForm(thing) ? new FormData(thing) : thing);\n\naxios.getAdapter = adapters.getAdapter;\n\naxios.HttpStatusCode = HttpStatusCode$1;\n\naxios.default = axios;\n\nmodule.exports = axios;\n//# sourceMappingURL=axios.cjs.map\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar toStr = Object.prototype.toString;\nvar max = Math.max;\nvar funcType = '[object Function]';\n\nvar concatty = function concatty(a, b) {\n    var arr = [];\n\n    for (var i = 0; i < a.length; i += 1) {\n        arr[i] = a[i];\n    }\n    for (var j = 0; j < b.length; j += 1) {\n        arr[j + a.length] = b[j];\n    }\n\n    return arr;\n};\n\nvar slicy = function slicy(arrLike, offset) {\n    var arr = [];\n    for (var i = offset || 0, j = 0; i < arrLike.length; i += 1, j += 1) {\n        arr[j] = arrLike[i];\n    }\n    return arr;\n};\n\nvar joiny = function (arr, joiner) {\n    var str = '';\n    for (var i = 0; i < arr.length; i += 1) {\n        str += arr[i];\n        if (i + 1 < arr.length) {\n            str += joiner;\n        }\n    }\n    return str;\n};\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.apply(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slicy(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                concatty(args, arguments)\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        }\n        return target.apply(\n            that,\n            concatty(args, arguments)\n        );\n\n    };\n\n    var boundLength = max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs[i] = '$' + i;\n    }\n\n    bound = Function('binder', 'return function (' + joiny(boundArgs, ',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = Error;\n","// API\nmodule.exports = state;\n\n/**\n * Creates initial state object\n * for iteration over list\n *\n * @param   {array|object} list - list to iterate over\n * @param   {function|null} sortMethod - function to use for keys sort,\n *                                     or `null` to keep them as is\n * @returns {object} - initial state object\n */\nfunction state(list, sortMethod)\n{\n  var isNamedList = !Array.isArray(list)\n    , initState =\n    {\n      index    : 0,\n      keyedList: isNamedList || sortMethod ? Object.keys(list) : null,\n      jobs     : {},\n      results  : isNamedList ? {} : [],\n      size     : isNamedList ? Object.keys(list).length : list.length\n    }\n    ;\n\n  if (sortMethod)\n  {\n    // sort array keys based on it's values\n    // sort object's keys just on own merit\n    initState.keyedList.sort(isNamedList ? sortMethod : function(a, b)\n    {\n      return sortMethod(list[a], list[b]);\n    });\n  }\n\n  return initState;\n}\n","'use strict';\n\n/** @type {import('./ref')} */\nmodule.exports = ReferenceError;\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $defineProperty = GetIntrinsic('%Object.defineProperty%', true);\n\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar hasOwn = require('hasown');\nvar $TypeError = require('es-errors/type');\n\nvar toStringTag = hasToStringTag ? Symbol.toStringTag : null;\n\n/** @type {import('.')} */\nmodule.exports = function setToStringTag(object, value) {\n\tvar overrideIfSet = arguments.length > 2 && !!arguments[2] && arguments[2].force;\n\tvar nonConfigurable = arguments.length > 2 && !!arguments[2] && arguments[2].nonConfigurable;\n\tif (\n\t\t(typeof overrideIfSet !== 'undefined' && typeof overrideIfSet !== 'boolean')\n\t\t|| (typeof nonConfigurable !== 'undefined' && typeof nonConfigurable !== 'boolean')\n\t) {\n\t\tthrow new $TypeError('if provided, the `overrideIfSet` and `nonConfigurable` options must be booleans');\n\t}\n\tif (toStringTag && (overrideIfSet || !hasOwn(object, toStringTag))) {\n\t\tif ($defineProperty) {\n\t\t\t$defineProperty(object, toStringTag, {\n\t\t\t\tconfigurable: !nonConfigurable,\n\t\t\t\tenumerable: false,\n\t\t\t\tvalue: value,\n\t\t\t\twritable: false\n\t\t\t});\n\t\t} else {\n\t\t\tobject[toStringTag] = value; // eslint-disable-line no-param-reassign\n\t\t}\n\t}\n};\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = Object;\n","'use strict';\n\n/** @type {import('./type')} */\nmodule.exports = TypeError;\n","module.exports = require(\"fs\");","'use strict';\n\nvar call = Function.prototype.call;\nvar $hasOwn = Object.prototype.hasOwnProperty;\nvar bind = require('function-bind');\n\n/** @type {import('.')} */\nmodule.exports = bind.call(call, $hasOwn);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(4265);\n"],"names":["leafPrototypes","getProto","iterate","initState","terminator","ascending","a","b","module","exports","list","iterator","sortMethod","callback","state","iteratorHandler","error","result","index","length","results","bind","descending","Function","prototype","call","apiService","_onDidChangeTreeData","vscode","EventEmitter","onDidChangeTreeData","this","event","constructor","refresh","fire","getTreeItem","element","getChildren","items","header","WelcomeItem","TreeItemCollapsibleState","None","iconPath","ThemeIcon","description","push","desc1","features","icon","text","feature","item","enableItem","command","title","contextValue","ThemeColor","TreeItem","label","collapsibleState","super","ChatWindowProvider","_extensionUri","_apiService","static","Map","openChatWindow","agent","panelKey","id","existingPanel","_panels","get","reveal","ViewColumn","One","panel","window","createWebviewPanel","name","enableScripts","retainContextWhenHidden","localResourceRoots","light","Uri","joinPath","dark","set","onDidDispose","delete","webview","html","_getHtmlForWebview","indexHealth","messages","contextMode","refreshIndexHealth","async","workspacePath","workspace","workspaceFolders","uri","fsPath","getIndexHealth","postMessage","type","health","onDidReceiveMessage","data","_handleMessage","message","mode","model","userMessage","role","content","timestamp","Date","isTyping","status","rawPath","path","replace","toLowerCase","undefined","response","startTime","now","useRag","useCodeGraph","agenticResponse","executeAgentAgentic","tokensUsed","durationMs","executeAgent","assistantMessage","errorMessage","Error","cspSource","fn","nextTick","setImmediate","process","setTimeout","Math","round","$Object","$Error","$EvalError","$RangeError","$ReferenceError","$SyntaxError","$TypeError","$URIError","abs","floor","max","min","pow","sign","$Function","getEvalledConstructor","expressionSyntax","e","$gOPD","$defineProperty","throwTypeError","ThrowTypeError","calleeThrows","arguments","gOPDthrows","hasSymbols","$ObjectGPO","$ReflectGPO","$apply","$call","needsEval","TypedArray","Uint8Array","INTRINSICS","__proto__","AggregateError","Array","ArrayBuffer","Symbol","Atomics","BigInt","BigInt64Array","BigUint64Array","Boolean","DataView","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","eval","Float16Array","Float32Array","Float64Array","FinalizationRegistry","Int8Array","Int16Array","Int32Array","isFinite","isNaN","JSON","Number","parseFloat","parseInt","Promise","Proxy","Reflect","RegExp","Set","SharedArrayBuffer","String","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","WeakRef","WeakSet","errorProto","doEval","value","gen","LEGACY_ALIASES","hasOwn","$concat","concat","$spliceApply","splice","$replace","$strSlice","slice","$exec","exec","rePropName","reEscapeChar","getBaseIntrinsic","allowMissing","alias","intrinsicName","parts","string","first","last","match","number","quote","subString","stringToPath","intrinsicBaseName","intrinsic","intrinsicRealName","skipFurtherCaching","i","isOwn","part","desc","Object","defineProperty","env","createDebug","namespace","prevTime","namespacesCache","enabledCache","enableOverride","debug","args","enabled","self","curr","ms","diff","prev","coerce","unshift","format","formatter","formatters","val","formatArgs","log","apply","useColors","color","selectColor","extend","destroy","enumerable","configurable","namespaces","v","init","delimiter","newDebug","matchesTemplate","search","template","searchIndex","templateIndex","starIndex","matchIndex","default","stack","disable","names","skips","map","join","enable","save","split","trim","filter","ns","skip","humanize","console","warn","keys","forEach","key","hash","charCodeAt","colors","load","CombinedStream","util","http","https","parseUrl","fs","Stream","crypto","mime","asynckit","setToStringTag","populate","FormData","options","option","_overheadLength","_valueLength","_valuesToMeasure","inherits","LINE_BREAK","DEFAULT_CONTENT_TYPE","append","field","filename","isArray","_error","_multiPartHeader","footer","_multiPartFooter","_trackLength","valueLength","knownLength","Buffer","isBuffer","byteLength","readable","_lengthRetriever","end","Infinity","start","stat","err","fileSize","size","headers","on","pause","resume","contentDisposition","_getContentDisposition","contentType","_getContentType","contents","prop","getBoundary","filepath","normalize","basename","client","_httpMessage","lookup","next","_streams","_lastBoundary","getHeaders","userHeaders","formHeaders","setBoundary","boundary","TypeError","_boundary","_generateBoundary","getBuffer","dataBuffer","alloc","len","from","substring","randomBytes","toString","getLengthSync","hasKnownLength","getLength","cb","parallel","values","submit","params","request","defaults","method","port","pathname","host","hostname","protocol","setHeader","pipe","onResponse","responce","removeListener","emit","DelayedStream","writable","dataSize","maxDataSize","pauseStreams","_released","_currentStream","_insideLoop","_pendingNext","create","combinedStream","isStreamLike","stream","newStream","pauseStream","_checkDataSize","_handleErrors","dest","_getNext","_realGetNext","shift","_pipeNext","write","_emitError","_reset","_updateDataSize","require","getPrototypeOf","extensionUri","panels","newWorkflowPanel","openNewWorkflowPanel","onCreated","handleCreateWorkflow","dispose","getNewWorkflowHtml","workflow","createWorkflow","worktreePath","showInformationMessage","gitBranch","commands","executeCommand","file","forceNewWindow","repoName","pop","escapeHtml","openWorkflowPanel","workflowId","refreshPanel","getWorkflow","showErrorMessage","handleMessage","getHtml","handleEnrich","handleIndexCodebase","handleIndexAndEnrich","handlePlan","handleExecuteStep","stepId","handleExecuteAllPending","handleChat","handleComplete","handleCancel","handleFinalize","url","openExternal","parse","handleOpenWorkspace","handleSkipStep","handleResetStep","handleStepChat","handleApproveStepOutput","handleRejectStepOutput","reason","handleViewStepContext","handleReassignStep","agentId","handleUpdateStepDescription","handleOpenFile","filePath","handleOpenDiff","handleGetWorktreeChanges","handleOpenWorktreeInExplorer","fullPath","startsWith","showTextDocument","getGitStatus","success","repoPath","repositoryPath","workspaceStatus","getWorkspaceStatus","isOnboarded","graphStats","getCodeGraphStats","totalNodes","totalEdges","action","reindexWorkspace","withProgress","location","ProgressLocation","Notification","cancellable","progress","getBackgroundJobStatus","jobId","resolve","report","processedItems","totalItems","increment","progressPercent","graphError","analyzeWorkflow","onboardWorkspace","findSolutionPath","ignoreDirs","collectFiles","dir","extension","depth","maxDepth","entries","readdirSync","withFileTypes","entry","isDirectory","has","isFile","endsWith","slnFiles","sort","sep","csprojFiles","planWorkflow","executeWorkflowStep","pendingSteps","steps","s","order","step","stepError","sendWorkflowChat","planModified","analysisUpdated","completeWorkflow","showWarningMessage","modal","cancelWorkflow","finalizeWorkflow","commitMessage","createPullRequest","prTitle","draft","prUrl","msg","choice","updateWorkspaceFolders","skipStep","resetStep","chatWithStep","updatedDescription","errMessage","approveStepOutput","rejectStepOutput","find","capability","assignedAgentId","reassignStep","updatedWorkflow","updateStepDescription","stepsHtml","getStepsHtml","statusClass","patternName","getActionButtons","getChatPlaceholder","chatHistory","renderWorkflowChatHistory","analyzedContext","formatAnalyzedContext","stringify","phases","currentPhase","phase","cleanDescription","parsePhase","phaseName","hasMeaningfulPhases","renderStepCard","canExecute","canExecuteStep","isBlocked","canRetry","hasOutput","output","needsRework","isApproved","approval","statusIcon","outputHtml","toolStepsHtml","artifactsHtml","tokenInfo","parsed","toLocaleString","toFixed","toolSteps","toolStepsInnerHtml","ts","isFailed","observation","includes","thought","actionInput","truncatedObs","isTruncated","artifacts","artifactEntries","modifiedFilesEntry","k","modifiedFiles","f","filePaths","fileJson","fileListHtml","otherArtifacts","otherArtifactsHtml","chatHistoryHtml","Role","Content","chatHtml","actionButtons","hasChatHistory","chatIcon","chatTitle","hasArtifacts","menuHtml","cardClasses","c","reworkBadge","tokenBadge","attemptsBadge","attempts","formatTime","iso","toLocaleTimeString","hour","minute","second","startedAt","endTime","completedAt","timestampInfo","metaItems","x","metaRow","previousOutputHtml","previousOutput","phaseGroup","allCompleted","every","phaseClass","phaseIcon","isUser","leftButtons","rightButtons","hasPendingSteps","pullRequestUrl","analysis","EvalError","getOwnPropertySymbols","obj","sym","symObj","_","getOwnPropertyNames","syms","propertyIsEnumerable","getOwnPropertyDescriptor","descriptor","dst","src","serial","serialOrdered","statuses","api","ollama","database","rag","mcp","httpClient","timeout","checkAll","all","checkApi","checkOllama","checkDatabase","checkRag","checkMcp","getStatuses","getOverallStatus","some","getBaseUrl","responseTime","details","lastChecked","getErrorMessage","getConfiguration","tagsResponse","models","m","parameterSize","parameter_size","quantization","quantization_level","family","totalModelSize","reduce","sum","runningModels","psResponse","sizeVram","size_vram","expiresAt","expires_at","modelCount","loadedCount","loadedVram","formatBytes","healthy","totalDocuments","totalChunks","canonicalPath","isWorktree","repoInfo","gitService","getRepositoryInfo","lastIndexedAt","repoDocuments","repoChunks","graphNodes","graphEdges","chunksByType","commitsBehind","isIndexing","indexingProgress","normalizedPath","encodedPath","workspaceResponse","catch","stats","chunks","files","lastAccessedAt","indexingJob","statsResponse","mcpTools","agentToolCount","isAxiosError","code","bytes","defer","isAsync","$isNaN","outputChannel","logWatcher","currentLogFile","lastPosition","createOutputChannel","getLogDirectory","platform","PROGRAMDATA","HOME","findLatestLogFile","logDir","existsSync","mtime","statSync","getTime","showLogs","show","startTailing","stopTailing","logFile","appendLine","readNewContent","dirname","watch","eventType","latestLog","createReadStream","encoding","chunk","lines","line","close","clear","openLogFile","doc","openTextDocument","openLogFolder","$actualApply","$reflectApply","looksLikeNode","looksLikeBrowser","looksLikeV8","URL","Writable","assert","document","isFunction","captureStackTrace","useNativeURL","preservedUrlFields","events","eventHandlers","arg1","arg2","arg3","_redirectable","InvalidUrlError","createErrorType","RedirectionError","TooManyRedirectsError","MaxBodyLengthExceededError","WriteAfterEndError","noop","RedirectableRequest","responseCallback","_sanitizeOptions","_options","_ended","_ending","_redirectCount","_redirects","_requestBodyLength","_requestBodyBuffers","_onNativeResponse","_processResponse","cause","_performRequest","wrap","protocols","maxRedirects","maxBodyLength","nativeProtocols","scheme","nativeProtocol","wrappedProtocol","defineProperties","input","spreadUrlObject","isString","validateUrl","assign","equal","wrappedRequest","test","href","urlObject","target","spread","removeMatchingHeaders","regex","lastValue","baseClass","CustomError","properties","destroyRequest","abort","_currentRequest","currentRequest","removeHeader","msecs","destroyOnTimeout","socket","addListener","startTimer","_timeout","clearTimeout","clearTimer","once","property","searchPos","indexOf","agents","_currentUrl","_isRedirect","buffers","writeNext","buffer","finished","statusCode","trackRedirects","requestHeaders","followRedirects","responseUrl","redirects","beforeRedirect","Host","req","getHeader","relative","base","currentHostHeader","currentUrlParts","currentHost","currentUrl","redirectUrl","subdomain","domain","dot","isSubdomain","responseDetails","requestDetails","reflectGetProto","originalGetProto","getDunderProto","O","origSymbol","hasSymbolSham","context","setExtensionPath","extensionPath","auraApiService","AuraApiService","healthCheckService","HealthCheckService","logService","LogService","statusTreeProvider","StatusTreeProvider","agentTreeProvider","AgentTreeProvider","workflowTreeProvider","WorkflowTreeProvider","welcomeViewProvider","WelcomeViewProvider","chatWindowProvider","workflowPanelProvider","WorkflowPanelProvider","statusView","createTreeView","treeDataProvider","showCollapseAll","welcomeView","workflowView","agentView","statusBarItem","createStatusBarItem","StatusBarAlignment","Right","updateStatusBar","refreshCommand","registerCommand","refreshAll","startCommand","stopCommand","executeAgentCommand","quickExecuteCommand","selectAgentCommand","selected","showQuickPick","placeHolder","capabilities","languages","priority","provider","language","then","showAgentDetails","clipboard","writeText","openChatCommand","getAgents","detail","indexWorkspaceCommand","updateIndexingStatusBar","excludePatterns","indexWorkspace","showRagStatsCommand","getRagStats","getRagHealth","showRagStats","clearRagIndexCommand","workspaceName","removeWorkspace","checkOnboardingStatus","clearRagIndex","clearAndReindexCommand","clearAndReindex","showIndexingProgressCommand","showIndexingProgress","onboardWorkspaceCommand","actions","setupActions","createWorkflowCommand","openWorkflowCommand","executeStepCommand","executeStep","refreshWorkflowsCommand","deleteWorkflowCommand","workflowTitle","deleteWorkflow","showHelpCommand","openDocFile","openDocsCommand","showCheatSheetCommand","openGettingStartedCommand","showLogsCommand","openLogFileCommand","openLogFolderCommand","findImplementationsCommand","typeName","showInputBox","prompt","implementations","findImplementations","impl","lineNumber","fullName","selection","Range","findCallersCommand","methodName","containingType","callers","findCallers","caller","signature","showTypeMembersCommand","members","getTypeMembers","member","getSymbolIcon","nodeType","showTypeMembers","createStoryFromIssueCommand","issueUrl","validateInput","createStoryFromIssue","refreshFromIssueCommand","refreshFromIssue","updated","changes","postUpdateToIssueCommand","postUpdateToIssue","openStoryWorktreeCommand","showCurrentStoryCommand","getWorkflowByPath","showCurrentStory","configWatcher","onDidChangeConfiguration","affectsConfiguration","setupAutoRefresh","mcpProvider","lm","registerMcpServerDefinitionProvider","apiUrl","onDidChangeMcpServerDefinitions","provideMcpServerDefinitions","_token","McpHttpServerDefinition","resolveMcpServerDefinition","server","subscriptions","currentStep","completedCount","totalCount","checkAndOpenWorkflowForWorktree","refreshInterval","clearInterval","indexingPollInterval","indexingStatusBarItem","currentRefreshRate","FAST_REFRESH_RATE","NORMAL_REFRESH_RATE","tooltip","setInterval","percent","hide","backgroundColor","ragStatus","targetRate","adjustRefreshRate","degraded","checking","agentName","pickItems","picked","relativePath","docsPath","clean","jobs","URIError","normalizePath","getExecutionTimeout","getWorkflowTimeout","getIndexingTimeout","getHealth","getAgentsByCapability","getBestAgent","getAgentById","post","queryRag","query","topK","executeAgentWithRag","maxSteps","executeAgentStreaming","history","callbacks","abortController","fetch","body","signal","ok","errorText","errorJson","onError","statusText","reader","getReader","decoder","TextDecoder","done","read","decode","eventData","onToken","onDone","totalTokens","finishReason","parseError","interfaceName","findNodes","nodes","getWorkflows","URLSearchParams","queryString","workflows","addWorkflowStep","removeWorkflowStep","feedback","put","prBody","baseBranch","listWorkspaces","limit","getWorkspace","idOrPath","isId","normalizedValue","param","onboardedAt","createdAt","axiosError","startIndexing","includePatterns","workspaceId","createWorktree","closeLinkedIssue","comment","browser","__nwjs","flag","argv","prefix","position","terminatorPosition","tty","inspectOpts","stderr","formatWithOptions","colorCode","hideDate","toISOString","DEBUG","isatty","fd","deprecate","supportsColor","level","toUpperCase","o","inspect","str","extensions","types","preference","db","extname","EXTRACT_TYPE_REGEXP","TEXT_TYPE_REGEXP","charset","charsets","exts","substr","source","to","extPath","CAPABILITY_HIERARCHY","CHILD_TO_PARENT","parent","children","child","getParentCapability","capabilityGroups","CapabilityGroup","SubCapabilityGroup","AgentItem","getRootChildren","PlaceholderItem","userAgents","topLevelMap","subCapabilityMap","primaryCap","parentCap","subMap","priorityOrder","sortedCapabilities","aIndex","bIndex","localeCompare","cap","group","subCapabilities","formatCapabilityName","Expanded","directAgentCount","subCapCount","totalAgents","arr","getIcon","MarkdownString","sortedSubCaps","subCap","sortedAgents","word","charAt","subCapability","parentCapability","formatSubCapabilityName","Collapsed","agentCount","ext","lang","iconName","iconFilePath","priorityLabel","getPriorityLabel","languageInfo","getTooltip","md","appendMarkdown","tags","t","GitService","gitPath","parseWorktreeGitFile","gitFilePath","readFileSync","gitdir","worktreesIndex","worktreesIndexAlt","parentPath","worktreeName","getRepositoryRootViaGit","execSync","cwd","DEFAULT_PORTS","ftp","gopher","ws","wss","stringEndsWith","getEnv","getProxyForUrl","parsedUrl","proto","NO_PROXY","proxy","parsedProxy","parsedProxyHostname","parsedProxyPort","shouldProxy","h","d","w","plural","msAbs","n","isPlural","long","fmtShort","implementation","hasProtoAccessor","callBind","gOPD","$getPrototypeOf","getWorkflowChildren","getRootItems","WorkflowTreeItem","baseUrl","createWorkflowItem","collapsible","getStatusIcon","getWorkflowTooltip","issueNumber","issueItem","branchItem","worktreeItem","stepItem","getStepIcon","createStatusItem","createOllamaItem","createRagItem","createMcpItem","itemType","ollamaStatus","getOllamaChildren","getRagChildren","getModelChildren","mcpStatus","getMcpChildren","StatusItem","hasDetails","totalVram","runningItem","modelItem","noLoadedItem","totalSize","modelsItem","healthItem","createHealthItem","graphItem","noGraphItem","docCount","chunkCount","docItem","chunkItem","count","typeItem","getIconForContentType","toolsItem","tool","toolItem","agentItem","getDescription","os","hasFlag","forceColor","translateLevel","hasBasic","has256","has16m","haveStream","streamIsTTY","TERM","osRelease","release","CI_NAME","TEAMCITY_VERSION","COLORTERM","version","TERM_PROGRAM_VERSION","TERM_PROGRAM","FORCE_COLOR","isTTY","stdout","lastC","storage","setItem","removeItem","r","getItem","navigator","userAgent","documentElement","style","WebkitAppearance","firebug","exception","table","localStorage","localstorage","warned","j","runJob","SyntaxError","_maxDataSizeExceeded","_bufferedEvents","delayedStream","realEmit","_handleEmit","setEncoding","_checkIfMaxDataSizeExceeded","toStringTag","RangeError","FormData$1","proxyFromEnv","http2","zlib","_interopDefaultLegacy","FormData__default","crypto__default","url__default","proxyFromEnv__default","http__default","https__default","http2__default","util__default","followRedirects__default","zlib__default","stream__default","thisArg","kindOf","cache","thing","kindOfTest","typeOfTest","isUndefined","isFunction$1","isArrayBuffer","isNumber","isObject","isPlainObject","isDate","isBlob","isFileList","isURLSearchParams","isReadableStream","isRequest","isResponse","isHeaders","allOwnKeys","l","findKey","_key","_global","globalThis","global","isContextDefined","isTypedArray","isHTMLForm","hasOwnProperty","isRegExp","reduceDescriptors","reducer","descriptors","getOwnPropertyDescriptors","reducedDescriptors","ret","isAsyncFn","_setImmediate","setImmediateSupported","postMessageSupported","token","random","addEventListener","asap","queueMicrotask","utils$1","isFormData","kind","isArrayBufferView","isView","isBoolean","isEmptyObject","isStream","merge","caseless","skipUndefined","assignValue","targetKey","stripBOM","superConstructor","props","toFlatObject","sourceObj","destObj","propFilter","merged","searchString","lastIndex","toArray","forEachEntry","_iterator","pair","matchAll","regExp","matches","hasOwnProp","freezeMethods","toObjectSet","arrayOrString","define","toCamelCase","p1","p2","toFiniteNumber","defaultValue","isSpecCompliantForm","toJSONObject","visit","reducedValue","isThenable","isIterable","AxiosError","config","toJSON","fileName","columnNumber","prototype$1","isVisitable","removeBrackets","renderKey","dots","customProps","errCode","predicates","toFormData","formData","metaTokens","indexes","visitor","defaultVisitor","useBlob","Blob","convertValue","isFlatArray","el","exposedHelpers","build","encode$1","charMap","AxiosURLSearchParams","_pairs","encode","buildURL","_encode","serialize","serializeFn","serializedParams","hashmarkIndex","encoder","InterceptorManager$1","handlers","use","fulfilled","rejected","synchronous","runWhen","eject","transitionalDefaults","silentJSONParsing","forcedJSONParsing","clarifyTimeoutError","ALPHA","DIGIT","ALPHABET","ALPHA_DIGIT","platform$1","isNode","classes","generateString","alphabet","randomValues","randomFillSync","hasBrowserEnv","_navigator","hasStandardBrowserEnv","product","hasStandardBrowserWebWorkerEnv","WorkerGlobalScope","importScripts","origin","freeze","formDataToJSON","buildPath","isNumericKey","isLast","arrayToObject","parsePropPath","transitional","adapter","transformRequest","getContentType","hasJSONContentType","isObjectPayload","setContentType","helpers","toURLEncodedForm","formSerializer","_FormData","rawValue","stringifySafely","transformResponse","JSONRequested","responseType","strictJSONParsing","parseReviver","ERR_BAD_RESPONSE","xsrfCookieName","xsrfHeaderName","maxContentLength","validateStatus","common","defaults$1","ignoreDuplicateOf","$internals","normalizeHeader","normalizeValue","matchHeaderValue","isHeaderNameFilter","AxiosHeaders","valueOrRewrite","rewrite","_value","_header","_rewrite","lHeader","setHeaders","rawHeaders","parseHeaders","parser","tokens","tokensRE","parseTokens","matcher","deleted","deleteHeader","normalized","char","formatHeader","targets","asStrings","getSetCookie","computed","accessor","accessors","defineAccessor","accessorName","buildAccessors","mapped","headerValue","AxiosHeaders$1","transformData","fns","isCancel","__CANCEL__","CanceledError","ERR_CANCELED","settle","reject","ERR_BAD_REQUEST","buildFullPath","baseURL","requestedURL","allowAbsoluteUrls","isRelativeUrl","isAbsoluteURL","relativeURL","combineURLs","VERSION","parseProtocol","DATA_URL_PATTERN","kInternals","AxiosTransformStream","Transform","readableHighWaterMark","maxRate","chunkSize","minChunkSize","timeWindow","ticksRate","samplesCount","internals","bytesSeen","isCaptured","notifiedBytesLoaded","onReadCallback","_read","_transform","bytesThreshold","pushChunk","_chunk","_callback","transformChunk","bytesLeft","chunkRemainder","maxChunkSize","passed","subarray","transformNextChunk","AxiosTransformStream$1","asyncIterator","readBlob$1","blob","arrayBuffer","BOUNDARY_ALPHABET","textEncoder","TextEncoder","CRLF","CRLF_BYTES","FormDataPart","escapeName","isStringValue","contentLength","ZlibHeaderTransformStream","__transform","ZlibHeaderTransformStream$1","callbackify$1","progressEventReducer","listener","isDownloadStream","freq","bytesNotified","_speedometer","timestamps","firstSampleTS","head","tail","chunkLength","bytesCount","speedometer","lastArgs","timer","threshold","invoke","loaded","total","lengthComputable","progressBytes","rate","estimated","throttle","progressEventDecorator","throttled","asyncDecorator","zlibOptions","flush","constants","Z_SYNC_FLUSH","finishFlush","brotliOptions","BROTLI_OPERATION_FLUSH","isBrotliSupported","createBrotliDecompress","httpFollow","httpsFollow","isHttps","supportedProtocols","flushOnFinish","http2Sessions","sessions","getSession","authority","sessionTimeout","authoritySessions","sessionHandle","sessionOptions","destroyed","closed","isDeepStrictEqual","session","connect","removed","removeSession","originalRequestFn","streamsCount","dispatchBeforeRedirect","beforeRedirects","setProxy","configProxy","proxyUrl","username","auth","password","base64","proxyHost","redirectOptions","isHttpAdapterSupported","buildAddressEntry","address","resolveFamily","http2Transport","http2Options","HTTP2_HEADER_SCHEME","HTTP2_HEADER_METHOD","HTTP2_HEADER_PATH","HTTP2_HEADER_STATUS","http2Headers","responseHeaders","httpAdapter","asyncExecutor","httpVersion","responseEncoding","isDone","isHttp2","_lookup","opt","arg0","addresses","addr","abortEmitter","onFinished","cancelToken","unsubscribe","removeEventListener","removeAllListeners","subscribe","aborted","isRejected","Readable","Duplex","offListeners","comma","meta","effectiveLen","pad","idx","tailIsPct3D","estimateDataURLDecodedBytes","convertedData","asBlob","_Blob","ERR_INVALID_URL","isBase64","ERR_NOT_SUPPORT","fromDataURI","onUploadProgress","onDownloadProgress","maxUploadRate","maxDownloadRate","userBoundary","form","headersHandler","tag","boundaryBytes","footerBytes","computedHeaders","formDataToStream$1","hasContentLength","promisify","setContentLength","getContentLength","objectMode","pipeline","paramsSerializer","customErr","exists","httpAgent","httpsAgent","transport","socketPath","isHttpsRequest","insecureHTTPParser","res","streams","responseLength","transformStream","responseStream","lastRequest","decompress","createUnzip","statusMessage","responseBuffer","totalResponseBytes","responseData","setKeepAlive","ERR_BAD_OPTION_VALUE","timeoutErrorMessage","ETIMEDOUT","ECONNABORTED","ended","errored","_reject","onDoneHandler","isURLSameOrigin","isMSIE","cookies","expires","secure","sameSite","cookie","toUTCString","remove","headersToObject","mergeConfig","config1","config2","getMergedValue","mergeDeepProperties","valueFromConfig2","defaultToConfig2","mergeDirectKeys","mergeMap","timeoutMessage","withCredentials","withXSRFToken","configValue","resolveConfig","newConfig","btoa","unescape","allowedHeaders","xsrfValue","xhrAdapter","XMLHttpRequest","_config","requestData","onCanceled","uploadThrottled","downloadThrottled","flushUpload","flushDownload","onloadend","getAllResponseHeaders","responseText","open","onreadystatechange","readyState","responseURL","onabort","onerror","ERR_NETWORK","ontimeout","setRequestHeader","upload","cancel","send","composeSignals$1","signals","controller","AbortController","streamChunk","pos","trackStream","onProgress","onFinish","iterable","readStream","readBytes","_onFinish","ReadableStream","pull","loadedBytes","enqueue","return","highWaterMark","globalFetchAPI","Request","Response","ReadableStream$1","TextEncoder$1","factory","envFetch","isFetchSupported","isRequestSupported","isResponseSupported","isReadableStreamSupported","encodeText","supportsRequestStream","duplexAccessed","hasContentType","duplex","supportsResponseStream","resolvers","fetchOptions","_fetch","composedSignal","toAbortSignal","requestContentLength","_request","getBodyLength","resolveBodyLength","contentTypeHeader","isCredentialsSupported","resolvedOptions","credentials","isStreamResponse","responseContentLength","seedCache","getFetch","seeds","seed","knownAdapters","xhr","renderReason","isResolvedHandle","adapters","nameOrAdapter","rejectedReasons","reasons","throwIfCancellationRequested","throwIfRequested","dispatchRequest","validators$1","deprecatedWarnings","validator","formatMessage","opts","ERR_DEPRECATED","spelling","correctSpelling","assertOptions","schema","allowUnknown","ERR_BAD_OPTION","validators","Axios","instanceConfig","interceptors","configOrUrl","dummy","boolean","function","withXsrfToken","contextHeaders","requestInterceptorChain","synchronousRequestInterceptors","interceptor","responseInterceptorChain","promise","chain","onFulfilled","onRejected","getUri","generateHTTPMethod","isForm","Axios$1","CancelToken","executor","resolvePromise","_listeners","onfulfilled","_resolve","CancelToken$1","HttpStatusCode","Continue","SwitchingProtocols","Processing","EarlyHints","Ok","Created","Accepted","NonAuthoritativeInformation","NoContent","ResetContent","PartialContent","MultiStatus","AlreadyReported","ImUsed","MultipleChoices","MovedPermanently","Found","SeeOther","NotModified","UseProxy","Unused","TemporaryRedirect","PermanentRedirect","BadRequest","Unauthorized","PaymentRequired","Forbidden","NotFound","MethodNotAllowed","NotAcceptable","ProxyAuthenticationRequired","RequestTimeout","Conflict","Gone","LengthRequired","PreconditionFailed","PayloadTooLarge","UriTooLong","UnsupportedMediaType","RangeNotSatisfiable","ExpectationFailed","ImATeapot","MisdirectedRequest","UnprocessableEntity","Locked","FailedDependency","TooEarly","UpgradeRequired","PreconditionRequired","TooManyRequests","RequestHeaderFieldsTooLarge","UnavailableForLegalReasons","InternalServerError","NotImplemented","BadGateway","ServiceUnavailable","GatewayTimeout","HttpVersionNotSupported","VariantAlsoNegotiates","InsufficientStorage","LoopDetected","NotExtended","NetworkAuthenticationRequired","WebServerIsDown","ConnectionTimedOut","OriginIsUnreachable","TimeoutOccurred","SslHandshakeFailed","InvalidSslCertificate","HttpStatusCode$1","axios","createInstance","defaultConfig","instance","Cancel","promises","payload","formToJSON","getAdapter","toStr","concatty","that","bound","arrLike","slicy","boundLength","boundArgs","joiny","Empty","isNamedList","keyedList","ReferenceError","GetIntrinsic","hasToStringTag","object","overrideIfSet","force","nonConfigurable","$hasOwn","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","__esModule","def","current","definition","__webpack_exports__"],"ignoreList":[],"sourceRoot":""}